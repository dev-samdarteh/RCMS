
@model RhemaCMS.Models.ViewModels.vm_cl.MemberProfileComponentModel

@{
    ViewData["Title"] = (!string.IsNullOrEmpty(ViewBag.AppName) ? ViewBag.AppName : "") + " - Church Register";
}

@if (Model != null)
{
<body id="page-top" class="hold-transition sidebar-mini-md sidebar-toggled layout-fixed w-100">




    <input type="hidden" data-value="@Model.setIndex" id="_oSetIndex" />
    <input type="hidden" data-value="@Model.subSetIndex" id="_oSubSetIndex" />

    @*<input type="hidden" id="_oChurchBody_Logged" data-value="@Model.oChurchBody_Logged" />*@
    @*<input type="hidden" id="_pageIndex" data-value="@Model.pageIndex" />*@

    <input type="hidden" id="_oChurchMemberId" data-value="@Model.oChurchMemberId" />
    <input type="hidden" id="_oChurchBodyId" data-value="@Model.oChurchBodyId" />

    <input type="hidden" id="_oChurchBodyId_Logged" data-value="@Model.oChurchBodyId_Logged" />
    <input type="hidden" id="_oAppGloOwnId_Logged" data-value="@Model.oAppGloOwnId_Logged" />
    <input type="hidden" id="_oUserId_Logged" data-value="@Model.oUserId_Logged" />


    <div class="wrapper" id="divSetupMain">

        <div class="content-header mb-3 pb-0  " style="width:100%; border-bottom: 1px solid gainsboro">
            @* border-bottom border-light *@
            <div class="row m-0">
                <div class="col-sm">
                    <h4> Member Profile </h4>
                </div>
                <div class="col-sm-4">
                    <ol class="breadcrumb float-sm-right" style="list-style-type: none;">
                        <li>
                            <a role="button" class="btn btn-light" data-toggle="tooltip" data-placement="bottom" title="Church Member Roll"
                               asp-controller="ChurchMembers" asp-action="IndexCM_SUM" asp-route-oCBid="@Model.oChurchBodyId">
                                <i class="fas fa-list text-secondary mr-1"></i>
                            </a>
                        </li>
                        <li>
                            <a role="button" class="btn btn-light" data-toggle="tooltip" data-placement="bottom" title="Reload data"
                               @*onclick="AddEditCurrDataCM_MPC(@Model.oChurchBodyId, @Model.oChurchMemberId, -1, @Model.setIndex @Model.subSetIndex, false)"*@
                               onclick="ReloadCurrDataCM_MPC(@Model.oChurchBodyId, @Model.oChurchMemberId)">
                                <i class="fas fa-refresh text-secondary mr-1"></i>
                            </a>
                        </li>  
                    </ol>
                </div>
            </div>
        </div>

        <!-- Main content -->
        <section class="content">
            <div class="container-fluid mt-2">
                @{ var strDescRaw = (Model.oMemberBioModel != null ? Model.oMemberBioModel.strMemDisplayName : "Member Profile");
                        var strDesc = '"' + strDescRaw + '"'; }

                <div class="card border-0 shadow-none p-1"  style="font-family:Verdana, Geneva, Tahoma, sans-serif;">
                    <div class="row ">
                        <div class="col-md-3" style="max-width:300px">
                            <div class="card card-light border shadow-sm text-sm  p-1" > @*style="background-color: gainsboro"*@
                                @{ var photoPath = "~/img_db/" + (Model.oChurchMember.PhotoUrl ?? "df_user_p.png"); }

                                <div class="card-body box-profile">
                                    <div class="text-center pt-1 pb-2">
                                        <img class="profile-user-img img-fluid img-circle" style="min-width: 150px; min-height:150px; max-width: 150px; max-height:150px;"
                                             src="@Url.Content(photoPath)" alt="Member photo">
                                    </div>

                                    <h4 class="profile-username text-center text-dark">
                                        @Model.strMemDisplayName
                                    </h4>

                                    @*@{
                                        var strMTCurr = !string.IsNullOrEmpty(Model.oMemberBioModel.strMemType) ? Model.oMemberBioModel.strMemType : Model.oMemberBioModel.strMemType;
                                        var strPosCurr = !string.IsNullOrEmpty(Model.oMemberBioModel.strMemRank) ? Model.oMemberBioModel.strMemRank : Model.oMemberBioModel.strMemType;
                                        if (!strMTCurr.Equals("Member")) strPosCurr = " " + strMTCurr;
                                    }*@

                                    <p class="text-muted text-center text-md pt-1 mb-3">
                                        <span class="badge badge-light text-center font-weight-normal border-0">
                                            @if (Model.oMemberBioModel.oChurchMember.Gender == "M")
                                            {<span> <i class="fas fa-male fa-lg text-primary mr-1 ml-1"></i> </span> }
                                            else if (Model.oMemberBioModel.oChurchMember.Gender == "F")
                                            { <span><i class="fas fa-female fa-lg text-fuchsia mr-1 ml-1"></i> </span>}
                                            else
                                            { <span><i class="fas fa-neuter fa-lg text-black-50 mr-1 ml-1"></i> </span>}

                                            @Model.oMemberBioModel.strGender
                                            <span class="text-black-50">|</span><span class="text-primary">@Model.oMemberBioModel.strMemGeneralStatus</span>
                                        </span> 
                                    </p>

                                    <ul class="list-group list-group-unbordered">

                                        <li class="list-group-item">
                                            <p class="text-md mb-1">
                                                <i class="fas fa-birthday-cake text-black-50 mr-1"></i>
                                                <span class="badge badge-light text-center font-weight-normal border-0"> @Model.oMemberBioModel.strBirthday </span>
                                            </p>

                                            @*@if (!string.IsNullOrEmpty(Model.strMemberAge))
                {
                    <p class="text-md mb-1">
                        <span class="badge badge-primary text-center font-weight-normal border ml-1 mr-1"> Age: @Model.strMemberAge </span>
                    </p>
                }*@

                                            @if (!string.IsNullOrEmpty(Model.strBirthdayTag))
                                            {
                                                <p class="text-md mb-1">
                                                    <span class="badge badge-warning text-center font-weight-normal border ml-1 mr-1"> @Model.strBirthdayTag </span>
                                                </p>
                                            }

                                            <p class="mb-0"><small class="text-muted "> Birthday </small></p>
                                        </li>
                                        <li class="list-group-item">
                                            @{ var strMemLoc = !string.IsNullOrEmpty(Model.oMemberBioModel.strLocation) ? "Lives in " + Model.oMemberBioModel.strLocation : "Unknown"; }
                                            <p class="text-md mb-1">
                                                <i class="fas fa-house-user  text-secondary" mr-1"></i>
                                                <span class="badge badge-light text-center font-weight-normal border-0 ml-1 mr-1">  @strMemLoc </span>
                                            </p>

                                            <p class="mb-0"><small class="text-muted"> Location </small></p>

                                        </li>
                                        <li class="list-group-item">
                                            @{ var _strMarStat = Model.oMemberBioModel.oChurchMember.MaritalStatus == "M" ?
                                                       Model.strMaritalStat + (!string.IsNullOrEmpty(Model.strMemSpouse) ? " to " + Model.strMemSpouse : "") : Model.strMaritalStat; }
                                            <p class="text-md mb-1">
                                                <i class="fas fa-heart mr-1 text-secondary"></i>
                                                <span class="badge badge-light text-center font-weight-normal border-0 ml-1 mr-1">  @_strMarStat </span>
                                            </p>

                                            <p class="mb-0"><small class="text-muted mt-1"> Marital Status </small></p>
                                        </li>
                                        <li class="list-group-item">
                                            @{
                                                var strLeadRole = !string.IsNullOrEmpty(Model.oMemberBioModel.strMemRole) ? Model.oMemberBioModel.strMemRole : "None";
                                                var strRoleUnit = !string.IsNullOrEmpty(Model.oMemberBioModel.strMemUnit) ? "at " + Model.oMemberBioModel.strMemUnit : "";
                                            }
                                            <p class="text-md mb-1">
                                                <i class="fas fa-user-tag mr-1 text-primary"></i>
                                                <span class="badge badge-info text-center font-weight-normal border ml-1 mr-1">  @strLeadRole </span>
                                            </p>
                                            <p class="mb-1"><small class="control-label"> @strRoleUnit </small></p>

                                            <p class="mb-0"><small class="text-muted mt-1"> Lead Role  </small></p>
                                        </li>
                                        <li class="list-group-item text-center border-bottom-0">
                                            @*<small class="control-label"><i class="fas fa-birthday-cake text-black-50 mr-1"></i> Profile Status </small>*@
                                            <p class="text-md mb-0">
                                                @{ var strStat = "Profile-" + (!string.IsNullOrEmpty(Model.oMemberBioModel.strAccountStatus) ? Model.oMemberBioModel.strAccountStatus : "Indeterminate"); }
                                                @if (Model.oMemberBioModel.oChurchMember.Status == "A")
                                                {
                                                    <span class="badge badge-success text-center font-weight-normal border"> @strStat </span>
                                                }
                                                else if (Model.oMemberBioModel.oChurchMember.Status == "T")
                                                {
                                                    <span class="badge badge-info text-center font-weight-normal border"> @strStat </span>
                                                }
                                                else if (Model.oMemberBioModel.oChurchMember.Status == "H")
                                                {
                                                    <span class="badge badge-warning text-center font-weight-normal border"> @strStat </span>
                                                }
                                                else if (Model.oMemberBioModel.oChurchMember.Status == "D")
                                                {
                                                    <span class="badge badge-danger text-center font-weight-normal border"> @strStat </span>
                                                }
                                                else if (Model.oMemberBioModel.oChurchMember.Status == "X")
                                                {
                                                    <span class="badge badge-secondary text-center font-weight-normal border"> @strStat </span>
                                                }
                                                else
                                                {
                                                    <span class="badge badge-light text-center font-weight-normal border"> @strStat </span>
                                                }
                                            </p>
                                        </li>
                                    </ul>

                                    <div class="row mt-3 justify-content-center">
                                        @if (Model.oMemberBioModel.isMemberBirthdayToday)
                                        {
                                            <a href="#" class="btn btn-light btn-light text-xs text-black-50 border mr-1" data-toggle="tooltip" data-placement="top" title="Send Birthday Message"
                                               onclick="SendBirthdayMessageCM_MPC(@Model.oChurchBodyId, @Model.oChurchMemberId)">
                                                <i class="fas fa-bell fa-lg text-primary mr-1"></i>@*<b> Send Birthday Message</b>*@
                                            </a>
                                        }

                                        <a href="#" class="btn btn-light btn-light text-xs text-black-50 border mr-1" data-toggle="tooltip" data-placement="top" title="Send SMS">
                                            <i class="fas fa-sms fa-lg text-black-50 mr-1"></i>@*<b> SMS </b>*@
                                        </a>
                                        <a href="#" class="btn btn-light btn-light text-xs text-black-50 border mr-1" data-toggle="tooltip" data-placement="top" title="Send Email">
                                            <i class="fas fa-envelope fa-lg text-black-50 mr-1"></i>@*<b> Email </b>*@
                                        </a>
                                        <a href="#" class="btn btn-light btn-light text-xs text-black-50 border mr-1" data-toggle="tooltip" data-placement="top" title="Voice Call">
                                            <i class="fas fa-phone fa-lg text-black-50 mr-1"></i>@*<b> Call </b>*@
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-9 shadow-none p-0 border-top-0 border-bottom-0 border-right-0 border-left">
                            <div class="card-header card-light">
                                <ul class="nav nav-pills justify-content-center mb-3 text-sm">
                                    <li class="nav-item"><a class="nav-link active" href="#item1" data-toggle="tab"> Snapshot </a></li>
                                    <li class="nav-item"><a class="nav-link" href="#item2" data-toggle="tab"> Personal-life </a></li>
                                    <li class="nav-item"><a class="nav-link" href="#item3" data-toggle="tab"> Church-life </a></li>
                                    @*<li class="nav-item"><a class="nav-link" href="#item4" data-toggle="tab"> Profile-360 </a></li>*@
                                </ul>

                                @*<hr style="width:50%; border: 1px solid #b7b5b5" />*@
                            </div>
                            <div class="card-body mt-1">
                                <div class="tab-content">
                                    <div class="active tab-pane" id="item1">
                                        <div id="divTabDataMPCvd_MBD" class="overlay-wrapper pt-0">
                                            <div class="se-pre-con"></div>

                                            @{ await Html.RenderPartialAsync("_vwMPCvd_CMProfile", Model); }
                                        </div>
                                    </div>

                                    <div class="tab-pane" id="item2">
                                        <div class="card card-fuchsia card-outline card-outline-tabs border-0 shadow-none">
                                            <div class="card-header p-0 border-bottom-0">
                                                <ul class="nav nav-tabs" id="custom-tabs-four-tab" role="tablist">

                                                    <li class="nav-item">
                                                        <a class="nav-link active " id="custom-tabs-tab1-tab" data-toggle="pill" href="#custom-tabs-tab1" role="tab" aria-controls="custom-tabs-tab1" aria-selected="true">
                                                            <i class="fas fa-fingerprint fa-lg text-black-50 mr-2"></i> <span class="text-xs ">Biodata</span>
                                                        </a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a class="nav-link " id="custom-tabs-tab2-tab" data-toggle="pill" href="#custom-tabs-tab2" role="tab" aria-controls="custom-tabs-tab2" aria-selected="false">
                                                            <i class="fas fa-phone fa-lg text-black-50 mr-2"></i> <span class="text-xs ">Contact Details</span>
                                                        </a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a class="nav-link  " id="custom-tabs-tab3-tab" data-toggle="pill" href="#custom-tabs-tab3" role="tab" aria-controls="custom-tabs-tab3" aria-selected="false">
                                                            <i class="fas fa-microphone fa-lg text-black-50 mr-2"></i> <span class="text-xs ">Languages</span>
                                                        </a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a class="nav-link " id="custom-tabs-tab4-tab" data-toggle="pill" href="#custom-tabs-tab4" role="tab" aria-controls="custom-tabs-tab4" aria-selected="false">
                                                            <i class="fas fa-user-friends fa-lg text-black-50 mr-2"></i><span class="text-xs ">Family Relations</span>
                                                        </a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a class="nav-link " id="custom-tabs-tab0-tab" data-toggle="pill" href="#custom-tabs-tab5" role="tab" aria-controls="custom-tabs-tab5" aria-selected="false">
                                                            <i class="fas fa-user-tag fa-lg text-black-50 mr-2"></i> <span class="text-xs ">Contacts </span>
                                                        </a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a class="nav-link " id="custom-tabs-tab0-tab" data-toggle="pill" href="#custom-tabs-tab6" role="tab" aria-controls="custom-tabs-tab6" aria-selected="false">
                                                            <i class="fas fa-graduation-cap fa-lg text-black-50 mr-2"></i><span class="text-xs "> Education</span>
                                                        </a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a class="nav-link  " id="custom-tabs-tab0-tab" data-toggle="pill" href="#custom-tabs-tab7" role="tab" aria-controls="custom-tabs-tab7" aria-selected="false">
                                                            <i class="fas fa-user-tie fa-lg text-black-50 mr-2"></i> <span class="text-xs ">Profession</span>
                                                        </a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a class="nav-link " id="custom-tabs-tab0-tab" data-toggle="pill" href="#custom-tabs-tab8" role="tab" aria-controls="custom-tabs-tab8" aria-selected="false">
                                                            <i class="fas fa-user-clock fa-lg text-black-50 mr-2"></i> <span class="text-xs ">Work-life</span>
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>

                                            <div class="card-body p-0">
                                                <div class="tab-content p-0" id="custom-tabs-four-tabContent">
                                                    <div class="tab-pane fade show active" id="custom-tabs-tab1" role="tabpanel" aria-labelledby="custom-tabs-tab1-tab">
                                                        <div class="col-md-12 m-0 p-0 border-0" id="section-cmmbd">
                                                            <div class="card-header border-bottom-0">

                                                                @* style="width:100%; border-bottom: 2px solid #b7b5b5;"<span class="title text-primary"> <i class="fas fa-fingerprint fa-lg text-black-50 mr-2"></i> Biodata </span>*@

                                                                @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                {
                                                                    <button type="button" class="btn btn-outline-primary border-0 float-right mr-1"
                                                                            onclick="AddEditCurrDataCM_BD(@Model.oChurchBodyId, @Model.oChurchMemberId, @strDesc)">
                                                                        <i class="fas fa-edit"></i> @*<span>Modify</span>*@
                                                                    </button>
                                                                }

                                                                <button type="button" class="btn btn-default border-0 float-right mr-1"
                                                                        onclick="AddEditCurrDataCM_MPC(@Model.oChurchBodyId, @Model.oChurchMemberId, -1, 1, 0, true)">
                                                                    <i class="fa fa-refresh fa-secondary"></i>
                                                                </button>
                                                            </div>
                                                            <div class="card-body mt-1 pt-0">
                                                                <div id="divTabDataMPCvd_MBD" class="overlay-wrapper pt-0">
                                                                    <div class="se-pre-con"></div>

                                                                    @{ await Html.RenderPartialAsync("_vwMPCvd_MBD", Model.oMemberBioModel); }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="tab-pane fade" id="custom-tabs-tab2" role="tabpanel" aria-labelledby="custom-tabs-tab2-tab">
                                                        <div class="col-md-12 m-0 p-0 border-0" id="section-cmmci">
                                                            <div class="card-header border-bottom-0">
                                                                @*
                                                style="width:100%; border-bottom: 2px solid #b7b5b5;"
                                                <span class="title text-primary"> <i class="fas fa-phone fa-lg text-black-50 mr-2"></i> Contact Details </span>
                                                                *@

                                                                @{
                                                                    var currId = 0;
                                                                    if (Model.oMemberContactInfoModel != null)
                                                                        if (Model.oMemberContactInfoModel.oMemContactInfo != null)
                                                                            currId = Model.oMemberContactInfoModel.oMemContactInfo.Id;
                                                                    var userAction = Model.oMemberContactInfoModel != null ? 2 : 1;
                                                                    var strDescMCINew = '"' + strDescRaw + ": Contact Info" + '"';
                                                                }

                                                                @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                {
                                                                    <button type="button" class="btn btn-outline-primary border-0 float-right"
                                                                            onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, @currId, -1, @strDescMCINew, 2, 0, @userAction)">
                                                                        <i class="fas fa-edit"></i>
                                                                    </button>
                                                                }
                                                            </div>
                                                            <div class="card-body mt-1 pt-0">
                                                                <div id="divTabDataMPCvd_MCI" class="overlay-wrapper pt-0">
                                                                    <div class="se-pre-con"></div>

                                                                    @{ await Html.RenderPartialAsync("_vwMPCvd_MCI", Model.oMemberContactInfoModel); }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="tab-pane fade" id="custom-tabs-tab3" role="tabpanel" aria-labelledby="custom-tabs-tab3-tab">
                                                        <div class=" col-md-12 m-0 p-0 border-0" id="section-cmmls">
                                                            <div class="card-header border-bottom-0">
                                                                @*style="width:100%; border-bottom: 2px solid #b7b5b5;"
                                                <span class="title text-primary"> <i class="fas fa-microphone fa-lg text-black-50 mr-2"></i> Languages Spoken </span>*@
                                                                @{
                                                                    var strDescMLSNew = '"' + strDescRaw + ": New Language" + '"';
                                                                }

                                                                @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                {
                                                                    <button type="button" class="btn btn-outline-primary border-0 float-right"
                                                                            onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescMLSNew, 3, 0, 1)">
                                                                        <i class="fas fa-edit"></i>
                                                                    </button>
                                                                }

                                                            </div>
                                                            <div class="card-body mt-1 pt-0">
                                                                <div id="divTabDataMPCvd_MLS" class="overlay-wrapper pt-0">
                                                                    <div class="se-pre-con"></div>

                                                                    @{ await Html.RenderPartialAsync("_vwMPCvd_MLS", Model.oMemberLanguageSpokenModel); }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="tab-pane fade" id="custom-tabs-tab4" role="tabpanel" aria-labelledby="custom-tabs-tab4-tab">
                                                        <div class="col-md-12 m-0 p-0 border-0" id="section-cmmfr">
                                                            <div class="card-header border-bottom-0">
                                                                @*style="width:100%; border-bottom: 2px solid #b7b5b5;"<span class="title text-primary"> <i class="fas fa-user-friends fa-lg text-black-50 mr-2"></i> Family &amp; Relations </span>*@
                                                                @{
                                                                    var strDescMFRNew = '"' + strDescRaw + ": New Relation" + '"';
                                                                }

                                                                @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                {
                                                                    <button type="button" class="btn btn-outline-primary border-0 float-right"
                                                                            onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescMFRNew, 4, 0, 1)">
                                                                        <i class="fas fa-edit"></i> @*<span> Add Relation </span>*@
                                                                    </button>
                                                                }

                                                            </div>
                                                            <div class="card-body mt-1 pt-0">
                                                                <div id="divTabDataMPCvd_MFR" class="overlay-wrapper pt-0">
                                                                    @{ await Html.RenderPartialAsync("_vwMPCvd_MFR", Model.oMemberRelationModel); }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="tab-pane fade" id="custom-tabs-tab5" role="tabpanel" aria-labelledby="custom-tabs-tab5-tab">
                                                        <div class="  col-md-12 m-0 p-0 border-0" id="section-cmmcp">
                                                            <div class="card-header border-bottom-0">
                                                                @*<span class="title text-primary"> <i class="fas fa-user-tag fa-lg text-black-50 mr-2"></i> Contact Persons </span>*@
                                                                @{
                                                                    var strDescMCPNew = '"' + strDescRaw + ": New Contact" + '"';
                                                                }

                                                                @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                {
                                                                    <button type="button" class="btn btn-outline-primary border-0 float-right"
                                                                            onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescMCPNew, 5, 0, 1)">
                                                                        <i class="fas fa-edit"></i> @*<span> Add Contact </span>*@
                                                                    </button>
                                                                }

                                                            </div>
                                                            <div class="card-body mt-1 pt-0">
                                                                <div id="divTabDataMPCvd_MCP" class="overlay-wrapper pt-0">
                                                                    @{ await Html.RenderPartialAsync("_vwMPCvd_MCP", Model.oMemberContactModel); }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="tab-pane fade" id="custom-tabs-tab6" role="tabpanel" aria-labelledby="custom-tabs-tab6-tab">
                                                        <div class="  col-md-12 m-0 p-0 border-0" id="section-cmmed">
                                                            <div class="card-header border-bottom-0">
                                                                @*<span class="title text-primary"> <i class="fas fa-graduation-cap fa-lg text-black-50 mr-2"></i> Education History </span>*@
                                                                @{
                                                                    var strDescMEDNew = '"' + strDescRaw + ": New Education Info" + '"';
                                                                }
                                                                @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                {
                                                                    <button type="button" class="btn btn-outline-primary border-0 float-right"
                                                                            onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescMEDNew, 6, 0, 1)">
                                                                        <i class="fas fa-edit"></i> @*<span> Add Education </span>*@
                                                                    </button>
                                                                }

                                                            </div>
                                                            <div class="card-body mt-1 pt-0">
                                                                <div id="divTabDataMPCvd_MED" class="overlay-wrapper pt-0">
                                                                    @{ await Html.RenderPartialAsync("_vwMPCvd_MED", Model.oMemberEducationModel); }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="tab-pane fade" id="custom-tabs-tab7" role="tabpanel" aria-labelledby="custom-tabs-tab7-tab">
                                                        <div class="  col-md-12 m-0 p-0 border-0" id="section-cmmpb">
                                                            <div class="card-header border-bottom-0">
                                                                @*<span class="title text-primary"> <i class="fas fa-user-tie fa-lg text-black-50 mr-2"></i> Profession &amp; Brand </span>*@
                                                                @{
                                                                    var strDescMPBNew = '"' + strDescRaw + ": New Profession /Brand" + '"';
                                                                }
                                                                @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                {
                                                                    <button type="button" class="btn btn-outline-primary border-0 float-right"
                                                                            onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescMPBNew, 7, 0, 1)">
                                                                        <i class="fas fa-edit"></i> @*<span> Add Profession </span>*@
                                                                    </button>
                                                                }

                                                            </div>
                                                            <div class="card-body mt-1 pt-0">
                                                                <div id="divTabDataMPCvd_MPB" class="overlay-wrapper pt-0">
                                                                    @{ await Html.RenderPartialAsync("_vwMPCvd_MPB", Model.oMemberProfessionBrandModel); }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="tab-pane fade" id="custom-tabs-tab8" role="tabpanel" aria-labelledby="custom-tabs-tab8-tab">
                                                        <div class="  col-md-12 m-0 p-0 border-0" id="section-cmmwe">
                                                            <div class="card-header pl-1 border-bottom-0" style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                                @*<span class="title text-primary"> <i class="fas fa-user-clock fa-lg text-black-50 mr-2"></i> Work Experience </span>*@
                                                                @{
                                                                    var strDescMWENew = '"' + strDescRaw + ": New Job (Work Experience)" + '"';
                                                                }
                                                                @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                {
                                                                    <button type="button" class="btn btn-outline-primary border-0 float-right"
                                                                            onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescMWENew, 8, 0, 1)">
                                                                        <i class="fas fa-edit"></i> @*<span> Add Job </span>*@
                                                                    </button>
                                                                }

                                                            </div>
                                                            <div class="card-body mt-1 pt-0">
                                                                <div id="divTabDataMPCvd_MWE" class="overlay-wrapper pt-0">
                                                                    @{ await Html.RenderPartialAsync("_vwMPCvd_MWE", Model.oMemberWorkExperienceModel); }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- /.card -->
                                        </div>
                                    </div>

                                    <div class="tab-pane" id="item3">
                                        <div class="card card-fuchsia card-outline card-outline-tabs border-0 shadow-none">

                                            <div class="card-header p-0 border-bottom-0">
                                                <ul class="nav nav-tabs" id="custom-tabs-four-tab" role="tablist">
                                                    <li class="nav-item">
                                                        <a class="nav-link active " id="custom-tabs-tab11-tab" data-toggle="pill" href="#custom-tabs-tab11" role="tab" aria-controls="custom-tabs-tab11" aria-selected="true">
                                                            <i class="fas fa-church fa-lg text-black-50 mr-2"></i> <span class="text-xs ">Church-life</span>
                                                        </a>
                                                    </li>

                                                    <li class="nav-item">
                                                        <a class="nav-link " id="custom-tabs-tab12-tab" data-toggle="pill" href="#custom-tabs-tab12" role="tab" aria-controls="custom-tabs-tab12" aria-selected="false">
                                                            <i class="fas fa-location-arrow fa-lg text-black-50 mr-2"></i><span class="text-xs "> Status Movements </span> @*Movements*@
                                                        </a>
                                                    </li>

                                                    <li class="nav-item">
                                                        <a class="nav-link " id="custom-tabs-tab13-tab" data-toggle="pill" href="#custom-tabs-tab13" role="tab" aria-controls="custom-tabs-tab13" aria-selected="false">
                                                            <i class="fas fa-users fa-lg text-black-50 mr-2"></i> <span class="text-xs "> Groupings &amp; Associations </span>
                                                        </a>
                                                    </li>

                                                    <li class="nav-item">
                                                        <a class="nav-link " id="custom-tabs-tab14-tab" data-toggle="pill" href="#custom-tabs-tab14" role="tab" aria-controls="custom-tabs-tab14" aria-selected="false">
                                                            <i class="fas fa-user-tie fa-lg text-black-50 mr-2"></i> <span class="text-xs "> Roles &amp; Designations </span>
                                                        </a>
                                                    </li>   

                                                   <li class="nav-item">
                                                        <a class="nav-link " id="custom-tabs-tab0-tab" data-toggle="pill" href="#custom-tabs-tab15" role="tab" aria-controls="custom-tabs-tab15" aria-selected="false">
                                                            <i class="fas fa-history fa-lg text-black-50 mr-2"></i> <span class="text-xs "> Membership Renewals </span>
                                                        </a>
                                                    </li>

                                                   @*
                                                    <li class="nav-item">
                                                        <a class="nav-link " id="custom-tabs-tab0-tab" data-toggle="pill" href="#custom-tabs-tab16" role="tab" aria-controls="custom-tabs-tab16" aria-selected="false">
                                                            <i class="fas fa-walking fa-lg text-black-50 mr-2"></i><span class="text-xs "> Migration </span>
                                                        </a>
                                                    </li>

                                                    <li class="nav-item">
                                                        <a class="nav-link " id="custom-tabs-tab0-tab" data-toggle="pill" href="#custom-tabs-tab17" role="tab" aria-controls="custom-tabs-tab17" aria-selected="false">
                                                            <i class="fas fa-check-double fa-lg text-black-50 mr-2"></i><span class="text-xs ">Attendance</span>
                                                        </a>
                                                    </li>

                                                    <li class="nav-item">
                                                        <a class="nav-link " id="custom-tabs-tab0-tab" data-toggle="pill" href="#custom-tabs-tab18" role="tab" aria-controls="custom-tabs-tab18" aria-selected="false">
                                                            <i class="fas fa-coins fa-lg text-black-50 mr-2"></i> <span class="text-xs ">Financials</span>
                                                        </a>
                                                    </li>*@

                                                </ul>
                                            </div>

                                            <div class="card-body">
                                                <div class="tab-content" id="custom-tabs-four-tabContent">
                                                    <div class="tab-pane fade show active" id="custom-tabs-tab11" role="tabpanel" aria-labelledby="custom-tabs-tab11-tab">
                                                        <div class="col-md-12 m-0 p-0 border-0 " id="section-cmmcl">
                                                            <div class="card-header">
                                                                <ul class="nav nav-pills justify-content-end mb-1 text-xs">
                                                                    <li class="nav-item">
                                                                        <a class="nav-link active" href="#mcl-item1" data-toggle="tab">
                                                                            <i class="fas fa-place-of-worship fa-sm text-light mr-1"></i> Core Churchlife
                                                                        </a>
                                                                    </li>
                                                                    <li class="nav-item">
                                                                        <a class="nav-link" href="#mcl-item2" data-toggle="tab">
                                                                            <i class="fa fa-calendar-alt fa-sm text-light mr-1"></i> Church Activities
                                                                        </a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                            <div class="tab-content">
                                                                <div class="active tab-pane" id="mcl-item1">
                                                                    <div class="card-header border-bottom-0">

                                                                        @{
                                                                            var currCLId = 0;
                                                                            if (Model.oMemberChurchlifeAllModel != null)
                                                                                if (Model.oMemberChurchlifeAllModel.oMemberChurchlifeModel != null)
                                                                                    if (Model.oMemberChurchlifeAllModel.oMemberChurchlifeModel.oMemberChurchlife != null)
                                                                                        currCLId = Model.oMemberChurchlifeAllModel.oMemberChurchlifeModel.oMemberChurchlife.Id;
                                                                            var strDescNew_MCL = '"' + strDescRaw + ": New Core Churchlife" + '"';
                                                                        }

                                                                        @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                        {
                                                                            <button type="button" class="btn btn-outline-primary border-0 float-right"
                                                                                    onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, @currCLId, -1, @strDescNew_MCL, 11, 1, 1)">
                                                                                <i class="fas fa-edit"></i>
                                                                            </button>
                                                                        }

                                                                        <button type="button" class="btn btn-default border-0 float-right mr-1"
                                                                                onclick="AddEditCurrDataCM_MPC(@Model.oChurchBodyId, @Model.oChurchMemberId, -1, 11, 1, true)">
                                                                            <i class="fa fa-refresh fa-secondary"></i>
                                                                        </button>
                                                                    </div>
                                                                    <div id="divTabDataMPCvd_MCL_CL" class="overlay-wrapper pt-0">
                                                                        @{ await Html.RenderPartialAsync("_vwMPCvd_MCL_CL", Model.oMemberChurchlifeAllModel.oMemberChurchlifeModel); }
                                                                    </div>
                                                                </div>

                                                                <div class="tab-pane" id="mcl-item2">
                                                                    <div id="_divMPCvd_MCL_CLAc" class="m-0 p-0">
                                                                        <div class="card-header border-bottom-0">
                                                                            @{ var strDescNew_MCLAc = '"' + strDescRaw + ": New Church Activity" + '"'; }

                                                                            @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                            {
                                                                                <button type="button" class="btn btn-outline-primary border-0 float-right"
                                                                                        onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MCLAc, 11, 2, 1)">
                                                                                    <i class="fas fa-edit"></i> @*<span> Add Rank </span>*@
                                                                                </button>
                                                                            }
                                                                            <button type="button" class="btn btn-default border-0 float-right mr-1"
                                                                                    onclick="AddEditCurrDataCM_MPC(@Model.oChurchBodyId, @Model.oChurchMemberId, -1, 11, 2, true)">
                                                                                <i class="fa fa-refresh fa-secondary"></i>
                                                                            </button>
                                                                        </div>
                                                                        <div id="divTabDataMPCvd_MCL_CL" class="overlay-wrapper pt-0">
                                                                            @{ await Html.RenderPartialAsync("_vwMPCvd_MCL_CLAc", Model.oMemberChurchlifeAllModel.oMemberChurchlifeActivityModel); }
                                                                        </div>
                                                                    </div>

                                                                    <input type="hidden" id="_hdnMemberChurchlifeActivityId" />

                                                                    <div id="_divMPCvd_MCL_CET" class="m-0 p-0" hidden>
                                                                        <div class="card-header border-bottom-0">
                                                                            <h5 class="card-title text-md m-0">
                                                                                <i class="fa fa-history fa-sm mr-1 " style="color: deepskyblue"></i>
                                                                                Activity Steps History &nbsp;
                                                                                <span class="text-black-50 text-sm" id="_strActivity_MCET"> </span>
                                                                            </h5>

                                                                            <button type="button" class="btn btn-default border-0 float-right mr-1"
                                                                                    onclick="AddEditCurrDataCM_MPC(@Model.oChurchBodyId, @Model.oChurchMemberId, -1, 11, 3, true)">
                                                                                <i class="fas fa-refresh fa-secondary"></i>
                                                                            </button>

                                                                            <button type="button" class="btn btn-default border-0 float-right mr-1"
                                                                                    onclick="AddEditCurrDataCM_MPC(@Model.oChurchBodyId, @Model.oChurchMemberId, -1, 11, 2, true)">
                                                                                <i class="fas fa-arrow-left"></i>
                                                                            </button>
                                                                        </div>
                                                                        <div id="divTabDataMPCvd_MCL_CET" class="overlay-wrapper pt-0">
                                                                            @{ await Html.RenderPartialAsync("_vwMPCvd_MCL_CET", Model.oMemberChurchlifeAllModel.oMemberChurchlifeEventTaskModel); }
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div> 
                                                        </div>
                                                    </div>
                                                    <div class="tab-pane fade" id="custom-tabs-tab12" role="tabpanel" aria-labelledby="custom-tabs-tab12-tab">
                                                        <div class="col-md-12 m-0 p-0 border-0" id="section-cmmcm">
                                                            <div class="card-header">
                                                                <ul class="nav nav-pills justify-content-end mb-1 text-xs">
                                                                    <li class="nav-item">
                                                                        <a class="nav-link active" href="#mcm-item1" data-toggle="tab">
                                                                            <i class="fas fa-user-tag text-light mr-1"></i> Member Type 
                                                                        </a>
                                                                    </li> 
                                                                    <li class="nav-item">
                                                                        <a class="nav-link" href="#mcm-item2" data-toggle="tab"> 
                                                                            <i class="fa fa-user-plus text-light mr-1" ></i> Rank (Progression)
                                                                        </a>
                                                                    </li>
                                                                    <li class="nav-item"> 
                                                                        <a class="nav-link" href="#mcm-item3" data-toggle="tab"> 
                                                                            <i class="fas fa-user-clock mr-1 text-light"></i> Availability Status 
                                                                        </a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                            <div class="tab-content">
                                                                <div class="tab-pane active " id="mcm-item1">
                                                                    <div class="card-header border-bottom-0">
                                                                        @{ var strDescNew_MT = '"' + strDescRaw + ": New Member Type" + '"'; }
                                                                        @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                        {
                                                                            <button type="button" class="btn btn-outline-primary btn-sm border-0 float-right"
                                                                                    onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MT, 12, 1, 1)">
                                                                                <i class="fas fa-edit text-dark"></i> @*<span> Add Type </span>*@
                                                                            </button>
                                                                        }
                                                                    </div>

                                                                    <div id="divTabDataMPCvd_MCM_MT" class="overlay-wrapper pt-0">
                                                                        @{ await Html.RenderPartialAsync("_vwMPCvd_MCM_MT", Model.oMemberChurchMovementModel.oMemberTypeModel); }
                                                                    </div>
                                                                </div>
                                                                <div class="tab-pane" id="mcm-item2">
                                                                    <div class="card-header border-bottom-0">
                                                                        @{ var strDescNew_MR = '"' + strDescRaw + ": New Church Rank" + '"'; }
                                                                        @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                        {
                                                                            <button type="button" class="btn btn-outline-primary btn-sm border-0 float-right"
                                                                                    onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MR, 12, 2, 1)">
                                                                                <i class="fas fa-edit text-black-50"></i> @*<span> Add Rank </span>*@
                                                                            </button>
                                                                        }
                                                                    </div>

                                                                    <div id="divTabDataMPCvd_MCM_MR" class="overlay-wrapper pt-0">
                                                                        @{ await Html.RenderPartialAsync("_vwMPCvd_MCM_MR", Model.oMemberChurchMovementModel.oMemberRankModel); }
                                                                    </div>
                                                                </div>
                                                                <div class="tab-pane" id="mcm-item3">
                                                                    <div class="card-header border-bottom-0">
                                                                        @{ var strDescNew_MS = '"' + strDescRaw + ": New Member Status" + '"'; }
                                                                        @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                        {
                                                                            <button type="button" class="btn btn-outline-primary btn-sm border-0 float-right"
                                                                                    onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MS, 12, 3, 1)">
                                                                                <i class="fas fa-edit"></i> @*<span> Add Status </span>*@
                                                                            </button>
                                                                        }
                                                                    </div>

                                                                    <div id="divTabDataMPCvd_MCM_MS" class="overlay-wrapper pt-0">
                                                                        @{ await Html.RenderPartialAsync("_vwMPCvd_MCM_MS", Model.oMemberChurchMovementModel.oMemberStatusModel); }
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="tab-pane fade" id="custom-tabs-tab13" role="tabpanel" aria-labelledby="custom-tabs-tab13-tab">
                                                        <div class=" col-md-12 m-0 p-0 border-0" id="section-cmmcg">
                                                            <div class="card-header  pl-1 pr-1  border-0" style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                                @{ var strDescNew_MCG = '"' + strDescRaw + ": New Group /Association" + '"'; }
                                                                @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                {
                                                                    <button type="button" class="btn btn-outline-primary border-0 float-right"
                                                                            onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MCG, 13, 0, 1)">
                                                                        <i class="fas fa-edit"></i> @*<span> Add Church Unit </span>*@
                                                                    </button>
                                                                }
                                                            </div>
                                                            <div class="card-body mt-1">
                                                                <div id="divTabDataMPCvd_MCG" class="overlay-wrapper pt-0">
                                                                    @{ await Html.RenderPartialAsync("_vwMPCvd_MCG", Model.oMemberGroupingModel); }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="tab-pane fade" id="custom-tabs-tab14" role="tabpanel" aria-labelledby="custom-tabs-tab14-tab">
                                                        <div class=" col-md-12 m-0 p-0 border-0" id="section-cmmcr">
                                                            <div class="card-header pl-1 pr-1  border-0" style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                                @{ var strDescNew_MCR = '"' + strDescRaw + ": New Role /Position" + '"'; }
                                                                @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                {
                                                                    <button type="button" class="btn btn-outline-primary border-0 float-right"
                                                                            onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MCR, 14, 0, 1)">
                                                                        <i class="fas fa-edit"></i> @*<span> Add Position or Role </span>*@
                                                                    </button>
                                                                }
                                                            </div>
                                                            <div class="card-body mt-1">
                                                                <div id="divTabDataMPCvd_MCR" class="overlay-wrapper pt-0">
                                                                    @{ await Html.RenderPartialAsync("_vwMPCvd_MCR", Model.oMemberRoleDesigModel); }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="tab-pane fade" id="custom-tabs-tab15" role="tabpanel" aria-labelledby="custom-tabs-tab15-tab">
                                                        <div class=" col-md-12 m-0 p-0 border-0" id="section-cmmrr">
                                                            <div class="card-header  pl-1 pr-1  border-0" style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                                @*<span class="title text-primary"> <i class="fas fa-history fa-lg text-black-50 mr-2"></i> Registrations &amp; Renewals </span>*@
                                                                @{ var strDescNew_MRR = '"' + strDescRaw + ": New Registration" + '"'; }
                                                                @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                {
                                                                    <button type="button" class="btn btn-outline-primary border-0 float-right"
                                                                            onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MRR, 15, 0, 1)">
                                                                        <i class="fas fa-edit"></i> @*<span> Add New </span>*@
                                                                    </button>
                                                                }

                                                            </div>
                                                            <div class="card-body mt-1">
                                                                <div id="divTabDataMPCvd_MRR" class="overlay-wrapper pt-0">
                                                                    @{ await Html.RenderPartialAsync("_vwMPCvd_MRR", Model.oMemberRegistrationModel); }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="tab-pane fade" id="custom-tabs-tab16" role="tabpanel" aria-labelledby="custom-tabs-tab16-tab">
                                                        <div class="card col-md-12 m-0 p-0 border-0" id="section-cmmct">
                                                            <div class="card-header  pl-1 pr-1 border-0" style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                                @*<span class="title text-primary"> <i class="fas fa-walking fa-lg text-black-50 mr-2"></i> Church Transfers </span>*@
                                                                @{ var strDescNew_MCT = '"' + strDescRaw + ": New Church Transfer" + '"'; }
                                                                @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                {
                                                                    <button type="button" class="btn btn-outline-primary border-0 float-right"
                                                                            onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MCT, 16, 0, 1)">
                                                                        <i class="fas fa-edit"></i> @*<span> Add New </span>*@
                                                                    </button>
                                                                }

                                                            </div>
                                                            <div class="card-body mt-1">
                                                                <div id="divTabDataMPCvd_MCT" class="overlay-wrapper pt-0">
                                                                    @{ await Html.RenderPartialAsync("_vwMPCvd_MCT", Model.oMemberChurchTransferModel); }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="tab-pane fade" id="custom-tabs-tab17" role="tabpanel" aria-labelledby="custom-tabs-tab17-tab">
                                                        <div class="card col-md-12 m-0 p-0 border-0" id="section-cmmca">
                                                            <div class="card-header pl-1 pr-1  border-0" style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                                @*<span class="title text-primary"> <i class="fas fa-check-double fa-lg text-black-50 mr-2"></i> Church Attendance </span>*@
                                                                @{ var strDescNew_MCA = '"' + strDescRaw + ": New Church Attendance" + '"'; }
                                                                @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                {
                                                                    <button type="button" class="btn btn-outline-primary border-0 float-right"
                                                                            onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MCA, 17, 0, 1)">
                                                                        <i class="fas fa-edit"></i> @*<span> Add New </span>*@
                                                                    </button>
                                                                }

                                                            </div>
                                                            <div class="card-body mt-1">
                                                                <div id="divTabDataMPCvd_MCA" class="overlay-wrapper pt-0">
                                                                    @{ await Html.RenderPartialAsync("_vwMPCvd_MCA", Model.oMemberChurchAttendanceModel); }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="tab-pane fade" id="custom-tabs-tab18" role="tabpanel" aria-labelledby="custom-tabs-tab18-tab">
                                                        <div class="card col-md-12 m-0 p-0 border shadow-sm" id="section-cmmtp">
                                                            <div class="card-header  pl-1 pr-1  border-0" style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                                @*<span class="title text-primary"> <i class="fas fa-coins fa-lg text-black-50 mr-2"></i> Financial Commitment </span>*@
                                                                @{ var strDescNew_MTP = '"' + strDescRaw + ": New Commitment" + '"'; }
                                                                @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                {
                                                                    <button type="button" class="btn btn-outline-primary border-0 float-right"
                                                                            onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MTP, 18, 0, 1)">
                                                                        <i class="fas fa-edit"></i> @*<span> Add New </span>*@
                                                                    </button>
                                                                }

                                                            </div>
                                                            <div class="card-body mt-1">
                                                                <div id="divTabDataMPCvd_MTP" class="overlay-wrapper pt-0">
                                                                    @{ await Html.RenderPartialAsync("_vwMPCvd_MTP", Model.oMemberChurchPaymentModel); }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- /.card -->
                                        </div>
                                    </div>

                                    <div class="tab-pane" id="item4">

                                        @*<div class="btn-group mb-2 float-right">
                            <button type="button" class="btn btn-default dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-expanded="false">
                                <span class="visually-hidden"> All Modules </span>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#section-cmmbd360"> Biodata </a></li>
                                <li><a class="dropdown-item" href="#section-cmmci360"> Contact Info </a></li>
                                <li><a class="dropdown-item" href="#section-cmmls360"> Languages Spoken </a></li>
                                <li><a class="dropdown-item" href="#section-cmmfr360"> Family Relations </a></li>
                                <li><a class="dropdown-item" href="#section-cmmcp360"> Contact Persons </a></li>
                                <li><a class="dropdown-item" href="#section-cmmed360"> Education History </a></li>
                                <li><a class="dropdown-item" href="#section-cmmpb360"> Profession &amp; Brand </a></li>
                                <li><a class="dropdown-item" href="#section-cmmwe360"> Work Experience </a></li>

                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="#section-cmmcl360"> Churchlife </a></li>
                                <li><a class="dropdown-item" href="#section-cmmcm360"> Movements &amp; Migration </a></li>
                                <li><a class="dropdown-item" href="#section-cmmcg360"> Groups &amp; Associations </a></li>
                                <li><a class="dropdown-item" href="#section-cmmcr360"> Roles &amp; Positions Held </a></li>
                                <li><a class="dropdown-item" href="#section-cmmrr360"> Membership Renewals </a></li>
                                <li><a class="dropdown-item" href="#section-cmmca360"> Church Attendance </a></li>
                                <li><a class="dropdown-item" href="#section-cmmct360"> Church Transfers </a></li>
                                <li><a class="dropdown-item" href="#section-cmmtp360"> Financial Commitments </a></li>
                            </ul>
                        </div>

                        <div class="dropdown mb-2">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                                Member Modules
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                            </ul>
                        </div>*@

                                        <div class="col-md m-0" id="_divModularView">
                                            @*@{ var strDescRaw = (Model.oMemberBioModel != null ? Model.oMemberBioModel.strMemDisplayName : "Member Profile Catalogue");
                            var strDesc = '"' + strDescRaw + '"'; }*@

                                            @if (Model.setIndex == 0 || Model.setIndex == 1)
                                            {
                                                <div class="card col-md-12 p-2 border shadow-sm" id="section-cmmbd360">
                                                    <div class="card-header pl-1 pr-1" style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                        <span class="title text-primary"> <i class="fas fa-fingerprint fa-lg text-black-50 mr-2"></i> Biodata </span>

                                                        @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                        {
                                                            <button type="button" class="btn btn-outline-primary border float-right mr-1"
                                                                    onclick="AddEditCurrDataCM_BD(@Model.oChurchBodyId, @Model.oChurchMemberId, @strDesc)">
                                                                <i class="fas fa-edit"></i> @*<span>Modify</span>*@
                                                            </button>
                                                        }

                                                        <button type="button" class="btn btn-default border float-right mr-1"
                                                                onclick="AddEditCurrDataCM_MPC(@Model.oChurchBodyId, @Model.oChurchMemberId, -1, 1, 0, true)">
                                                            <i class="fa fa-refresh fa-secondary"></i>
                                                        </button>
                                                    </div>
                                                    <div class="card-body mt-1 ">
                                                        <div id="divTabDataMPCvd_MBD1" class="overlay-wrapper">
                                                            @{ await Html.RenderPartialAsync("_vwMPCvd_MBD", Model.oMemberBioModel); }
                                                        </div>
                                                    </div>
                                                </div>
                                            }

                                            @if (Model.setIndex == 0 || Model.setIndex == 2)
                                            {
                                                <div class="card col-md-12 p-2 border shadow-sm" id="section-cmmci360">
                                                    <div class="card-header  pl-1 pr-1 " style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                        <span class="title text-primary"> <i class="fas fa-phone fa-lg text-black-50 mr-2"></i> Contact Details </span>

                                                        @{
                                                            //var currId = 0;
                                                            if (Model.oMemberContactInfoModel != null) if (Model.oMemberContactInfoModel.oMemContactInfo != null) currId = Model.oMemberContactInfoModel.oMemContactInfo.Id;
                                                            var userAction1 = Model.oMemberContactInfoModel != null ? 2 : 1;
                                                            var strDescMCINew1 = '"' + strDescRaw + ": Contact Info" + '"';
                                                        }

                                                        @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                        {
                                                            <button type="button" class="btn btn-outline-primary border float-right"
                                                                    onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescMCINew1, 2, 0, @userAction1)">
                                                                <i class="fas fa-edit"></i>
                                                            </button>
                                                        }


                                                        @*<span> Modify </span>*,
                                        </button>
                                        <button type="button" class="btn btn-default border float-right mr-1"
                                                onclick="AddEditCurrDataCM_MPC(@Model.oChurchBodyId, @Model.oChurchMemberId, -1, 2, true)">
                                            <i class="fa fa-refresh fa-secondary"></i>
                                        </button>*@

                                                    </div>
                                                    <div class="card-body mt-1">
                                                        <div id="divTabDataMPCvd_MCI1" class="overlay-wrapper">
                                                            @{ await Html.RenderPartialAsync("_vwMPCvd_MCI", Model.oMemberContactInfoModel); }
                                                        </div>
                                                    </div>
                                                </div>
                                            }

                                            @if (Model.setIndex == 0 || Model.setIndex == 3)
                                            {
                                                <div class="card col-md-12 p-2 border shadow-sm" id="section-cmmls360">
                                                    <div class="card-header  pl-1 pr-1 " style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                        <span class="title text-primary"> <i class="fas fa-microphone fa-lg text-black-50 mr-2"></i> Languages Spoken </span>
                                                        @{
                                                            var strDescMLSNew1 = '"' + strDescRaw + ": New Language" + '"';
                                                        }

                                                        @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                        {
                                                            <button type="button" class="btn btn-outline-primary border float-right"
                                                                    onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescMLSNew1, 3, 0, 1)">
                                                                <i class="fas fa-edit"></i>
                                                            </button>
                                                        }

                                                        @* <button type="button" class="btn btn-outline-primary border float-right"
                                            onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescMLSNew, 3, 0, 1)">
                                        <i class="fas fa-edit"></i> <span> Add Language </span>*@

                                                        @*<button type="button" class="btn btn-default border btn-sm float-right mr-1"
                                                onclick="AddEditCurrDataCM_MPC(@Model.oChurchBodyId, @Model.oChurchMemberId, -1, 3, true)">
                                            <i class="fa fa-refresh fa-secondary"></i>
                                        </button>*@

                                                    </div>
                                                    <div class="card-body mt-1">
                                                        <div id="divTabDataMPCvd_MLS1" class="overlay-wrapper">
                                                            @{ await Html.RenderPartialAsync("_vwMPCvd_MLS", Model.oMemberLanguageSpokenModel); }
                                                        </div>
                                                    </div>
                                                </div>
                                            }

                                            @if (Model.setIndex == 0 || Model.setIndex == 4)
                                            {
                                                <div class="card col-md-12 p-2 border shadow-sm" id="section-cmmfr360">
                                                    <div class="card-header  pl-1 pr-1 " style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                        <span class="title text-primary"> <i class="fas fa-user-friends fa-lg text-black-50 mr-2"></i> Family &amp; Relations </span>
                                                        @{
                                                            var strDescMFRNew1 = '"' + strDescRaw + ": New Relation" + '"';
                                                        }

                                                        @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                        {
                                                            <button type="button" class="btn btn-outline-primary border float-right"
                                                                    onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescMFRNew1, 4, 0, 1)">
                                                                <i class="fas fa-edit"></i> @*<span> Add Relation </span>*@
                                                            </button>
                                                        }

                                                    </div>
                                                    <div class="card-body mt-1">
                                                        <div id="divTabDataMPCvd_MFR1" class="overlay-wrapper">
                                                            @{ await Html.RenderPartialAsync("_vwMPCvd_MFR", Model.oMemberRelationModel); }
                                                        </div>
                                                    </div>
                                                </div>
                                            }

                                            @if (Model.setIndex == 0 || Model.setIndex == 5)
                                            {
                                                <div class="card col-md-12 p-2 border shadow-sm" id="section-cmmcp360">
                                                    <div class="card-header  pl-1 pr-1 " style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                        <span class="title text-primary"> <i class="fas fa-user-tag fa-lg text-black-50 mr-2"></i> Contact Persons </span>
                                                        @{
                                                            var strDescMCPNew1 = '"' + strDescRaw + ": New Contact" + '"';
                                                        }

                                                        @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                        {
                                                            <button type="button" class="btn btn-outline-primary border float-right"
                                                                    onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescMCPNew1, 5, 0, 1)">
                                                                <i class="fas fa-edit"></i> @*<span> Add Contact </span>*@
                                                            </button>
                                                        }

                                                    </div>
                                                    <div class="card-body mt-1">
                                                        <div id="divTabDataMPCvd_MCP1" class="overlay-wrapper">
                                                            @{ await Html.RenderPartialAsync("_vwMPCvd_MCP", Model.oMemberContactModel); }
                                                        </div>
                                                    </div>
                                                </div>
                                            }

                                            @if (Model.setIndex == 0 || Model.setIndex == 6)
                                            {
                                                <div class="card col-md-12 p-2 border shadow-sm" id="section-cmmed360">
                                                    <div class="card-header  pl-1 pr-1 " style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                        <span class="title text-primary"> <i class="fas fa-graduation-cap fa-lg text-black-50 mr-2"></i> Education History </span>
                                                        @{
                                                            var strDescMEDNew1 = '"' + strDescRaw + ": New Education Info" + '"';
                                                        }
                                                        @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                        {
                                                            <button type="button" class="btn btn-outline-primary border float-right"
                                                                    onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescMEDNew1, 6, 0, 1)">
                                                                <i class="fas fa-edit"></i> @*<span> Add Education </span>*@
                                                            </button>
                                                        }

                                                    </div>
                                                    <div class="card-body mt-1">
                                                        <div id="divTabDataMPCvd_MED1" class="overlay-wrapper">
                                                            @{ await Html.RenderPartialAsync("_vwMPCvd_MED", Model.oMemberEducationModel); }
                                                        </div>
                                                    </div>
                                                </div>
                                            }

                                            @if (Model.setIndex == 0 || Model.setIndex == 7)
                                            {
                                                <div class="card col-md-12 p-2 border shadow-sm" id="section-cmmpb360">
                                                    <div class="card-header  pl-1 pr-1 " style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                        <span class="title text-primary"> <i class="fas fa-user-tie fa-lg text-black-50 mr-2"></i> Profession &amp; Brand </span>
                                                        @{
                                                            var strDescMPBNew1 = '"' + strDescRaw + ": New Profession /Brand" + '"';
                                                        }
                                                        @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                        {
                                                            <button type="button" class="btn btn-outline-primary border float-right"
                                                                    onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescMPBNew1, 7, 0, 1)">
                                                                <i class="fas fa-edit"></i> @*<span> Add Profession </span>*@
                                                            </button>
                                                        }

                                                    </div>
                                                    <div class="card-body mt-1">
                                                        <div id="divTabDataMPCvd_MPB1" class="overlay-wrapper">
                                                            @{ await Html.RenderPartialAsync("_vwMPCvd_MPB", Model.oMemberProfessionBrandModel); }
                                                        </div>
                                                    </div>
                                                </div>
                                            }

                                            @if (Model.setIndex == 0 || Model.setIndex == 8)
                                            {
                                                <div class="card col-md-12 p-2 border shadow-sm" id="section-cmmwe360">
                                                    <div class="card-header  pl-1 pr-1 " style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                        <span class="title text-primary"> <i class="fas fa-user-clock fa-lg text-black-50 mr-2"></i> Work Experience </span>
                                                        @{
                                                            var strDescMWENew1 = '"' + strDescRaw + ": New Job (Work Experience)" + '"';
                                                        }
                                                        @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                        {
                                                            <button type="button" class="btn btn-outline-primary border float-right"
                                                                    onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescMWENew1, 8, 0, 1)">
                                                                <i class="fas fa-edit"></i> @*<span> Add Job </span>*@
                                                            </button>
                                                        }

                                                    </div>
                                                    <div class="card-body mt-1">
                                                        <div id="divTabDataMPCvd_MWE1" class="overlay-wrapper">
                                                            @{ await Html.RenderPartialAsync("_vwMPCvd_MWE", Model.oMemberWorkExperienceModel); }
                                                        </div>
                                                    </div>
                                                </div>
                                            }


                                            @if (Model.setIndex == 0 || Model.setIndex == 11)
                                            {
                                                <div class="card col-md-12 p-2 border shadow-sm" id="section-cmmcl360">
                                                    <div class="card-header  pl-1 pr-1 " style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                        <span class="title text-primary"> <i class="fas fa-church fa-lg text-black-50 mr-2"></i> Churchlife &amp; Events </span>

                                                        <button type="button" class="btn btn-default border float-right mr-1"
                                                                onclick="AddEditCurrDataCM_MPC(@Model.oChurchBodyId, @Model.oChurchMemberId, -1, 11, 0, true)">
                                                            <i class="fa fa-refresh fa-secondary"></i>
                                                        </button>
                                                    </div>
                                                    <div class="card-body mt-1" id="divTabDataMPCvd_MCL1">
                                                        <ul class="nav nav-tabs p-0 " id="cl-tab" role="tablist">
                                                            <li class="nav-item">
                                                                <a class="nav-link active" id="mcl-item1-tab" data-toggle="pill" href="#mcl-item1" role="tab" aria-controls="mcl-item1" aria-selected="true">
                                                                    <i class="fas fa-place-of-worship fa-sm mr-1" style="color: purple"></i>
                                                                    <span class="text-md"> Core Churchlife </span>
                                                                </a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link" id="mcl-item2-tab" data-toggle="pill" href="#mcl-item2" role="tab" aria-controls="mcl-item2" aria-selected="false">
                                                                    <i class="fa fa-calendar-alt fa-sm mr-1" style="color: tomato"></i>
                                                                    <span class="text-md" style="color: #000"> Landmark Activities </span>
                                                                </a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link" id="mcl-item3-tab" data-toggle="pill" href="#mcl-item3" role="tab" aria-controls="mcl-item3" aria-selected="false">
                                                                    <i class="fa fa-history fa-sm mr-1 " style="color: deepskyblue"></i>
                                                                    <span class="text-md" style="color: #000"> Activity Steps History </span>
                                                                </a>
                                                            </li>
                                                        </ul>

                                                        <div class="tab-content" id="cl-rg-tabContent">
                                                            <div id="mcl-item1" class="tab-pane fade show active" role="tabpanel" aria-labelledby="mcl-item1-tab">
                                                                <div class="card-header border-bottom-0">
                                                                    @{ var strDescNew_MCL1 = '"' + strDescRaw + ": New Core Churchlife" + '"'; }
                                                                    @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                    {
                                                                        <button type="button" class="btn btn-outline-primary border-0 float-right"
                                                                                onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MCL1, 11, 1, 1)">
                                                                            <i class="fas fa-edit"></i>
                                                                        </button>
                                                                    }
                                                                </div>

                                                                <div id="divTabDataMPCvd_MCL_CL1" class="overlay-wrapper">
                                                                    @{ await Html.RenderPartialAsync("_vwMPCvd_MCL_CL", Model.oMemberChurchlifeAllModel.oMemberChurchlifeModel); }
                                                                </div>
                                                            </div>

                                                            <div id="mcl-item2" class="tab-pane fade" role="tabpanel" aria-labelledby="mcl-item2-tab">
                                                                <div class="card-header border-bottom-0">
                                                                    @{ var strDescNew_MCLAc1 = '"' + strDescRaw + ": New Church Activity" + '"'; }
                                                                    @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                    {
                                                                        <button type="button" class="btn btn-outline-primary border-0 float-right"
                                                                                onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MCLAc1, 11, 2, 1)">
                                                                            <i class="fas fa-edit"></i> @*<span> Add Rank </span>*@
                                                                        </button>
                                                                    }
                                                                </div>

                                                                <div id="divTabDataMPCvd_MCM_CLAc1" class="overlay-wrapper">
                                                                    @{ await Html.RenderPartialAsync("_vwMPCvd_MCL_CLAc", Model.oMemberChurchlifeAllModel.oMemberChurchlifeActivityModel); }
                                                                </div>
                                                            </div>

                                                            <div id="mcl-item3" class="tab-pane fade" role="tabpanel" aria-labelledby="mcl-item3-tab">
                                                                <div class="card-header border-bottom-0">
                                                                    @{ var strDescNew_MCET1 = '"' + strDescRaw + ": New Activity Task" + '"'; }
                                                                    @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                    {
                                                                        <button type="button" class="btn btn-outline-primary border-0 float-right"
                                                                                onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MCET1, 11, 3, 1)">
                                                                            <i class="fas fa-edit"></i> @*<span> Add Status </span>*@
                                                                        </button>
                                                                    }
                                                                </div>

                                                                <div id="divTabDataMPCvd_MCL_CET1" class="overlay-wrapper">
                                                                    @{ await Html.RenderPartialAsync("_vwMPCvd_MCL_CET", Model.oMemberChurchlifeAllModel.oMemberChurchlifeEventTaskModel); }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }

                                            @if (Model.setIndex == 0 || Model.setIndex == 12)
                                            {
                                                <div class="card col-md-12 p-2 border shadow-sm" id="section-cmmcm360">
                                                    <div class="card-header  pl-1 pr-1 " style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                        <span class="title text-primary"> <i class="fas fa-location-arrow fa-lg text-black-50 mr-2"></i> Movements &amp; Migration </span>
                                                        <button type="button" class="btn btn-default border float-right mr-1"
                                                                onclick="AddEditCurrDataCM_MPC(@Model.oChurchBodyId, @Model.oChurchMemberId, -1, 12, 0, true)">
                                                            <i class="fa fa-refresh fa-secondary"></i>
                                                        </button>
                                                    </div>

                                                    @*<div class="card-body mt-1">
                                        <div id="divTabDataMPCvd_MCM" class="overlay-wrapper">
                                            @{ await Html.RenderPartialAsync("_vwMPCvd_MCM", Model.oMemberChurchMovementModel); }
                                        </div>
                                    </div>*@
                                                    <div class="card-body mt-1" id="divTabDataMPCvd_MCM1">
                                                        <ul class="nav nav-tabs " id="cl-tab" role="tablist">
                                                            <li class="nav-item">
                                                                <a class="nav-link active" id="mcm-item1-tab" data-toggle="pill" href="#mcm-item1" role="tab" aria-controls="mcm-item1" aria-selected="true">
                                                                    <i class="fas fa-user-tag mr-1 text-dark"></i>
                                                                    <span class="text-md "> Member Type </span>
                                                                </a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link" id="mcm-item2-tab" data-toggle="pill" href="#mcm-item2" role="tab" aria-controls="mcm-item2" aria-selected="false">
                                                                    <i class="fa fa-user-plus mr-1" style="color: maroon"></i>
                                                                    <span class="text-md "> Member Rank (Hierarchy) </span>
                                                                </a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link" id="mcm-item3-tab" data-toggle="pill" href="#mcm-item3" role="tab" aria-controls="mcm-item3" aria-selected="false">
                                                                    <i class="fas fa-user-clock mr-1 text-green"></i>
                                                                    <span class="text-md "> Member Status (Availability) </span>
                                                                </a>
                                                            </li>
                                                        </ul>
                                                        <div class="tab-content" id="cl-rg-tabContent">
                                                            <div id="mcm-item1" class="tab-pane fade show active p-1" role="tabpanel" aria-labelledby="mcm-item1-tab">
                                                                <div class="card-header border-bottom-0">
                                                                    @{ var strDescNew_MT1 = '"' + strDescRaw + ": New Member Type" + '"'; }
                                                                    @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                    {
                                                                        <button type="button" class="btn btn-outline-primary btn-sm border-0 float-right"
                                                                                onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MT1, 12, 1, 1)">
                                                                            <i class="fas fa-edit text-black-50"></i> @*<span> Add Type </span>*@
                                                                        </button>
                                                                    }
                                                                </div>

                                                                <div id="divTabDataMPCvd_MCM_MT1" class="overlay-wrapper">
                                                                    @{ await Html.RenderPartialAsync("_vwMPCvd_MCM_MT", Model.oMemberChurchMovementModel.oMemberTypeModel); }
                                                                </div>
                                                            </div>
                                                            <div id="mcm-item2" class="tab-pane fade p-2" role="tabpanel" aria-labelledby="mcm-item2-tab">
                                                                <div class="card-header border-bottom-0">
                                                                    @{ var strDescNew_MR1 = '"' + strDescRaw + ": New Church Rank" + '"'; }
                                                                    @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                    {
                                                                        <button type="button" class="btn btn-outline-primary btn-sm border-0 float-right"
                                                                                onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MR1, 12, 2, 1)">
                                                                            <i class="fas fa-edit text-dark"></i> @*<span> Add Rank </span>*@
                                                                        </button>
                                                                    }
                                                                </div>

                                                                <div id="divTabDataMPCvd_MCM_MR1" class="overlay-wrapper">
                                                                    @{ await Html.RenderPartialAsync("_vwMPCvd_MCM_MR", Model.oMemberChurchMovementModel.oMemberRankModel); }
                                                                </div>
                                                            </div>
                                                            <div id="mcm-item3" class="tab-pane fade p-2" role="tabpanel" aria-labelledby="mcm-item3-tab">
                                                                <div class="card-header border-bottom-0">
                                                                    @{ var strDescNew_MS1 = '"' + strDescRaw + ": New Member Status" + '"'; }
                                                                    @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                                    {
                                                                        <button type="button" class="btn btn-outline-primary btn-sm border-0 float-right"
                                                                                onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MS1, 12, 3, 1)">
                                                                            <i class="fas fa-edit text-green"></i> @*<span> Add Status </span>*@
                                                                        </button>
                                                                    }
                                                                </div>

                                                                <div id="divTabDataMPCvd_MCM_MS1" class="overlay-wrapper">
                                                                    @{ await Html.RenderPartialAsync("_vwMPCvd_MCM_MS", Model.oMemberChurchMovementModel.oMemberStatusModel); }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }

                                            @if (Model.setIndex == 0 || Model.setIndex == 13)
                                            {
                                                <div class="card col-md-12 p-2 border shadow-sm" id="section-cmmcg360">
                                                    <div class="card-header  pl-1 pr-1 " style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                        <span class="title text-primary"> <i class="fas fa-users fa-lg text-black-50 mr-2"></i> Groups &amp; Associations </span>
                                                        @{ var strDescNew_MCG1 = '"' + strDescRaw + ": New Group /Association" + '"'; }
                                                        @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                        {
                                                            <button type="button" class="btn btn-outline-primary border float-right"
                                                                    onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MCG1, 13, 0, 1)">
                                                                <i class="fas fa-edit"></i> @*<span> Add Church Unit </span>*@
                                                            </button>
                                                        }

                                                    </div>
                                                    <div class="card-body mt-1">
                                                        <div id="divTabDataMPCvd_MCG1" class="overlay-wrapper">
                                                            @{ await Html.RenderPartialAsync("_vwMPCvd_MCG", Model.oMemberGroupingModel); }
                                                        </div>
                                                    </div>
                                                </div>
                                            }

                                            @if (Model.setIndex == 0 || Model.setIndex == 14)
                                            {
                                                <div class="card col-md-12 p-2 border shadow-sm" id="section-cmmcr360">
                                                    <div class="card-header  pl-1 pr-1 " style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                        <span class="title text-primary"> <i class="fas fa-user-tie fa-lg text-black-50 mr-2"></i> Roles &amp; Designations </span>
                                                        @{ var strDescNew_MCR1 = '"' + strDescRaw + ": New Role /Position" + '"'; }
                                                        @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                        {
                                                            <button type="button" class="btn btn-outline-primary border float-right"
                                                                    onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MCR1, 14, 0, 1)">
                                                                <i class="fas fa-edit"></i> @*<span> Add Position or Role </span>*@
                                                            </button>
                                                        }

                                                    </div>
                                                    <div class="card-body mt-1">
                                                        <div id="divTabDataMPCvd_MCR1" class="overlay-wrapper">
                                                            @{ await Html.RenderPartialAsync("_vwMPCvd_MCR", Model.oMemberRoleDesigModel); }
                                                        </div>
                                                    </div>
                                                </div>
                                            }

                                            @if (Model.setIndex == 0 || Model.setIndex == 15)
                                            {
                                                <div class="card col-md-12 p-2 border shadow-sm" id="section-cmmrr360">
                                                    <div class="card-header  pl-1 pr-1 " style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                        <span class="title text-primary"> <i class="fas fa-history fa-lg text-black-50 mr-2"></i> Registrations &amp; Renewals </span>
                                                        @{ var strDescNew_MRR1 = '"' + strDescRaw + ": New Registration" + '"'; }
                                                        @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                        {
                                                            <button type="button" class="btn btn-outline-primary border float-right"
                                                                    onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MRR1, 15, 0, 1)">
                                                                <i class="fas fa-edit"></i> @*<span> Add New </span>*@
                                                            </button>
                                                        }

                                                    </div>
                                                    <div class="card-body mt-1">
                                                        <div id="divTabDataMPCvd_MRR1" class="overlay-wrapper">
                                                            @{ await Html.RenderPartialAsync("_vwMPCvd_MRR", Model.oMemberRegistrationModel); }
                                                        </div>
                                                    </div>
                                                </div>
                                            }

                                            @if (Model.setIndex == 0 || Model.setIndex == 16)
                                            {
                                                <div class="card col-md-12 p-2 border shadow-sm" id="section-cmmct360">
                                                    <div class="card-header  pl-1 pr-1 " style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                        <span class="title text-primary"> <i class="fas fa-walking fa-lg text-black-50 mr-2"></i> Church Transfers </span>
                                                        @{ var strDescNew_MCT1 = '"' + strDescRaw + ": New Church Transfer" + '"'; }
                                                        @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                        {
                                                            <button type="button" class="btn btn-outline-primary border float-right"
                                                                    onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MCT1, 16, 0, 1)">
                                                                <i class="fas fa-edit"></i> @*<span> Add New </span>*@
                                                            </button>
                                                        }

                                                    </div>
                                                    <div class="card-body mt-1">
                                                        <div id="divTabDataMPCvd_MCT1" class="overlay-wrapper">
                                                            @{ await Html.RenderPartialAsync("_vwMPCvd_MCT", Model.oMemberChurchTransferModel); }
                                                        </div>
                                                    </div>
                                                </div>
                                            }

                                            @if (Model.setIndex == 0 || Model.setIndex == 17)
                                            {
                                                <div class="card col-md-12 p-2 border shadow-sm" id="section-cmmca360">
                                                    <div class="card-header  pl-1 pr-1 " style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                        <span class="title text-primary"> <i class="fas fa-check-double fa-lg text-black-50 mr-2"></i> Church Attendance </span>
                                                        @{ var strDescNew_MCA1 = '"' + strDescRaw + ": New Church Attendance" + '"'; }
                                                        @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                        {
                                                            <button type="button" class="btn btn-outline-primary border float-right"
                                                                    onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MCA1, 17, 0, 1)">
                                                                <i class="fas fa-edit"></i> @*<span> Add New </span>*@
                                                            </button>
                                                        }

                                                    </div>
                                                    <div class="card-body mt-1">
                                                        <div id="divTabDataMPCvd_MCA1" class="overlay-wrapper">
                                                            @{ await Html.RenderPartialAsync("_vwMPCvd_MCA", Model.oMemberChurchAttendanceModel); }
                                                        </div>
                                                    </div>
                                                </div>
                                            }

                                            @if (Model.setIndex == 0 || Model.setIndex == 18)
                                            {
                                                <div class="card col-md-12 p-2 border shadow-sm" id="section-cmmtp360">
                                                    <div class="card-header  pl-1 pr-1 " style="width:100%; border-bottom: 2px solid #b7b5b5;">
                                                        <span class="title text-primary"> <i class="fas fa-coins fa-lg text-black-50 mr-2"></i> Financial Commitment </span>
                                                        @{ var strDescNew_MTP1 = '"' + strDescRaw + ": New Commitment" + '"'; }
                                                        @if (Model.oChurchBodyId == Model.oChurchBodyId_Logged)
                                                        {
                                                            <button type="button" class="btn btn-outline-primary border float-right"
                                                                    onclick="AddEditCurrDataCM_moMPC(@Model.oChurchBodyId, @Model.oChurchMemberId, 0, -1, @strDescNew_MTP1, 18, 0, 1)">
                                                                <i class="fas fa-edit"></i> @*<span> Add New </span>*@
                                                            </button>
                                                        }

                                                    </div>
                                                    <div class="card-body mt-1">
                                                        <div id="divTabDataMPCvd_MTP1" class="overlay-wrapper">
                                                            @{ await Html.RenderPartialAsync("_vwMPCvd_MTP", Model.oMemberChurchPaymentModel); }
                                                        </div>
                                                    </div>
                                                </div>
                                            }

                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="modal fade" id="divPopModal_AddEdit" tabindex="-1" role="dialog" aria-labelledby="_modalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable " role="document" style="max-height: 75%; height: 60%;">
                <div class="modal-content">
                    <div class="modal-header" style="background-color: deepskyblue; color: #fff">
                        <h5 class="modal-title"> Editing: </h5>
                        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div id="divModalBody_AddEdit" class="modal-body bg-light" style="font-family:Verdana, Geneva, Tahoma, sans-serif; font-size: 10pt">
                    </div>
                    <div class="modal-footer " style="background-color: lightgrey; left:auto; right: auto">
                        <a role="button" class="btn btn-outline-light " data-dismiss="modal"> <span class="text-sm "> Cancel </span> </a>

                        <button id="btnSaveChanges" type="submit" class="btn btn-outline-dark border-0 shadow-sm float-right" style="background-color: lightskyblue">
                            <i class="fas fa-database mr-1"></i> <span class="text-bold"> Save changes </span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="divPopModal_AddEdit_mltp" tabindex="-1" role="dialog" aria-labelledby="_modalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable " role="document" style="max-height: 60%;">
                <div class="modal-content">
                    <div class="modal-header" style="background-color:deepskyblue;  color: #000">
                        <h5 class="modal-title"> Editing: </h5>
                        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div id="divModalBody_AddEdit_mltp" class="modal-body bg-light" style="font-family:Verdana, Geneva, Tahoma, sans-serif; font-size: 10pt">
                    </div>
                    <div class="modal-footer " style="background-color: lightgrey; left:auto; right: auto">
                        <a role="button" class="btn btn-outline-light " data-dismiss="modal"> <span class="text-sm "> Cancel </span> </a>

                        <button id="btnSaveChanges_mltp" type="submit" class="btn btn-outline-light shadow-sm float-right">
                            @*style="background-color: lightgray; "*@
                            <i class="fas fa-database text-black-50 mr-1"></i> <span class="text-bold text-dark"> Save changes </span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="divPopModal_ImpCB" tabindex="-1" role="dialog" aria-labelledby="_modalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document" style="max-height: 50%">
                <div class="modal-content">
                    <div class="modal-header bg-orange text-light">
                        <h6 class="modal-title text-lg"></h6>
                        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div id="divModalBody_ImpCB" class="modal-body bg-light" style="font-family:Verdana, Geneva, Tahoma, sans-serif; font-size: 10pt">
                    </div>
                    <div class="modal-footer " style="background-color: lightgrey; left:auto; right: auto">
                        <a role="button" class="btn btn-outline-light" data-dismiss="modal">
                            <i class="fas fa-times fa-lg text-secondary"></i> @*   mr-1 Cancel*@
                        </a>
                        <button id="btnOK_ImpCB" type="submit" class="btn btn-outline-light bg-light float-right ">
                            <i class="fas fa-check-double text-success mr-1"></i> OK
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </div>
</body>

}




@section Scripts {

    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}




    @*<script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.2/modernizr.js"></script>*@

    @*<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js'></script>*@
    @*<script type='text/javascript' src='loadImg.js'></script>

        <script type='text/javascript'>
            $(function () {
                $('img').imgPreload()
            })
        </script>*@


    <script>
        //// Wait for window load
        //$(window).load(function () {
        //    // Animate loader off screen
        //    $(".se-pre-con").fadeOut("slow");
        //});

        $(document).ready(function () {
            // Animate loader off screen
            $(".se-pre-con").fadeOut("slow");
        });
    </script>


    <script>

        $(function () {
            $('[data-toggle="popover"]').popover()
        })

        $(document).ready(function () {

            let anchorlinks = document.querySelectorAll('a[href^="#section"]')

            for (let item of anchorlinks) { // relitere
                item.addEventListener('click', (e) => {
                    let hashval = item.getAttribute('href')
                    let target = document.querySelector(hashval)
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    })
                    history.pushState(null, null, hashval)
                    e.preventDefault()
                })
            }

        });





        $(document).ready(function () {

            $('#smartwizard').smartWizard({
                selected: 0,
                theme: 'dots',
                autoAdjustHeight: true,
                transitionEffect: 'fade',
                showStepURLhash: false,

            });
        });

        var DisplaySuccessInfo = function (msg, reload = false) {

            $.alert({
                title: 'Done!',
                type: 'green',
                typeAnimated: true,
                content: msg,
                closeIcon: true,
                closeIconClass: 'fa fa-close'
            });

        };

        var DisplayErrorInfo = function (msg, reload = false) {

            $.alert({
                title: 'Oops!',
                type: 'red',
                typeAnimated: true,
                content: msg,
                closeIcon: true,
                closeIconClass: 'fa fa-close'
            });

        };


        var DisplaySuccessInfo_Reload_CM = function (msg, reload = false, resetNew = false, _setIndex = 6, _subSetIndex = 1, _currCMCode = '') {   //currSubSetIndex,  proScope, subScope,

            // alert('success.. reload: ' + reload);

            $.alert({
                title: 'Done!',
                type: 'green',
                icon: 'success',
                content: '<span style="color:#000"> ' + msg + '</span> ',
                html: true,
                background: 'green',
                typeAnimated: true,
                // closeIcon: false,
                closeIconClass: 'fa fa-close',
                buttons: {
                    ok: function () {
                        if (reload) {
                            ReloadCurrPage_CM(_setIndex, _subSetIndex, _currCMCode);
                        }

                        //if (resetNew == true) {
                        //    AddEditCurrData_CM(0, '', valCMCode,'', 1); //(0, currDenomId, currChuBodyId, currSetIndex, currSubSetIndex, _desc);
                        //}
                        //else {
                        //    $("#divPopModal_AddEdit .close").click();
                        //}
                    }
                }
            });

            //if (reload) {
            //    ReloadCurrPage();   //, currSubSetIndex , proScope, subScope
            //}
        };

        var DisplayErrorInfo_Reload_CM = function (msg, reload = false, _setIndex = 6, _subSetIndex = 1, _currCMCode = '') {
            //  alert('fail.. reload: ' + reload);

            $.alert({
                title: 'Oops!',
                type: 'red',
                //icon: 'fail',
                content: '<span style="color:#000"> ' + msg + '</span>',
                html: true,
                background: 'red',
                typeAnimated: true,
                //closeIcon: true,
                closeIconClass: 'fa fa-close',
                buttons: {
                    ok: function () {
                        if (reload) {
                            ReloadCurrPage_CM(_setIndex, _subSetIndex, _currCMCode);
                        }
                    }
                }
            });

        };


        function BtnLoading(elem, loadStr) {
            $(elem).attr("data-original-text", $(elem).html());
            $(elem).prop("disabled", true);
            $(elem).html('<i class="spinner-border spinner-border-sm mr-1"></i>' + loadStr);   /// Loading...
        }

        function BtnReset(elem) {
            $(elem).prop("disabled", false);
            $(elem).html($(elem).attr("data-original-text"));
        }


    </script>


    <!-- CM_BD  no ADD, no DEL, only EDIT -->
    <script>
        //LoadTableCM_BD();

        var AddEditCurrDataCM_MPC = function (currCBId, currCMId, currParid, s_ndx, sb_ndx, loadSubMdlOnly = true, _strParDesc = '') { // , _strItemName
            // alert('add OR edit...');

            // var currAGOId_Logged = $("#_oAppGloOwnId_Logged").data("value");

            // by pass ... use param passed else // reload the current details...
            if (!loadSubMdlOnly && s_ndx != 0) {
                currCBId = $("#_oChurchBodyId").data("value");
                currCMId = $("#_oChurchMemberId").data("value");
                s_ndx = $("#_oSetIndex").data("value");
            }

            //if (currCBId == null) {
            //    currCBId = $("#_oChurchBodyId_Logged").data("value");
            //}

            if (currCBId < 0) currCBId = null;
            if (currCMId < 0) currCMId = null;
            if (currParid < 0) currParid = null;
            if (s_ndx < 0) s_ndx = 0;
            if (sb_ndx < 0) sb_ndx = 0;


            if (s_ndx == 11 && sb_ndx != 1) {

                if (sb_ndx == 3) {
                    if (currParid != null) $("#_hdnMemberChurchlifeActivityId").val(currParid);
                    else if (currParid == null) currParid = $("#_hdnMemberChurchlifeActivityId").val();   
                } 

                $('#_divMPCvd_MCL_CLAc').prop('hidden', sb_ndx == 3); 
                $('#_divMPCvd_MCL_CET').prop('hidden', sb_ndx != 3); 
                document.getElementById('_strActivity_MCET').innerHTML = _strParDesc;
            }

            

         @*//  public IActionResult AddModCM_vwMPC(int? oCBid = null, int? oCMid = null, int? oParid = null, int s_ndx = 0, int sb_ndx = 0, int vw = 0)
         //   var url = "@Url.Action("AddModCM_vwMPC", "ChurchMembers")?oCMid=" + currCMId + "&oCBid=" + currCBId + "&s_ndx=" + s_ndx; // + "&vw=" + 0;     // + "&strCodeCriteria_2=" + null + "&oUserId=" + currUserId_Logged ;*@

            var url = "@Url.Action("AddModCM_vwMPC", "ChurchMembers")?oCBid=" + currCBId + "&oCMid=" + currCMId + // "&currId=" + currMdl_Id +
                                                                        "&oParid=" + currParid + "&s_ndx=" + s_ndx + "&sb_ndx=" + sb_ndx; // + "&sb_ndx=0" + "&vw=0";


          // alert(url)  // if (currCMId > 0) { document.querySelector('#btnSaveChangesCM_BD').innerHTML = 'Update'; }

            // document.querySelector('#btnSaveChanges').innerHTML = '<i class="fas fa-database text-bold mr-1"></i> Update';
            // $('#btnSaveChangesCM_BD').html('Update');


            //if (currCMId > 0)
            //    { document.querySelector('#btnSaveChanges').innerHTML = '<i class="fas fa-database text-bold mr-1"></i> Update';}
           // alert();

            if (s_ndx > 0) {
               // $('#divTabDataMPCvd').load(url, function () {

                 //   alert('load data...')
                switch (parseInt(s_ndx)) {
                    /// PER INFO models
                    case 1:
                        $('#divTabDataMPCvd_MBD').load(url, function () {
                            //if ($.fn.dataTable.isDataTable('#tabDataCM_BD')) {
                            //    $('#tabDataCM_BD').DataTable();
                            //}
                            //else {
                            //    $('#tabDataCM_BD').DataTable({
                            //        "responsive": true,
                            //        "autoWidth": false,
                            //        //"paging": true,
                            //        //"lengthChange": false,
                            //        "searching": true,
                            //        //  "orderable": true,
                            //        //"info": true,
                            //        "order": [],
                            //        "columnDefs": [{
                            //            "targets": [0, 6],
                            //            "orderable": false,
                            //        }]
                            //    });
                            //}
                        });

                        break;

                    case 2:
                        $('#divTabDataMPCvd_MCI').load(url, function () {
                            //if ($.fn.dataTable.isDataTable('#tabDataCM_BD')) {
                            //    $('#tabDataCM_BD').DataTable();
                            //}
                            //else {
                            //    $('#tabDataCM_BD').DataTable({
                            //        "responsive": true,
                            //        "autoWidth": false,
                            //        //"paging": true,
                            //        //"lengthChange": false,
                            //        "searching": true,
                            //        //  "orderable": true,
                            //        //"info": true,
                            //        "order": [],
                            //        "columnDefs": [{
                            //            "targets": [0, 6],
                            //            "orderable": false,
                            //        }]
                            //    });
                            //}
                        });

                        break;

                    case 3:
                        $('#divTabDataMPCvd_MLS').load(url, function () {
                            if ($.fn.dataTable.isDataTable('#tabDataCM_MLS')) {
                                $('#tabDataCM_MLS').DataTable();
                            }
                            else {
                                $('#tabDataCM_MLS').DataTable({
                                    "responsive": true,
                                    "autoWidth": false,
                                    //"paging": true,
                                    //"lengthChange": false,
                                    "searching": true,
                                    //  "orderable": true,
                                    //"info": true,
                                    "order": [],
                                    "columnDefs": [{
                                        "targets": [0, 3],
                                        "orderable": false,
                                    }]
                                });
                            }
                        });

                        break;

                    case 4:
                        $('#divTabDataMPCvd_MFR').load(url, function () {
                            if ($.fn.dataTable.isDataTable('#tabDataCM_MFR')) {
                                $('#tabDataCM_MFR').DataTable();
                            }
                            else {
                                $('#tabDataCM_MFR').DataTable({
                                    "responsive": true,
                                    "autoWidth": false,
                                    //"paging": true,
                                    //"lengthChange": false,
                                    "searching": true,
                                    //  "orderable": true,
                                    //"info": true,
                                    "order": [],
                                    "columnDefs": [{
                                        "targets": [0, 5],
                                        "orderable": false,
                                    }]
                                });
                            }
                        });

                        break;

                    case 5:
                        $('#divTabDataMPCvd_MCP').load(url, function () {
                            if ($.fn.dataTable.isDataTable('#tabDataCM_MCP')) {
                                $('#tabDataCM_MCP').DataTable();
                            }
                            else {
                                $('#tabDataCM_MCP').DataTable({
                                    "responsive": true,
                                    "autoWidth": false,
                                    //"paging": true,
                                    //"lengthChange": false,
                                    "searching": true,
                                    //  "orderable": true,
                                    //"info": true,
                                    "order": [],
                                    "columnDefs": [{
                                        "targets": [0, 5],
                                        "orderable": false,
                                    }]
                                });
                            }
                        });

                        break;

                    case 6:
                        $('#divTabDataMPCvd_MED').load(url, function () {
                            if ($.fn.dataTable.isDataTable('#tabDataCM_MED')) {
                                $('#tabDataCM_MED').DataTable();
                            }
                            else {
                                $('#tabDataCM_MED').DataTable({
                                    "responsive": true,
                                    "autoWidth": false,
                                    //"paging": true,
                                    //"lengthChange": false,
                                    "searching": true,
                                    //  "orderable": true,
                                    //"info": true,
                                    "order": [],
                                    "columnDefs": [{
                                        "targets": [0, 5],
                                        "orderable": false,
                                    }]
                                });
                            }
                        });

                        break;

                    case 7:
                        $('#divTabDataMPCvd_MPB').load(url, function () {
                            if ($.fn.dataTable.isDataTable('#tabDataCM_MPB')) {
                                $('#tabDataCM_MPB').DataTable();
                            }
                            else {
                                $('#tabDataCM_MPB').DataTable({
                                    "responsive": true,
                                    "autoWidth": false,
                                    //"paging": true,
                                    //"lengthChange": false,
                                    "searching": true,
                                    //  "orderable": true,
                                    //"info": true,
                                    "order": [],
                                    "columnDefs": [{
                                        "targets": [0, 2],
                                        "orderable": false,
                                    }]
                                });
                            }
                        });

                        break;

                    case 8:
                        $('#divTabDataMPCvd_MWE').load(url, function () {
                            if ($.fn.dataTable.isDataTable('#tabDataCM_MWE')) {
                                $('#tabDataCM_MWE').DataTable();
                            }
                            else {
                                $('#tabDataCM_MWE').DataTable({
                                    "responsive": true,
                                    "autoWidth": false,
                                    //"paging": true,
                                    //"lengthChange": false,
                                    "searching": true,
                                    //  "orderable": true,
                                    //"info": true,
                                    "order": [],
                                    "columnDefs": [{
                                        "targets": [0, 3],
                                        "orderable": false,
                                    }]
                                });
                            }
                        });

                        break;

                    /// cl models
                    ///
                    case 11:
                        switch (sb_ndx) {
                            case 1:
                                $('#divTabDataMPCvd_MCL_CL').load(url, function () {

                                    //if ($.fn.dataTable.isDataTable('#tabDataCM_MCL')) {
                                    //    $('#tabDataCM_MCL').DataTable();
                                    //}
                                    //else {
                                    //    $('#tabDataCM_MCL').DataTable({
                                    //        "responsive": true,
                                    //        "autoWidth": false,
                                    //        //"paging": true,
                                    //        //"lengthChange": false,
                                    //        "searching": true,
                                    //        //  "orderable": true,
                                    //        //"info": true,
                                    //        "order": [],
                                    //        "columnDefs": [{
                                    //            "targets": [0, 4],
                                    //            "orderable": false,
                                    //        }]
                                    //    });
                                    //}

                                });

                                break;
                            case 2:

                                $('#divTabDataMPCvd_MCM_CLAc').load(url, function () {
                                    if ($.fn.dataTable.isDataTable('#tabDataCM_MCL_CLAc')) {
                                        $('#tabDataCM_MCL_CLAc').DataTable();
                                    }
                                    else {
                                        $('#tabDataCM_MCL_CLAc').DataTable({
                                            "responsive": true,
                                            "autoWidth": false,
                                            //"paging": true,
                                            //"lengthChange": false,
                                            "searching": true,
                                            //  "orderable": true,
                                            //"info": true,
                                            "order": [],
                                            "columnDefs": [{
                                                "targets": [0, 4],
                                                "orderable": false,
                                            }]
                                        });
                                    }
                                });

                                break;
                            case 3:

                                $('#divTabDataMPCvd_MCL_CET').load(url, function () {
                                    if ($.fn.dataTable.isDataTable('#tabDataCM_MCL_CET')) {
                                        $('#tabDataCM_MCL_CET').DataTable();
                                    }
                                    else {
                                        $('#tabDataCM_MCL_CET').DataTable({
                                            "responsive": true,
                                            "autoWidth": false,
                                            //"paging": true,
                                            //"lengthChange": false,
                                            "searching": true,
                                            //  "orderable": true,
                                            //"info": true,
                                            "order": [],
                                            "columnDefs": [{
                                                "targets": [0, 3],
                                                "orderable": false,
                                            }]
                                        });
                                    }
                                });

                                break;

                        }
                        break;

                    case 12:
                        switch (sb_ndx) {
                            case 1:
                                $('#divTabDataMPCvd_MCM_MT').load(url, function () {
                                    if ($.fn.dataTable.isDataTable('#tabDataCM_MCM_MT')) {
                                        $('#tabDataCM_MCM_MT').DataTable();
                                    }
                                    else {
                                        $('#tabDataCM_MCM_MT').DataTable({
                                            "responsive": true,
                                            "autoWidth": false,
                                            //"paging": true,
                                            //"lengthChange": false,
                                            "searching": true,
                                            //  "orderable": true,
                                            //"info": true,
                                            "order": [],
                                            "columnDefs": [{
                                                "targets": [0, 3],
                                                "orderable": false,
                                            }]
                                        });
                                    }
                                });

                                break;

                            case 2:

                                $('#divTabDataMPCvd_MCM_MR').load(url, function () {
                                    if ($.fn.dataTable.isDataTable('#tabDataCM_MCM_MR')) {
                                        $('#tabDataCM_MCM_MR').DataTable();
                                    }
                                    else {
                                        $('#tabDataCM_MCM_MR').DataTable({
                                            "responsive": true,
                                            "autoWidth": false,
                                            //"paging": true,
                                            //"lengthChange": false,
                                            "searching": true,
                                            //  "orderable": true,
                                            //"info": true,
                                            "order": [],
                                            "columnDefs": [{
                                                "targets": [0, 3],
                                                "orderable": false,
                                            }]
                                        });
                                    }
                                });

                                break;
                            case 3:

                                $('#divTabDataMPCvd_MCM_MS').load(url, function () {
                                    if ($.fn.dataTable.isDataTable('#tabDataCM_MCM_MS')) {
                                        $('#tabDataCM_MCM_MS').DataTable();
                                    }
                                    else {
                                        $('#tabDataCM_MCM_MS').DataTable({
                                            "responsive": true,
                                            "autoWidth": false,
                                            //"paging": true,
                                            //"lengthChange": false,
                                            "searching": true,
                                            //  "orderable": true,
                                            //"info": true,
                                            "order": [],
                                            "columnDefs": [{
                                                "targets": [0, 3],
                                                "orderable": false,
                                            }]
                                        });
                                    }
                                });

                                break;
                        }

                    case 13:
                        $('#divTabDataMPCvd_MCG').load(url, function () {
                            if ($.fn.dataTable.isDataTable('#tabDataCM_MCG')) {
                                $('#tabDataCM_MCG').DataTable();
                            }
                            else {
                                $('#tabDataCM_MCG').DataTable({
                                    "responsive": true,
                                    "autoWidth": false,
                                    //"paging": true,
                                    //"lengthChange": false,
                                    "searching": true,
                                    //  "orderable": true,
                                    //"info": true,
                                    "order": [],
                                    "columnDefs": [{
                                        "targets": [0, 4],
                                        "orderable": false,
                                    }]
                                });
                            }
                        });

                        break;

                    case 14:
                        $('#divTabDataMPCvd_MCR').load(url, function () {
                            if ($.fn.dataTable.isDataTable('#tabDataCM_MCR')) {
                                $('#tabDataCM_MCR').DataTable();
                            }
                            else {
                                $('#tabDataCM_MCR').DataTable({
                                    "responsive": true,
                                    "autoWidth": false,
                                    //"paging": true,
                                    //"lengthChange": false,
                                    "searching": true,
                                    //  "orderable": true,
                                    //"info": true,
                                    "order": [],
                                    "columnDefs": [{
                                        "targets": [0, 4],
                                        "orderable": false,
                                    }]
                                });
                            }
                        });

                        break;

                    case 15:
                        $('#divTabDataMPCvd_MRR').load(url, function () {
                            if ($.fn.dataTable.isDataTable('#tabDataCM_MRR')) {
                                $('#tabDataCM_MRR').DataTable();
                            }
                            else {
                                $('#tabDataCM_MRR').DataTable({
                                    "responsive": true,
                                    "autoWidth": false,
                                    //"paging": true,
                                    //"lengthChange": false,
                                    "searching": true,
                                    //  "orderable": true,
                                    //"info": true,
                                    "order": [],
                                    "columnDefs": [{
                                        "targets": [0, 3],
                                        "orderable": false,
                                    }]
                                });
                            }
                        });

                        break;

                    case 16:
                        $('#divTabDataMPCvd_MCA').load(url, function () {
                            if ($.fn.dataTable.isDataTable('#tabDataCM_MCA')) {
                                $('#tabDataCM_MCA').DataTable();
                            }
                            else {
                                $('#tabDataCM_MCA').DataTable({
                                    "responsive": true,
                                    "autoWidth": false,
                                    //"paging": true,
                                    //"lengthChange": false,
                                    "searching": true,
                                    //  "orderable": true,
                                    //"info": true,
                                    "order": [],
                                    "columnDefs": [{
                                        "targets": [0, 3],
                                        "orderable": false,
                                    }]
                                });
                            }
                        });

                        break;

                    case 17:
                        $('#divTabDataMPCvd_MCT').load(url, function () {
                            if ($.fn.dataTable.isDataTable('#tabDataCM_MCT')) {
                                $('#tabDataCM_MCT').DataTable();
                            }
                            else {
                                $('#tabDataCM_MCT').DataTable({
                                    "responsive": true,
                                    "autoWidth": false,
                                    //"paging": true,
                                    //"lengthChange": false,
                                    "searching": true,
                                    //  "orderable": true,
                                    //"info": true,
                                    "order": [],
                                    "columnDefs": [{
                                        "targets": [0, 5],
                                        "orderable": false,
                                    }]
                                });
                            }
                        });

                        break;

                    case 18:
                        $('#divTabDataMPCvd_MTP').load(url, function () {
                            if ($.fn.dataTable.isDataTable('#tabDataCM_MTP')) {
                                $('#tabDataCM_MTP').DataTable();
                            }
                            else {
                                $('#tabDataCM_MTP').DataTable({
                                    "responsive": true,
                                    "autoWidth": false,
                                    //"paging": true,
                                    //"lengthChange": false,
                                    "searching": true,
                                    //  "orderable": true,
                                    //"info": true,
                                    "order": [],
                                    "columnDefs": [{
                                        "targets": [0, 5],
                                        "orderable": false,
                                    }]
                                });
                            }
                        });

                        break;
                }

               // });
            }

            else {
                window.location.assign(url);
               // window.location = url;
            }




            //$('#divPopModal_AddEdit').modal({
            //    backdrop: 'static',
            //    keyboard: false
            //});
                        //$('#divPopModal_AddEdit').modal({
                        //    backdrop: false,
                        //    show: true
                        //});

            //$('#divPopModal_AddEdit .modal-dialog').draggable({
            //    handle: ".modal-header"
            //});

            ////alert('loading modal...')
            //$('#divPopModal_AddEdit .modal-body').load(url, function () {

            //   // $('#divPopModal_AddEdit .modal-title').html(_strItemName);

            //   // //$('#_NationalityId').change();
            //   // //$('#_CountryId_MemCI').change();
            //   // //$('#_MaritalStatus').change();
            //   // //$('#_IdTypeId').change();
            //   // // calcMemAgeByVal($('#_DateOfBirth').val());

            //   //// var isDisable = $('#_bl_AUT_GN').val();
            //   //// alert('isDisable: ' + isDisable)
            //   // $('#_MemberCustomCode').prop('disabled', $('#_bl_AUT_GN').val());
            //   // ///

            //   // $("#divPopModal_AddEdit").modal('show');

            //});
        };

        var AddEditCurrDataCM_moMPC = function (currCBId, currCMId, currMdl_Id, currParid, _strItemTag, s_ndx, sb_ndx, userAction = -1) { // , _strItemName
            //alert('editing moMPC: ' + _strItemTag)
            //if (!skipCurr) {  // reload the current details...
            //    currCBId = $("#_oChurchBodyId").data("value");
            //    currCMId = $("#_oChurchMemberId").data("value");
            //    s_ndx = $("#_oSetIndex").data("value");
            //}

            var currCBId_log = $("#_oChurchBodyId_Logged").data("value");

            if (currCBId < 0) currCBId = null;
            if (currCMId < 0) currCMId = null;
            if (currParid < 0) currParid = null;
            if (s_ndx < 0) s_ndx = 0;
            if (sb_ndx < 0) sb_ndx = 0;
            ///
            /// must be from ownCB else read!
            if (currCBId_log != currCBId) userAction = -1;

         //   public IActionResult AddModCM_moMPC(int? oCBid = null, int? oCMid = null, int? currId = null, int? oParid = null, int s_ndx = 0, int sb_ndx = 0, int vw = 1)

            var url = "@Url.Action("AddModCM_moMPC", "ChurchMembers")?oCBid=" + currCBId + "&oCMid=" + currCMId + "&currId=" + currMdl_Id +
                                                                        "&oParid=" + currParid + "&s_ndx=" + s_ndx + "&sb_ndx=" + sb_ndx + "&vw=" + userAction;

             //alert(url)

            if (currMdl_Id > 0) { $('#btnSaveChanges_mltp').html('Update'); }
            $('#btnSaveChanges_mltp').prop('hidden', userAction < 0);

            $('#divPopModal_AddEdit_mltp').modal({
                backdrop: 'static',
                keyboard: false
            });

            //$('#divPopModal_AddEdit').modal({
            //    backdrop: false,
            //    show: true
            //});

            $('#divPopModal_AddEdit_mltp .modal-dialog').draggable({
                handle: ".modal-header"
            });

            //alert('loading modal...')
            $('#divPopModal_AddEdit_mltp .modal-body').load(url, function () {

                switch (s_ndx) {
                    case 2:
                        $('#_CountryId_moMemCI').change();
                        $('#_MobilePhone1_moMemCI').change();

                        break;

                    case 4:
                        $('#_RelationScope_moMFR').change();
                        $('#_CountryId_moMFR').change();
                      //  $('#_btnPickMembersDirect_moMFR').click();

                        break;

                    case 5:
                        $('#_RelationScope_moMCP').change();
                        $('#_CountryId_moMCP').change();

                        break;

                     case 6:
                        $('#chk_IsCompleted_moMED').change();

                        break;

                     case 7:
                        $('#chk_IsActivePractice_moMPB').change();

                        break;

                    case 8:
                        $('#chk_IsCurrentWork_moMWE').change();

                        break;




                    case 11:
                        switch (sb_ndx) {
                            case 1:
                                $('#chk_IsCurrentMember_moMCL_CL').change();
                                $('#chk_IsMemConfirmed_moMCL_CL').change();
                                $('#chk_IsMemCommunicant_moMCL_CL').change();

                                break;

                            case 2:
                                $('#chk_IsChurchEvent_moMCL_CLAc').change();
                                $('#_HostVenueScope_moMCL_CLAc').change();
                                $('#_OfficiatedByScope_moMCL_CLAc').change();  
                                break;

                            case 3:
                                $('#_Status_moMCL_CET').change();

                            break;
                        }

                        break;

                    case 12:
                        switch (sb_ndx) {
                            case 1:
                                $('#chk_IsCurrent_moMCM_MT').change();
                                break;

                            case 2:
                                $('#chk_IsCurrentRank_moMCM_MR').change();
                                break;

                            case 3:
                                $('#chk_IsCurrent_moMCM_MS').change();

                                break;
                        }

                        break;



                    case 13:
                        $('#chk_IsCurrUnit_moMCG').change();
                        $('#_strOrgType_moMCG').change();
                        break;

                    case 14:
                        $('#chk_IsCurrentRole_moMCR').change();
                        $('#chk_IsChurchUnit_moMCR').change();
                        break;
                }



               // var _setIndex = $("#_oSetIndex").data("value");

                //var _setIndex = $("#_setIndex_MPC").val();
                //var _setIndex1 = $("#_setIndex_MPC1").val();

                //alert('... _setIndex : ' + _setIndex)
                //alert('... _setIndex chk : ' + _setIndex1)


                $('#divPopModal_AddEdit_mltp .modal-title').html(_strItemTag);
                $("#divPopModal_AddEdit_mltp").modal('show');

            });
        };

        var DeleteCurrDataCM_moMPC = function (currCBId, currCMId, currMdl_Id, currParid, _strItemTag, s_ndx, userAction = 0) {
             // deleting....
        };



        var AddEditCurrDataCM_BD = function (currCBId, currId, _strItemName) {
            //  alert('add OR edit...');
               // alert('addORedit.. ' + currId )  //+ ' __indx: ' + currSetIndex);

           // var currAGOId_Logged = $("#_oAppGloOwnId_Logged").data("value");
           // var currCBId_Logged

            if (currCBId == null) {
                currCBId = $("#_oChurchBodyId_Logged").data("value");
            }

           // var currUserId_Logged = $("#_oUserId_Logged").data("value");

           // var currCountryCode = $("#_currCountryCode").val();
           // var currParBodyId = null;

            if (currId < 0) currId = null;

            // public IActionResult AddModCM_BD(int id = 0, int? oCBid = null, int vw = 0)
            var url = "@Url.Action("AddModCM_BD", "ChurchMembers")?id=" + currId + "&oCBid=" + currCBId + "&vw=" + 0;     // + "&strCodeCriteria_2=" + null + "&oUserId=" + currUserId_Logged ;

            // alert(url)  // if (currId > 0) { document.querySelector('#btnSaveChangesCM_BD').innerHTML = 'Update'; }

            // document.querySelector('#btnSaveChanges').innerHTML = '<i class="fas fa-database text-bold mr-1"></i> Update';
            // $('#btnSaveChangesCM_BD').html('Update');
            if (currId > 0)
            { document.querySelector('#btnSaveChanges').innerHTML = '<i class="fas fa-database text-bold mr-1"></i> Update';}

            $('#divPopModal_AddEdit').modal({
                backdrop: 'static',
                keyboard: false
            });
                        //$('#divPopModal_AddEdit').modal({
                        //    backdrop: false,
                        //    show: true
                        //});

            $('#divPopModal_AddEdit .modal-dialog').draggable({
                handle: ".modal-header"
            });

            //alert('loading modal...')
            $('#divPopModal_AddEdit .modal-body').load(url, function () {

                $('#divPopModal_AddEdit .modal-title').html(_strItemName);

                $('#_NationalityId').change();
                $('#_CountryId_MemCI').change();
                $('#_MobilePhone1').change();
                $('#_MaritalStatus').change();
                $('#_IdTypeId').change();
                // calcMemAgeByVal($('#_DateOfBirth').val());

               // var isDisable = $('#_bl_AUT_GN').val();
               // alert('isDisable: ' + isDisable)
                $('#_MemberCustomCode').prop('disabled', $('#_bl_AUT_GN').val());
                ///

                $("#divPopModal_AddEdit").modal('show');
            });
        };

        var ReloadCurrPageCM_BD = function (currCBId) {
           // alert('reload.. ')
            //
            // public ActionResult IndexCM_SUM(int? oCBid, bool? isNewCM = false, bool? isStAv = true, string memClass = "C", bool loadLim = false)
            var url = '@Url.Action("IndexCM_SUM", "ChurchMembers")?oCBid=' + currCBId + '&loadLim=true';


           // alert(url)
            $('#divTabDataCM_BD').load(url, function () {
                if ($.fn.dataTable.isDataTable('#tabDataCM_BD')) {
                    $('#tabDataCM_BD').DataTable();
                }
                else {
                    $('#tabDataCM_BD').DataTable({
                        "responsive": true,
                        "autoWidth": false,
                        //"paging": true,
                        //"lengthChange": false,
                        "searching": true,
                        //  "orderable": true,
                        //"info": true,
                        "order": [],
                        "columnDefs": [{
                            "targets": [0, 6],
                            "orderable": false,
                        }]
                    });
                }
            });


            // tabData_CTRY
            //$('#divTabDataCM_BD').load(url, function (e) {
            //   // e.preventDefault();

            //    $("#tabDataCM_BD").DataTable({
            //        "responsive": true,
            //        "autoWidth": false,
            //        //"paging": true,
            //        //"lengthChange": false,
            //        //"searching": false,
            //        //"ordering": true,
            //        //"info": true,
            //        "order": [],
            //        "columnDefs": [{
            //            "targets": [0, 7],
            //            "orderable": false,
            //        }]
            //    });
            //});

        }

        var SaveCurrCM_BD = function (elem) { // (currSetIndex, currSubSetIndex) {
            //    alert('save... ');

           // const form = document.getElementById("currFormCM_BD");
           // alert('val 4 .. ' + form.checkValidity())

             var currFormData = new FormData($("#currFormCM_BD").get(0));
                // var currFormData = $("#currFormCM_BD").serialize();
               // alert('save... submitting...');

                $.ajax({
                    type: 'POST',
                    // data: formdata,
                    // processData: false,

                    url: '@Url.Action("AddModCM_BD", "ChurchMembers")',

                   // url: "/ChurchMembers/AddModCM_BD",
                    data: currFormData,   //{ data: currFormData, taskIndx: oTask },  //
                    //contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
                    contentType: false,
                    processData: false,
                    success: function (res) {

                        if (res.taskSuccess == true) {

                            ReloadCurrPageCM_BD(res.currCBId);   //currId... via AJAX...

                            // var ures = confirm("Add new member?");

                            //alert($('#btnSaveChanges').text())

                            if ($('#btnSaveChanges').text().includes('Save')) {  // newly added...
                               // alert('adding new...')
                               $.confirm({
                                    title: 'Done!',
                                    content: res.userMess + '. >> Add new member - biodata?',
                                    type: 'green',
                                    typeAnimated: true,
                                    closeIcon: true,
                                    closeIconClass: 'fa fa-close',
                                    ///
                                    buttons: {
                                        close: function () {
                                            AddEditCurrDataCM_BD(res.currCBId, res.currId, res.memDispName);
                                            document.querySelector('#btnSaveChanges').innerHTML = '<i class="fas fa-database text-bold mr-1"></i> Update';
                                            // enable the proceed to ... btn
                                            $('#btnSaveChanges_ProcToCMP').prop('hidden', false);
                                        },
                                        ///
                                        'ok add new': function () {
                                            AddEditCurrDataCM_BD(res.currCBId, 0, "'[New] Church Member - Biodata'");
                                            document.querySelector('#btnSaveChanges').innerHTML = '<i class="fas fa-database text-bold mr-1"></i> Save changes';
                                            $('#btnSaveChanges_ProcToCMP').prop('hidden', 'hidden');
                                        },
                                    }
                                });
                            }

                            else {   // update..
                               // alert('updating...')
                                DisplaySuccessInfo(res.userMess);
                                $("#divPopModal_AddEdit .close").click();
                            }
                        }

                        else //if (res.taskSuccess == false)
                        {
                            DisplayErrorInfo(res.userMess);
                        }


                        BtnReset(elem);
                    }, 

                    error: function () {

                        BtnReset(elem);
                    }
                })
        }

        $(document).on('click', '#btnSaveChanges', function (e) {
            e.preventDefault();

            //  alert('click..');
            const form = document.getElementById("currFormCM_BD");
            //alert('val 4 .. ' + form.checkValidity())

            if (form.checkValidity() === true) {


                //// alert('enabling spin...')
                //var _elem = $(this);
                //BtnLoading(_elem, 'Saving...');

                //error: function () {

                //    BtnReset(elem);
                //}


                // alert('enabling spin...')
                var _elem = $(this);
                BtnLoading(_elem, 'Saving...'); 

                SaveCurrCM_BD(_elem); //currSetIndex, currSubSetIndex);
            }
            else {
                // alert('val 5')
                event.preventDefault();
                event.stopPropagation();

                form.classList.add('was-validated');
            }
        })

        // saving all the 16 models with this....
         $(document).on('click', '#btnSaveChanges_mltp', function (e) {
            e.preventDefault();

             // prevent further user click...
             //$('#btnSaveChanges_mltp').prop('disabled', true);

            // alert('saving... ')

             //var _setIndex = $("#_oSetIndex").data("value");  //_setIndex
             //var _setIndex1 = $("#_setIndex_MPC").val();
             ////var _setIndexMED = $("#_setIndex_MPC_MED").val();

             //alert('saving... _setIndex : ' + _setIndex)
             //alert('saving... _setIndex chk : ' + _setIndex1)


             var _setIndex1 = $("#_setIndex_MPC").val();
             var _setIndex = $("#_setIndex_MPC1").val();

             //alert('... _setIndex : ' + _setIndex)
             //alert('... _setIndex chk : ' + _setIndex1)


             //var _taskIndex = $("#_taskIndex_MPC").val();
             //alert('taskIndex: ' + _taskIndex)

             var form = null;
             switch (parseInt(_setIndex)) {
                 /// PER INFO models
                 case 1:
                     form = document.getElementById("currFormCM_BD"); //  var currFormData = new FormData($("#currFormCM_BD").get(0));
                     break;

                 case 2:
                     form = document.getElementById("currFormCM_MCI");
                     break;

                 case 3:
                     form = document.getElementById("currFormCM_MLS");
                     break;

                 case 4:
                     form = document.getElementById("currFormCM_MFR");
                     break;

                 case 5:
                     form = document.getElementById("currFormCM_MCP");
                     break;

                 case 6:
                     form = document.getElementById("currFormCM_MED");
                     break;

                 case 7:
                     form = document.getElementById("currFormCM_MPB");
                     break;

                 case 8:
                     form = document.getElementById("currFormCM_MWE");
                     break;

                 /// cl models
                 ///
                 case 11:
                     var _subIndex = $("#_subSetIndex_MPC").val();
                     switch (parseInt(_subIndex)) {
                         case 1:
                             form = document.getElementById("currFormCM_MCL_CL");
                             break;
                         case 2:
                             form = document.getElementById("currFormCM_MCL_CLAc");
                             break;
                         case 3:
                             form = document.getElementById("currFormCM_MCL_CET");
                             break;
                     }

                     break;
                 case 12:
                     var _subIndex = $("#_subSetIndex_MPC").val();
                     switch (parseInt(_subIndex)) {
                         case 1:
                             form = document.getElementById("currFormCM_MCM_MT");
                             break;

                         case 2:
                             form = document.getElementById("currFormCM_MCM_MR");
                             break;

                         case 3:
                             form = document.getElementById("currFormCM_MCM_MS");
                             break;
                     }
                     break;

                 case 13:
                     form = document.getElementById("currFormCM_MCG");
                     break;
                 case 14:
                     form = document.getElementById("currFormCM_MCR");
                     break;
                 case 15:
                     form = document.getElementById("currFormCM_MRR");
                     break;
                 case 16:
                     form = document.getElementById("currFormCM_MCA");
                     break;
                 case 17:
                     form = document.getElementById("currFormCM_MCT");
                     break;
                 case 18:
                     form = document.getElementById("currFormCM_MTP");
                     break;
             }

             // alert('val 4 .. ' + form.checkValidity())
             if (form.checkValidity() === true) {

                 var formData = null;
                 var _urlAction = "";

                 // alert('enabling spin...')
                 var _elem = $(this);
                 BtnLoading(_elem, 'Saving...'); 

                 switch (parseInt(_setIndex)) {
                     case 1:
                         SaveCurrCM_BD(_elem); //var formData = new FormData($("#currFormCM_BD").get(0));
                         break;

                     default:
                         switch (parseInt(_setIndex)) {
                             case 2:
                                 _urlAction = '@Url.Action("AddModCM_MCI", "ChurchMembers")';
                                 formData = new FormData($("#currFormCM_MCI").get(0));
                                 break;

                             case 3:
                                 _urlAction = '@Url.Action("AddModCM_MLS", "ChurchMembers")';
                                 formData = new FormData($("#currFormCM_MLS").get(0));
                                 break;

                             case 4:
                                 _urlAction = '@Url.Action("AddModCM_MFR", "ChurchMembers")';
                                 formData = new FormData($("#currFormCM_MFR").get(0));
                                 break;

                             case 5:
                                 _urlAction = '@Url.Action("AddModCM_MCP", "ChurchMembers")';
                                 formData = new FormData($("#currFormCM_MCP").get(0));
                                 break;

                             case 6:
                                 //alert('med ..save...')
                                 _urlAction = '@Url.Action("AddModCM_MED", "ChurchMembers")';
                                 formData = new FormData($("#currFormCM_MED").get(0));
                                 break;

                             case 7:
                                 _urlAction = '@Url.Action("AddModCM_MPB", "ChurchMembers")';
                                 formData = new FormData($("#currFormCM_MPB").get(0));
                                 break;

                             case 8:
                                 _urlAction = '@Url.Action("AddModCM_MWE", "ChurchMembers")';
                                 formData = new FormData($("#currFormCM_MWE").get(0));
                                 break;


                             /// cl models
                             ///
                             case 11:

                                 var _subIndex = $("#_subSetIndex_MPC").val();
                                 switch (parseInt(_subIndex)) {
                                     case 1:
                                         _urlAction = '@Url.Action("AddModCM_MCL", "ChurchMembers")';
                                         formData = new FormData($("#currFormCM_MCL_CL").get(0));
                                         break;

                                     case 2:
                                         _urlAction = '@Url.Action("AddModCM_MCLAc", "ChurchMembers")';
                                         formData = new FormData($("#currFormCM_MCL_CLAc").get(0));
                                         break;

                                     case 3:
                                         _urlAction = '@Url.Action("AddModCM_MCET", "ChurchMembers")';
                                         formData = new FormData($("#currFormCM_MCL_CET").get(0));
                                         break;
                                  }

                                 break;


                             case 12:
                                 var _subIndex = $("#_subSetIndex_MPC").val();
                                 switch (parseInt(_subIndex)) {
                                     case 1:
                                         _urlAction = '@Url.Action("AddModCM_MT", "ChurchMembers")';
                                         formData = new FormData($("#currFormCM_MCM_MT").get(0));
                                         break;

                                     case 2:
                                         _urlAction = '@Url.Action("AddModCM_MR", "ChurchMembers")';
                                         formData = new FormData($("#currFormCM_MCM_MR").get(0));
                                         break;

                                     case 3:
                                         _urlAction = '@Url.Action("AddModCM_MS", "ChurchMembers")';
                                         formData = new FormData($("#currFormCM_MCM_MS").get(0));
                                         break;
                                  }

                                 break;

                             case 13:
                                 _urlAction = '@Url.Action("AddModCM_MCG", "ChurchMembers")';
                                 formData = new FormData($("#currFormCM_MCG").get(0));
                                 break;

                             case 14:
                                  _urlAction = '@Url.Action("AddModCM_MCR", "ChurchMembers")';
                                 formData = new FormData($("#currFormCM_MCR").get(0));
                                 break;

                             case 15:
                                 _urlAction = '@Url.Action("AddModCM_MRR", "ChurchMembers")';
                                 formData = new FormData($("#currFormCM_MRR").get(0));
                                 break;

                             case 16:
                                 _urlAction = '@Url.Action("AddModCM_MCA", "ChurchMembers")';
                                 formData = new FormData($("#currFormCM_MCA").get(0));
                                 break;

                             case 17:
                                 _urlAction = '@Url.Action("AddModCM_MCT", "ChurchMembers")';
                                 formData = new FormData($("#currFormCM_MCT").get(0));
                                 break;

                               case 18:
                                 _urlAction = '@Url.Action("AddModCM_MTP", "ChurchMembers")';
                                 formData = new FormData($("#currFormCM_MTP").get(0));
                                 break;
                         }


                         /// call the respective model to save data.... 1 .. 16
                         SaveCurrCM_mltp(formData, _urlAction, _elem);
                         break;
                 }
             }
             else {
                 // alert('val 5')
                 event.preventDefault();
                 event.stopPropagation();

                 form.classList.add('was-validated');
             }
        })

        var SaveCurrCM_mltp = function (currFormData, _mdlUrl, elem ) { // (currSetIndex, currSubSetIndex) {

            //alert('save... mltp');
            //alert('save... mltp _mdlUrl: ' + _mdlUrl);

           // const form = document.getElementById("currFormCM_BD");
           // alert('val 4 .. ' + form.checkValidity())

           //  var currFormData = new FormData($("#currFormCM_BD").get(0));
                // var currFormData = $("#currFormCM_BD").serialize();
               // alert('save... submitting...');


                $.ajax({
                    type: 'POST',
                    // data: formdata,
                    // processData: false,

                    url: _mdlUrl,  // @*url: '@Url.Action("AddModCM_BD", "ChurchMembers")',*@

                   // url: "/ChurchMembers/AddModCM_BD",
                    data: currFormData,   //{ data: currFormData, taskIndx: oTask },  //
                    //contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
                    contentType: false,
                    processData: false,
                    success: function (res) {

                        if (res.taskSuccess == true) {

                            // load... all or [x]  AddEditCurrDataCM_MPC = function (currCBId, currCMId, currParid, s_ndx, skipCurr = true)
                            //  var AddEditCurrDataCM_MPC = function (currCBId, currCMId, currParid, s_ndx, skipCurr = true)
                            // return Json(new { taskSuccess = true, userMess = ViewBag.UserMsg, resetNew = _reset, currCBId = _oChangesCI.ChurchBodyId, currCMId = _oChangesCI.ChurchMemberId,
                             // currId = _oChangesCI.Id, currParid = -1, currSetIndex = vm.setIndex, strItemTag = _strMemFullName, signOutToLogIn = false });
                            /// alert('s_ndx: ' + res.currSetIndex)

                            // reload list -- behind
                            AddEditCurrDataCM_MPC(res.currCBId, res.currCMId, res.currParid, res.currSetIndex, res.currSubIndex, true);   //currId...   var AddEditCurrDataCM_MPC = function (currCBId, currCMId, s_ndx, skipCurr = true)

                            $.confirm({
                                title: 'Done!',
                                content: res.userMess,
                                type: 'green',
                                typeAnimated: true,
                                closeIcon: true,
                                closeIconClass: 'fa fa-close',
                                ///
                                buttons: {
                                    ok: function () {

                                        if (res.resetNew) {   //  || $('#btnSaveChanges_mltp').text().includes('Save')
                                            //  AddEditCurrDataCM_moMPC = function (currCBId, currCMId, currMdl_Id, currParid, _strItemTag, s_ndx, userAction = 0)
                                            AddEditCurrDataCM_moMPC(res.currCBId, res.currCMId, 0, res.currParid, res.strItemTag, res.currSetIndex, res.currSubIndex, 1);  // clear and add new
                                        }
                                        else {
                                            AddEditCurrDataCM_moMPC(res.currCBId, res.currCMId, res.currId, res.currParid, res.strItemTag, res.currSetIndex, res.currSubIndex, 2);  // keep edit mode: more update
                                            document.querySelector('#btnSaveChanges_mltp').innerHTML = '<i class="fas fa-database text-bold mr-1"></i> Update';

                                            //DisplaySuccessInfo(res.userMess);
                                            //$("#divPopModal_AddEdit .close").click();
                                        }


                                    }
                                }
                            });

                        }

                        else //if (res.taskSuccess == false)
                        {
                            //alert(res.userMess)

                            //$.alert({
                            //    title: 'Oops!',
                            //    type: 'red',
                            //    typeAnimated: true,
                            //    content: res.userMess,
                            //    closeIcon: true,
                            //    closeIconClass: 'fa fa-close'
                            //});

                            DisplayErrorInfo(res.userMess, false);
                        }


                        //// allow further user click...
                        //$('#btnSaveChanges_mltp').prop('disabled', false);


                        BtnReset(elem); 

                    },
                     
                    error: function () {

                        BtnReset(elem);
                    }

                })
        }

    </script>

    <script>
        //if ($.fn.dataTable.isDataTable('#tabDataCM_BD')) {
        //    $('#tabDataCM_BD').DataTable();
        //}
        //else {
        //    $('#tabDataCM_BD').DataTable({
        //        "responsive": true,
        //        "autoWidth": false,
        //        //"paging": true,
        //        //"lengthChange": false,
        //        "searching": true,
        //        //  "orderable": true,
        //        //"info": true,
        //        "order": [],
        //        "columnDefs": [{
        //            "targets": [0, 6],
        //            "orderable": false,
        //        }]
        //    });
        //}

        $(function () {
            if ($.fn.dataTable.isDataTable('#tabDataCM_MLS')) {
                $('#tabDataCM_MLS').DataTable();
            }
            else {
                $('#tabDataCM_MLS').DataTable({
                    "responsive": true,
                    "autoWidth": false,
                    //"paging": true,
                    //"lengthChange": false,
                    "searching": true,
                    //  "orderable": true,
                    //"info": true,
                    "order": [],
                    "columnDefs": [{
                        "targets": [0, 3],
                        "orderable": false,
                    }]
                });
            }
        });

        $(function () {
            if ($.fn.dataTable.isDataTable('#tabDataCM_MFR')) {
                $('#tabDataCM_MFR').DataTable();
            }
            else {
                $('#tabDataCM_MFR').DataTable({
                    "responsive": true,
                    "autoWidth": false,
                    //"paging": true,
                    //"lengthChange": false,
                    "searching": true,
                    //  "orderable": true,
                    //"info": true,
                    "order": [],
                    "columnDefs": [{
                        "targets": [0, 5],
                        "orderable": false,
                    }]
                });
            }
        });

        $(function () {
            if ($.fn.dataTable.isDataTable('#tabDataCM_MCP')) {
                $('#tabDataCM_MCP').DataTable();
            }
            else {
                $('#tabDataCM_MCP').DataTable({
                    "responsive": true,
                    "autoWidth": false,
                    //"paging": true,
                    //"lengthChange": false,
                    "searching": true,
                    //  "orderable": true,
                    //"info": true,
                    "order": [],
                    "columnDefs": [{
                        "targets": [0, 5],
                        "orderable": false,
                    }]
                });
            }
        });

        $(function () {

            if ($.fn.dataTable.isDataTable('#tabDataCM_MED')) {
                $('#tabDataCM_MED').DataTable();
            }
            else {
                $('#tabDataCM_MED').DataTable({
                    "responsive": true,
                    "autoWidth": false,
                    //"paging": true,
                    //"lengthChange": false,
                    "searching": true,
                    //  "orderable": true,
                    //"info": true,
                    "order": [],
                    "columnDefs": [{
                        "targets": [0, 5],
                        "orderable": false,
                    }]
                });
            }

        });

        $(function () {

            if ($.fn.dataTable.isDataTable('#tabDataCM_MPB')) {
                $('#tabDataCM_MPB').DataTable();
            }
            else {
                $('#tabDataCM_MPB').DataTable({
                    "responsive": true,
                    "autoWidth": false,
                    //"paging": true,
                    //"lengthChange": false,
                    "searching": true,
                    //  "orderable": true,
                    //"info": true,
                    "order": [],
                    "columnDefs": [{
                        "targets": [0, 2],
                        "orderable": false,
                    }]
                });
            }

        });

        $(function () {

            if ($.fn.dataTable.isDataTable('#tabDataCM_MWE')) {
                $('#tabDataCM_MWE').DataTable();
            }
            else {
                $('#tabDataCM_MWE').DataTable({
                    "responsive": true,
                    "autoWidth": false,
                    //"paging": true,
                    //"lengthChange": false,
                    "searching": true,
                    //  "orderable": true,
                    //"info": true,
                    "order": [],
                    "columnDefs": [{
                        "targets": [0, 3],
                        "orderable": false,
                    }]
                });
            }

        });



        /// churchlife --core  .. tabDataCM_MCL_CL

        $(function () {
            if ($.fn.dataTable.isDataTable('#tabDataCM_MCL_CLAc')) {
                $('#tabDataCM_MCL_CLAc').DataTable();
            }
            else {
                $('#tabDataCM_MCL_CLAc').DataTable({
                    "responsive": true,
                    "autoWidth": false,
                    //"paging": true,
                    //"lengthChange": false,
                    "searching": true,
                    //  "orderable": true,
                    //"info": true,
                    "order": [],
                    "columnDefs": [{
                        "targets": [0, 4],
                        "orderable": false,
                    }]
                });
            }


        });

        $(function () {

            if ($.fn.dataTable.isDataTable('#tabDataCM_MCL_CET')) {
                $('#tabDataCM_MCL_CET').DataTable();
            }
            else {
                $('#tabDataCM_MCL_CET').DataTable({
                    "responsive": true,
                    "autoWidth": false,
                    //"paging": true,
                    //"lengthChange": false,
                    "searching": true,
                    //  "orderable": true,
                    //"info": true,
                    "order": [],
                    "columnDefs": [{
                        "targets": [0, 3],
                        "orderable": false,
                    }]
                });
            }
        });

        $(function () {

            if ($.fn.dataTable.isDataTable('#tabDataCM_MCM_MT')) {
                $('#tabDataCM_MCM_MT').DataTable();
            }
            else {
                $('#tabDataCM_MCM_MT').DataTable({
                    "responsive": true,
                    "autoWidth": false,
                    //"paging": true,
                    //"lengthChange": false,
                    "searching": true,
                    //  "orderable": true,
                    //"info": true,
                    "order": [],
                    "columnDefs": [{
                        "targets": [0, 3],
                        "orderable": false,
                    }]
                });
            }

        });



        $(function () {

            if ($.fn.dataTable.isDataTable('#tabDataCM_MCM_MR')) {
                $('#tabDataCM_MCM_MR').DataTable();
            }
            else {
                $('#tabDataCM_MCM_MR').DataTable({
                    "responsive": true,
                    "autoWidth": false,
                    //"paging": true,
                    //"lengthChange": false,
                    "searching": true,
                    //  "orderable": true,
                    //"info": true,
                    "order": [],
                    "columnDefs": [{
                        "targets": [0, 3],
                        "orderable": false,
                    }]
                });
            }

        });


        $(function () {

            if ($.fn.dataTable.isDataTable('#tabDataCM_MCM_MS')) {
                $('#tabDataCM_MCM_MS').DataTable();
            }
            else {
                $('#tabDataCM_MCM_MS').DataTable({
                    "responsive": true,
                    "autoWidth": false,
                    //"paging": true,
                    //"lengthChange": false,
                    "searching": true,
                    //  "orderable": true,
                    //"info": true,
                    "order": [],
                    "columnDefs": [{
                        "targets": [0, 3],
                        "orderable": false,
                    }]
                });
            }

        });


        $(function () {

            if ($.fn.dataTable.isDataTable('#tabDataCM_MCG')) {
                $('#tabDataCM_MCG').DataTable();
            }
            else {
                $('#tabDataCM_MCG').DataTable({
                    "responsive": true,
                    "autoWidth": false,
                    //"paging": true,
                    //"lengthChange": false,
                    "searching": true,
                    //  "orderable": true,
                    //"info": true,
                    "order": [],
                    "columnDefs": [{
                        "targets": [0, 4],
                        "orderable": false,
                    }]
                });
            }
        });

        $(function () {

            if ($.fn.dataTable.isDataTable('#tabDataCM_MCR')) {
                $('#tabDataCM_MCR').DataTable();
            }
            else {
                $('#tabDataCM_MCR').DataTable({
                    "responsive": true,
                    "autoWidth": false,
                    //"paging": true,
                    //"lengthChange": false,
                    "searching": true,
                    //  "orderable": true,
                    //"info": true,
                    "order": [],
                    "columnDefs": [{
                        "targets": [0, 4],
                        "orderable": false,
                    }]
                });
            }
        });

        $(function () {

            if ($.fn.dataTable.isDataTable('#tabDataCM_MRR')) {
                $('#tabDataCM_MRR').DataTable();
            }
            else {
                $('#tabDataCM_MRR').DataTable({
                    "responsive": true,
                    "autoWidth": false,
                    //"paging": true,
                    //"lengthChange": false,
                    "searching": true,
                    //  "orderable": true,
                    //"info": true,
                    "order": [],
                    "columnDefs": [{
                        "targets": [0, 3],
                        "orderable": false,
                    }]
                });
            }
        });

        $(function () {

            if ($.fn.dataTable.isDataTable('#tabDataCM_MCA')) {
                $('#tabDataCM_MCA').DataTable();
            }
            else {
                $('#tabDataCM_MCA').DataTable({
                    "responsive": true,
                    "autoWidth": false,
                    //"paging": true,
                    //"lengthChange": false,
                    "searching": true,
                    //  "orderable": true,
                    //"info": true,
                    "order": [],
                    "columnDefs": [{
                        "targets": [0, 3],
                        "orderable": false,
                    }]
                });
            }

        });

        $(function () {

            if ($.fn.dataTable.isDataTable('#tabDataCM_MCT')) {
                $('#tabDataCM_MCT').DataTable();
            }
            else {
                $('#tabDataCM_MCT').DataTable({
                    "responsive": true,
                    "autoWidth": false,
                    //"paging": true,
                    //"lengthChange": false,
                    "searching": true,
                    //  "orderable": true,
                    //"info": true,
                    "order": [],
                    "columnDefs": [{
                        "targets": [0, 5],
                        "orderable": false,
                    }]
                });
            }
        });


        $(function () {

            if ($.fn.dataTable.isDataTable('#tabDataCM_MTP')) {
                $('#tabDataCM_MTP').DataTable();
            }
            else {
                $('#tabDataCM_MTP').DataTable({
                    "responsive": true,
                    "autoWidth": false,
                    //"paging": true,
                    //"lengthChange": false,
                    "searching": true,
                    //  "orderable": true,
                    //"info": true,
                    "order": [],
                    "columnDefs": [{
                        "targets": [0, 5],
                        "orderable": false,
                    }]
                });
            }

        });




    </script>


    <script>
        $(document).on('change', '#_NationalityId', function (e) {
            e.preventDefault();

          //  alert('_ctryId: ');
            var ctryId = $("#_NationalityId").val();
          //  alert('_ctryId: ' + ctryId);


            $('#_HometownRegionId').empty();

            //alert('...')
            var url = '@Url.Content("~/")' + 'ChurchMembers/GetCountryRegionsByCountry';

            //GetCountryRegionsByCountry( int? ctryId, bool addEmpty = false)

            //    var  url: '@Url.Action("GetCountryRegionsByCountry", "ChurchMembers")';

            var hdnTempRegId = $('#_HometownRegionId').val();
           // var tempRegId = $('#_HometownRegionId').val();
           // alert('tempRegId: ' + tempRegId)
            $('#_HometownRegionId').empty();
            $.getJSON(url, { ctryId: ctryId, defCtryRegid: hdnTempRegId, addEmpty: true }, function (data) {
                if (Object.keys(data).length > 0)
                {
                    var items = '';
                    $.each(data, function (i, ctryReg) {
                        items += "<option value='" + ctryReg.value + "'>" + ctryReg.text + "</option>";   // alert(items);
                    });
                   // items += "<option value=''> Select </option>";
                    $('#_HometownRegionId').html(items);
                    $('#_HometownRegionId').val(hdnTempRegId);
                }
            });
        })


        $(document).on('change', '#_CountryId_MemCI', function (e) {
                e.preventDefault();

                var ctryId = $("#_CountryId_MemCI").val();

            @*// var url = '@Url.Content("~/")' + 'ChurchMembers/GetCountryRegionsByCountry';
            // var  url: '@Url.Action("GetCountryRegionsByCountry", "ChurchMembers")';*@

            var url = '@Url.Content("~/")' + 'ChurchMembers/GetCountryRegionsByCountry';

            var hdnTempRegId = $('#_RegionId_MemCI').val();
           // var tempRegId = $('#_RegionId_MemCI').val();
          //  alert('tempRegId: ' + tempRegId)
            $('#_RegionId_MemCI').empty();
            $.getJSON(url, { ctryId: ctryId, defCtryRegid: hdnTempRegId, addEmpty: true }, function (data) {
                    if (Object.keys(data).length > 0)
                    {
                        var items = '';
                        $.each(data, function (i, ctryReg) {
                            items += "<option value='" + ctryReg.value + "'>" + ctryReg.text + "</option>";   // alert(items);
                        });
                       // items += "<option value=''> Select </option>";
                        $('#_RegionId_MemCI').html(items);
                        $('#_RegionId_MemCI').val(hdnTempRegId);
                    }
                });

        });


        $(document).on('change', '#_MaritalStatus', function (e) {
            e.preventDefault();

            var strVal = $("#_MaritalStatus").val();
            $('#_divMarriageType').prop('hidden', strVal != 'M');
          //  $('#_divMarriageRegNo').prop('hidden', strVal != 'M');
            if (strVal == 'M') {
                var strVal2 = $("#_MarriageType").val();
                $('#_divMarriageRegNo').prop('hidden', strVal2 != 'O');
            }
            else {
                $('#_divMarriageRegNo').prop('hidden', 'hidden');
            }
        });

        $(document).on('change', '#_MarriageType', function (e) {
            e.preventDefault();

            var strVal = $("#_MarriageType").val();
            $('#_divMarriageRegNo').prop('hidden', strVal != 'O');
        });

        $(document).on('change', '#_IdTypeId', function (e) {
            e.preventDefault();
            var strVal = $("#_IdTypeId").val();
           // alert('hide id: ' + strVal == null || strVal == '')
           // var hideDiv = (strVal == null || strVal == '');
            $('#_divNational_IdNum').prop('hidden', (strVal == null || strVal == ''));
        });

        $(document).on('change', '#chk_ResAddrSameAsPostAddr_MemCI', function (e) {
            e.preventDefault();
           // alert('_isAddrSame: ');
            var _isAddrSame = $("#chk_ResAddrSameAsPostAddr_MemCI").is(":checked");
          //  alert('_isAddrSame: ' + _isAddrSame);
            $('#_divPostalAddress_MemCI').prop('hidden', _isAddrSame);
        })

        $(document).on('change', '#chk_ResAddrSameAsPostAddr_vdMemCI', function (e) {
            e.preventDefault();
            // alert('_isAddrSame: ');
            var _isAddrSame = $("#chk_ResAddrSameAsPostAddr_vdMemCI").is(":checked");
            //  alert('_isAddrSame: ' + _isAddrSame);
            $('#_divPostalAddress_vdMemCI').prop('hidden', _isAddrSame);
        })

         $(document).on('change', '#_MobilePhone1', function (e) {
            e.preventDefault();

             var _isDisable = $("#_MobilePhone1").val() == '';
             $('#_MobilePhone2').prop('disabled', _isDisable);
         })

        $(document).on('change', '#_vdMobilePhone1', function (e) {
            e.preventDefault();

            var _isDisable = $("#_vdMobilePhone1").val() == '';
             $('#_vdMobilePhone2').prop('disabled', _isDisable);
        })

        $(document).on('click', '#btnAddContactDetail', function (e) {
            e.preventDefault();
          //  alert('clicked...: ');

            var str = $("#btnAddContactDetail").text();
            var _isHide = str.includes("Less");
            var btnStr = 'Less Contact Detail';
            if (_isHide) { btnStr = 'Add Contact Detail'; }

          //  alert('_isHide: ' + _isHide + '  .. ' + btnStr);
            $('#_divMemContactInfo').prop('hidden', _isHide);

            document.querySelector('#btnAddContactDetail').innerText = btnStr;
        })



        var calcMemAge = function (dob) {
            var strAge = '';
            if (dob != null) {
                var dt = dob.value;
                //alert("dob: " + dt);
                strAge = calcMemDateDiff(dt, new Date());
            }

            // alert('age: ' + strAge);
            $("#_strMemberAge").val(strAge);
        }

        var calcMemAgeByVal = function (dob) {
            var strAge = '';
            if (dob != null) {
                var dt = dob;
              //  alert("dob: " + dt);
                strAge = calcMemDateDiff(dt, new Date());
            }

            // alert('age: ' + strAge);
            $("#_strMemberAge").val(strAge);
        }

        var calcMemLongevity = function (dt_enroll) {
            var strLong = '';
            if (dt_enroll != null) {
                var dt = dt_enroll.value;
                var dt2 = new Date();

                var valType = $("#chk_IsCurrentMember_moMCL_CL").is(":checked");
                if (!valType) {
                    dt2 = $("#_DateDeparted_moMCL_CL").val();
                }

                // alert("dt_enroll: " + dt);
                // alert("dt_depart: " + dt2);

                if (dt != null && dt2 != null)
                    strLong = calcMemDateDiff(dt, dt2);
            }
            // alert('long: ' + strLong);
            $("#_strLongevity").val(strLong);
        }


        var ___calcMemDateDiff = function (dt1, dt2) {

            if (dt2 < dt1)
                if (castToString)
                    return "N/A";
                else
                    return 0;


            // var dt = dt1.value;
            //    alert("dt conv: " + dt1);
            //var mdate = $("#birth_date").val().toString();
            var mdate = dt1.toString();
            var yearThen = parseInt(mdate.substring(0, 4), 10);
            var monthThen = parseInt(mdate.substring(5, 7), 10);
            var dayThen = parseInt(mdate.substring(8, 10), 10);

            //var dt2 = new Date();
            var birthday = new Date(yearThen, monthThen, dayThen);

            var differenceInMilisecond = dt2.valueOf() - birthday.valueOf();

            var year_age = Math.floor(differenceInMilisecond / 31536000000);
            //  var day_age = Math.floor((differenceInMilisecond % 31536000000) / 86400000);

            //if ((today.getMonth() == birthday.getMonth()) && (today.getDate() == birthday.getDate())) {
            //    alert("Happy B'day!!!");
            //}
            var strDiff = '';
            if (year_age >= 0) {
                //var month_age = Math.floor(day_age / 30);

                //day_age = day_age % 30;

                if (isNaN(year_age)) { // || isNaN(month_age) || isNaN(day_age)) {
                    strDiff = 'N/A';

                    // $("#_strMemberAge").text("Invalid birthday - Please try again!");
                }
                else {
                    strDiff = year_age + ' yrs';

                    //$("#exact_age").html("You are<br/><span id=\"age\">" + year_age + " years " + month_age + " months " + day_age + " days</span> old");
                }
            }

            return strDiff;

            // alert('age: ' + strAge);
            //$("#_strMemberAge").val(strAge);
        }


        var calcMemDateDiff = function (dt1, dt2) {
            // var dt = dt1.value;
         //    alert("dt conv: " + dt1);
            //var mdate = $("#birth_date").val().toString();
            var mdate = dt1.toString();

            var yearThen = parseInt(mdate.substring(0, 4), 10);
            var monthThen = parseInt(mdate.substring(5, 7), 10);
            var dayThen = parseInt(mdate.substring(8, 10), 10);

            //var dt2 = new Date();
            var birthday = new Date(yearThen, monthThen - 1, dayThen);

            var differenceInMilisecond = dt2.valueOf() - birthday.valueOf();

            var year_age = Math.floor(differenceInMilisecond / 31536000000);
            //  var day_age = Math.floor((differenceInMilisecond % 31536000000) / 86400000);

            //if ((today.getMonth() == birthday.getMonth()) && (today.getDate() == birthday.getDate())) {
            //    alert("Happy B'day!!!");
            //}
            var strDiff = '';
            if (year_age >= 0) {
                //var month_age = Math.floor(day_age / 30);

                //day_age = day_age % 30;

                if (isNaN(year_age)) { // || isNaN(month_age) || isNaN(day_age)) {
                    strDiff = 'N/A';

                    // $("#_strMemberAge").text("Invalid birthday - Please try again!");
                }
                else {
                    strDiff = year_age + ' years';

                    //$("#exact_age").html("You are<br/><span id=\"age\">" + year_age + " years " + month_age + " months " + day_age + " days</span> old");
                }
            }

            return strDiff;

            // alert('age: ' + strAge);
            //$("#_strMemberAge").val(strAge);
        }

    </script>

    <!-- CM Lookup -->
    <script>
        var LaunchMemberLookup = function () {
            alert("lookup member...")
        }
    </script>

    <!-- CB Browser -->
    <script>
        ////// invoke this piece to browse for CB...
        ///

         $(document).on('click', '#btnOK_ImpCB', function (e) {
            e.preventDefault();

            //  alert('clicked... ')

            $('#_divAlertUser').prop('hidden', 'hidden');


            var _resId = $('#_oTargetCBId_TCB').val();
            // alert('_resId: ' + _resId);
            if (_resId == null || _resId == '') {

                var res = document.getElementById('_lblTargetCB_TCB').innerHTML;
                DisplayErrorInfo("Please select the " + res.toLowerCase() + " to insert.");

                return false;
            }

            //  alert('... inserting')  ... CB
            if ($("#_strName_TCB").val() != null) {
                var _strCB = document.getElementById('_strTargetCB_TCB').innerHTML;   // value to insert
                if (_strCB == null || _strCB == '') _strCB = 'None. (choose congregation)';
                ///
                var _strName = "#" + $("#_strName_TCB").val();  // target field to insert
                $(_strName).prop("disabled", false);
                $(_strName).val(_strCB);
                $(_strName).prop("disabled", true)
            }

            if ($("#_strId_TCB").val() != null) {
                var _numCBId = $('#_oTargetCBId_TCB').val(); // value to insert
                ///
                var _strId = "#" + $("#_strId_TCB").val();  // target field to insert
                $(_strId).val(_numCBId);
            }

            //  alert('... inserting')  ... CL    "Church Body (" + Model.strTargetCL + ")";
            if ($("#_strCLName_TCB").val() != '') {
                var _strTag = 'Church Body';
                if ($("#_strCLTag_TCB").val() != '')
                    _strTag = $("#_strCLTag_TCB").val();
                var _strCL = _strTag;  // "Church Body";
                if ($('#_oTargetCLId_TCB').val() != '') {
                    _strCL = document.getElementById("_oTargetCLId_TCB").options[document.getElementById('_oTargetCLId_TCB').selectedIndex].text;
                    _strCL = _strTag + " (" + _strCL + ")"; // value to insert
                }
                ///
                var _strCLName = "#" + $("#_strCLName_TCB").val();  // target field to insert
                $(_strCLName).prop("disabled", false);
                $(_strCLName).val(_strCL);
                $(_strCLName).prop("disabled", true)
            }

            if ($("#_strCLId_TCB").val() != '') {
                var _numCLId = $('#_oTargetCLId_TCB').val();  // value to insert
                ///
                var _strCLId = "#" + $("#_strCLId_TCB").val();  // target field to insert
                $(_strCLId).val(_numCLId);
            }


             $('#_divAlertUser').prop('hidden', false);

         })

         $(document).on('click', '#_btnLoadTargetCLId_TCB', function (e) {
                e.preventDefault();

            //    alert('reload clicked... ')
            $('#_divAlertUser').prop('hidden', 'hidden');

                triggerChurchLevel_TCB();
               // document.getElementById("_btnLoadTargetCLId_TCB").click();
            })

         var ImportTargetCB = function (_oAppGloOwnId, _oChurchBodyId, _strId_TCB, _strName_TCB, _strCLId_TCB, _strCLName_TCB, _strCLTag_TCB = "Church Body") {

          // alert('importing...');
           // alert('addORedit.. ' + currId + ' ..currDenomId: ' + currDenomId + ' ..currChurchBodyId: ' + currChurchBodyId + ' .._strItemName: ' + _strItemName);

            //alert('currDenomId... ' + currDenomId)
            //alert('currChurchBodyId... ' + currChurchBodyId)

            //var currAGOId_Logged = $("#_oAppGloOwnId_Logged").data("value");   // _hdnAppGlobalOwnerId
            //var currCBId_Logged = $("#_oChurchBodyId_Logged").data("value");

             if (_oAppGloOwnId == null) _oAppGloOwnId = $("#_AppGlobalOwnerId").val();
             if (_oAppGloOwnId == null) _oAppGloOwnId = $("#_oAppGloOwnId_Logged").data("value");  //

             if (_oChurchBodyId == null) _oChurchBodyId = $("#_ChurchBodyId").val();
             if (_oChurchBodyId == null) _oChurchBodyId = $("#_oChurchBodyId_Logged").data("value");

            //var currUserId_Logged = $("#_oUserId_Logged").data("value");
            //
            var strId = "#" + _strId_TCB;
             var _currTargetCBId = $(strId).val();

             //var strCLId = "#" + _strCLId_TCB;
             //var _currTargetCLId = $(strCLId).val();

           //alert('strId: ' + strId)
           //alert('_oAppGloOwnId: ' + _oAppGloOwnId)
           //alert('_oChurchBodyId: ' + _oChurchBodyId)
           //alert('currTargetCBId: ' + _currTargetCBId)
           //alert('_strCLTag_TCB: ' + _strCLTag_TCB)
          // alert('_strCLId_TCB: ' + _strCLId_TCB)

            if (_oAppGloOwnId < 0) _oAppGloOwnId = null;
            if (_oChurchBodyId < 0) _oChurchBodyId = null;
            if (_currTargetCBId < 0) _currTargetCBId = null;
           //  if (_currTargetCLId < 0) _currTargetCLId = null;

           // public IActionResult GetTargetCB(int ? oAppGloOwnId = null, int ? oChurchBodyId = null, int ? oTargetCBId = null,
             //   string strId_TCB = "", string strName_TCB = "", string strCLId_TCB = "", string strCLName_TCB = "", string strCLTag_TCB = "Church Body")

             var url = "@Url.Action("GetTargetCB", "ChurchMembers")?oAppGloOwnId=" + _oAppGloOwnId + "&oChurchBodyId=" + _oChurchBodyId + "&oTargetCBId=" + _currTargetCBId +  // "&oTargetCLId=" + _currTargetCLId +
                "&strId_TCB=" + _strId_TCB + "&strName_TCB=" + _strName_TCB + "&strCLId_TCB=" + _strCLId_TCB + "&strCLName_TCB=" + _strCLName_TCB + "&strCLTag_TCB=" + _strCLTag_TCB;

       //alert(url)

            // if (currId > 0) { document.querySelector('#btnSaveChanges').innerHTML = 'Update'; }
          //  if (currId > 0) { $('#btnSaveChanges').html('Update'); }

                      //  alert(url)

            //$('#divPopModal_AddEdit').modal({
            //                backdrop: 'static',
            //                keyboard: false
            //            });

                        //$('#divPopModal_AddEdit').modal({
                        //    backdrop: false,
                        //    show: true
                        //});

            $('#divPopModal_ImpCB .modal-dialog').draggable({
                            handle: ".modal-header"
                        });

                        //alert('loading modal...')
                        //$("#_setIndex").val(setIndex);
                        //$('#divModalBody_AddEdit').load(url, function () {

         var _strTitle = 'Browse Congregation (or Head-unit)';

            $('#divPopModal_ImpCB .modal-body').load(url, function () {
                $('#divPopModal_ImpCB .modal-title').html(_strTitle);

               ///
              //  $('#_oTargetCLId_TCB').val(_currTargetCLId);

                triggerChurchLevel_TCB();


                //$('#_strTargetCB_TCB').change();
               //triggerParentUnitCL_CU();
               //triggerChurchLevel_sup_CU();
               //$('#_OrgType_CU').change();

             $("#divPopModal_ImpCB").modal('show');
           });

        };


         $(document).on('change', '#_ChurchBodyId_10_TCB', function (e) {
            e.preventDefault();

            // alert(' CB10 triggered...')

              var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
           // alert('con oCBLevelCount: ' + oCBLevelCount);
            if (oCBLevelCount == 10) {  // Congregation
                var str1 = "None. (choose congregation)";
                if ($('#_ChurchBodyId_10_TCB').val() != '') {
                    str1 = document.getElementById("_ChurchBodyId_10_TCB").options[document.getElementById('_ChurchBodyId_10_TCB').selectedIndex].text;
                }
               // alert('str CON: ' + str1)
                document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_10_TCB').val());
                return false;
            }

           @*//  alert('_ChurchBodyId_10_TCB: ' + $("#_ChurchBodyId_10_TCB").val())

             var currDenomId = $("#_oAppGloOwnId_TCB").val();
           // var currDenomId = $("#_hdnAppGloOwnId").val();
             var parentCBId = $("#_ChurchBodyId_10_TCB").val();

             var hdn_ChurchBodyId_11 = $('#_ChurchBodyId_11').val();
           //  var hdn_ChurchBodyId_11 = $('#hdn_ChurchBodyId_11').val();
           //  alert('10. parentCBId: ' + parentCBId);

             var url = '@Url.Action("GetChurchBodyListByParentBody", "ChurchMembers")';
            $('#_ChurchBodyId_11').empty();

             //  public JsonResult GetChurchBodyListByParentBody(int? oParentCBId, int? oAppGloOwnId, string strOrgType = null, bool addEmpty = false)
             $.getJSON(url, { oParentCBId: parentCBId, oAppGloOwnId: currDenomId, strOrgType: 'CH', addEmpty: true }, function (data) {
                if (Object.keys(data).length > 0) {
                    var items = '';
                    $.each(data, function (i, oData) {
                        items += "<option value='" + oData.value + "'>" + oData.text + "</option>";   // alert(items);
                    });
                    // items += "<option value=''> Select </option>";
                    $('#_ChurchBodyId_11').html(items);
                   // alert('hdn11: ' + hdn_ChurchBodyId_11)
                    $('#_ChurchBodyId_11').val(hdn_ChurchBodyId_11);

                    var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
                    if (oCBLevelCount > 10) {
                        $('#_ChurchBodyId_10_TCB').change();
                    }
                    else {
                        if ($('#_ChurchBodyId_10_TCB').val() != '') {
                            str1 = document.getElementById("_ChurchBodyId_10_TCB").options[document.getElementById('_ChurchBodyId_10_TCB').selectedIndex].text;
                        }

                     //   alert('str assem: ' + str1)
                      //  alert('str assem id: ' + $('#_ChurchBodyId_10_TCB').val())
                        if (str1 == null || str1 == '') str1 = 'choose congregation';
                        document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                        $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_10_TCB').val());
                    }

                }
            });*@
        })

         $(document).on('change', '#_ChurchBodyId_9_TCB', function (e) {
            e.preventDefault();

            // alert(' CB9 triggered...')

              var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
           // alert('con oCBLevelCount: ' + oCBLevelCount);
            if (oCBLevelCount == 9) {  // Congregation
                var str1 = "None. (choose congregation)";
                if ($('#_ChurchBodyId_9_TCB').val() != '') {
                    str1 = document.getElementById("_ChurchBodyId_9_TCB").options[document.getElementById('_ChurchBodyId_9_TCB').selectedIndex].text;
                }
               // alert('str CON: ' + str1)
                document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_9_TCB').val());
                return false;
            }

           //  alert('_ChurchBodyId_9_TCB: ' + $("#_ChurchBodyId_9_TCB").val())

             var currDenomId = $("#_oAppGloOwnId_TCB").val();
           // var currDenomId = $("#_hdnAppGloOwnId").val();
             var parentCBId = $("#_ChurchBodyId_9_TCB").val();

             //  var hdn_ChurchBodyId_10_TCB = $('#_ChurchBodyId_10_TCB').val();
           var hdn_ChurchBodyId_10_TCB = $('#hdn_ChurchBodyId_10_TCB').val();
           //  alert('9. parentCBId: ' + parentCBId);

             var url = '@Url.Action("GetChurchBodyListByParentBody", "ChurchMembers")';
            $('#_ChurchBodyId_10_TCB').empty();

             //  public JsonResult GetChurchBodyListByParentBody(int? oParentCBId, int? oAppGloOwnId, string strOrgType = null, bool addEmpty = false)
             $.getJSON(url, { oParentCBId: parentCBId, oAppGloOwnId: currDenomId, strOrgType: 'CH', addEmpty: true }, function (data) {
                if (Object.keys(data).length > 0) {
                    var items = '';
                    $.each(data, function (i, oData) {
                        items += "<option value='" + oData.value + "'>" + oData.text + "</option>";   // alert(items);
                    });
                    // items += "<option value=''> Select </option>";
                    $('#_ChurchBodyId_10_TCB').html(items);
                   // alert('hdn10: ' + hdn_ChurchBodyId_10_TCB)
                    $('#_ChurchBodyId_10_TCB').val(hdn_ChurchBodyId_10_TCB);

                    var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
                    if (oCBLevelCount > 9) {
                        $('#_ChurchBodyId_9_TCB').change();
                    }
                    else {
                        if ($('#_ChurchBodyId_9_TCB').val() != '') {
                            str1 = document.getElementById("_ChurchBodyId_9_TCB").options[document.getElementById('_ChurchBodyId_9_TCB').selectedIndex].text;
                        }

                     //   alert('str assem: ' + str1)
                      //  alert('str assem id: ' + $('#_ChurchBodyId_9_TCB').val())
                        if (str1 == null || str1 == '') str1 = 'None. (choose congregation)';
                        document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                        $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_9_TCB').val());
                    }

                }
            });
        })

         $(document).on('change', '#_ChurchBodyId_8_TCB', function (e) {
            e.preventDefault();

            // alert(' CB8 triggered...')

              var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
           // alert('con oCBLevelCount: ' + oCBLevelCount);
            if (oCBLevelCount == 8) {  // Congregation
                var str1 = "None. (choose congregation)";
                if ($('#_ChurchBodyId_8_TCB').val() != '') {
                    str1 = document.getElementById("_ChurchBodyId_8_TCB").options[document.getElementById('_ChurchBodyId_8_TCB').selectedIndex].text;
                }
               // alert('str CON: ' + str1)
                document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_8_TCB').val());
                return false;
            }

           //  alert('_ChurchBodyId_8_TCB: ' + $("#_ChurchBodyId_8_TCB").val())

             var currDenomId = $("#_oAppGloOwnId_TCB").val();
           // var currDenomId = $("#_hdnAppGloOwnId").val();
             var parentCBId = $("#_ChurchBodyId_8_TCB").val();

            //   var hdn_ChurchBodyId_9_TCB = $('#_ChurchBodyId_9_TCB').val();
           var hdn_ChurchBodyId_9_TCB = $('#hdn_ChurchBodyId_9_TCB').val();
           //  alert('8. parentCBId: ' + parentCBId);

             var url = '@Url.Action("GetChurchBodyListByParentBody", "ChurchMembers")';
            $('#_ChurchBodyId_9_TCB').empty();

             //  public JsonResult GetChurchBodyListByParentBody(int? oParentCBId, int? oAppGloOwnId, string strOrgType = null, bool addEmpty = false)
             $.getJSON(url, { oParentCBId: parentCBId, oAppGloOwnId: currDenomId, strOrgType: 'CH', addEmpty: true }, function (data) {
                if (Object.keys(data).length > 0) {
                    var items = '';
                    $.each(data, function (i, oData) {
                        items += "<option value='" + oData.value + "'>" + oData.text + "</option>";   // alert(items);
                    });
                    // items += "<option value=''> Select </option>";
                    $('#_ChurchBodyId_9_TCB').html(items);
                   // alert('hdn9: ' + hdn_ChurchBodyId_9_TCB)
                    $('#_ChurchBodyId_9_TCB').val(hdn_ChurchBodyId_9_TCB);

                    var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
                    if (oCBLevelCount > 8) {
                        $('#_ChurchBodyId_8_TCB').change();
                    }
                    else {
                        if ($('#_ChurchBodyId_8_TCB').val() != '') {
                            str1 = document.getElementById("_ChurchBodyId_8_TCB").options[document.getElementById('_ChurchBodyId_8_TCB').selectedIndex].text;
                        }

                     //   alert('str assem: ' + str1)
                      //  alert('str assem id: ' + $('#_ChurchBodyId_8_TCB').val())
                        if (str1 == null || str1 == '') str1 = 'None. (choose congregation)';
                        document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                        $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_8_TCB').val());
                    }

                }
            });
        })

         $(document).on('change', '#_ChurchBodyId_7_TCB', function (e) {
            e.preventDefault();

            // alert(' CB7 triggered...')

              var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
           // alert('con oCBLevelCount: ' + oCBLevelCount);
            if (oCBLevelCount == 7) {  // Congregation
                var str1 = "None. (choose congregation)";
                if ($('#_ChurchBodyId_7_TCB').val() != '') {
                    str1 = document.getElementById("_ChurchBodyId_7_TCB").options[document.getElementById('_ChurchBodyId_7_TCB').selectedIndex].text;
                }
               // alert('str CON: ' + str1)
                document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_7_TCB').val());
                return false;
            }

           //  alert('_ChurchBodyId_7_TCB: ' + $("#_ChurchBodyId_7_TCB").val())

             var currDenomId = $("#_oAppGloOwnId_TCB").val();
           // var currDenomId = $("#_hdnAppGloOwnId").val();
             var parentCBId = $("#_ChurchBodyId_7_TCB").val();

            //   var hdn_ChurchBodyId_8_TCB = $('#_ChurchBodyId_8_TCB').val();
           var hdn_ChurchBodyId_8_TCB = $('#hdn_ChurchBodyId_8_TCB').val();
           //  alert('7. parentCBId: ' + parentCBId);

             var url = '@Url.Action("GetChurchBodyListByParentBody", "ChurchMembers")';
            $('#_ChurchBodyId_8_TCB').empty();

             //  public JsonResult GetChurchBodyListByParentBody(int? oParentCBId, int? oAppGloOwnId, string strOrgType = null, bool addEmpty = false)
             $.getJSON(url, { oParentCBId: parentCBId, oAppGloOwnId: currDenomId, strOrgType: 'CH', addEmpty: true }, function (data) {
                if (Object.keys(data).length > 0) {
                    var items = '';
                    $.each(data, function (i, oData) {
                        items += "<option value='" + oData.value + "'>" + oData.text + "</option>";   // alert(items);
                    });
                    // items += "<option value=''> Select </option>";
                    $('#_ChurchBodyId_8_TCB').html(items);
                   // alert('hdn8: ' + hdn_ChurchBodyId_8_TCB)
                    $('#_ChurchBodyId_8_TCB').val(hdn_ChurchBodyId_8_TCB);

                    var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
                    if (oCBLevelCount > 7) {
                        $('#_ChurchBodyId_7_TCB').change();
                    }
                    else {
                        if ($('#_ChurchBodyId_7_TCB').val() != '') {
                            str1 = document.getElementById("_ChurchBodyId_7_TCB").options[document.getElementById('_ChurchBodyId_7_TCB').selectedIndex].text;
                        }

                     //   alert('str assem: ' + str1)
                      //  alert('str assem id: ' + $('#_ChurchBodyId_7_TCB').val())
                        if (str1 == null || str1 == '') str1 = 'None. (choose congregation)';
                        document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                        $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_7_TCB').val());
                    }

                }
            });
        })

         $(document).on('change', '#_ChurchBodyId_6_TCB', function (e) {
            e.preventDefault();

            // alert(' CB6 triggered...')

              var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
           // alert('con oCBLevelCount: ' + oCBLevelCount);
            if (oCBLevelCount == 6) {  // Congregation
                var str1 = "None. (choose congregation)";
                if ($('#_ChurchBodyId_6_TCB').val() != '') {
                    str1 = document.getElementById("_ChurchBodyId_6_TCB").options[document.getElementById('_ChurchBodyId_6_TCB').selectedIndex].text;
                }
               // alert('str CON: ' + str1)
                document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_6_TCB').val());
                return false;
            }

           //  alert('_ChurchBodyId_6_TCB: ' + $("#_ChurchBodyId_6_TCB").val())

             var currDenomId = $("#_oAppGloOwnId_TCB").val();
           // var currDenomId = $("#_hdnAppGloOwnId").val();
             var parentCBId = $("#_ChurchBodyId_6_TCB").val();

             // var hdn_ChurchBodyId_7_TCB = $('#_ChurchBodyId_7_TCB').val();
            var hdn_ChurchBodyId_7_TCB = $('#hdn_ChurchBodyId_7_TCB').val();
           //  alert('6. parentCBId: ' + parentCBId);

             var url = '@Url.Action("GetChurchBodyListByParentBody", "ChurchMembers")';
            $('#_ChurchBodyId_7_TCB').empty();

             //  public JsonResult GetChurchBodyListByParentBody(int? oParentCBId, int? oAppGloOwnId, string strOrgType = null, bool addEmpty = false)
             $.getJSON(url, { oParentCBId: parentCBId, oAppGloOwnId: currDenomId, strOrgType: 'CH', addEmpty: true }, function (data) {
                if (Object.keys(data).length > 0) {
                    var items = '';
                    $.each(data, function (i, oData) {
                        items += "<option value='" + oData.value + "'>" + oData.text + "</option>";   // alert(items);
                    });
                    // items += "<option value=''> Select </option>";
                    $('#_ChurchBodyId_7_TCB').html(items);
                   // alert('hdn7: ' + hdn_ChurchBodyId_7_TCB)
                    $('#_ChurchBodyId_7_TCB').val(hdn_ChurchBodyId_7_TCB);

                    var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
                    if (oCBLevelCount > 6) {
                        $('#_ChurchBodyId_6_TCB').change();
                    }
                    else {
                        if ($('#_ChurchBodyId_6_TCB').val() != '') {
                            str1 = document.getElementById("_ChurchBodyId_6_TCB").options[document.getElementById('_ChurchBodyId_6_TCB').selectedIndex].text;
                        }

                     //   alert('str assem: ' + str1)
                      //  alert('str assem id: ' + $('#_ChurchBodyId_6_TCB').val())
                        if (str1 == null || str1 == '') str1 = 'None. (choose congregation)';
                        document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                        $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_6_TCB').val());
                    }

                }
            });
        })

         $(document).on('change', '#_ChurchBodyId_5_TCB', function (e) {
            e.preventDefault();

            // alert(' CB5 triggered...')

              var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
           // alert('con oCBLevelCount: ' + oCBLevelCount);
            if (oCBLevelCount == 5) {  // Congregation
                var str1 = "None. (choose congregation)";
                if ($('#_ChurchBodyId_5_TCB').val() != '') {
                    str1 = document.getElementById("_ChurchBodyId_5_TCB").options[document.getElementById('_ChurchBodyId_5_TCB').selectedIndex].text;
                }
               // alert('str CON: ' + str1)
                document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_5_TCB').val());
                return false;
            }

           //  alert('_ChurchBodyId_5_TCB: ' + $("#_ChurchBodyId_5_TCB").val())

             var currDenomId = $("#_oAppGloOwnId_TCB").val();
           // var currDenomId = $("#_hdnAppGloOwnId").val();
             var parentCBId = $("#_ChurchBodyId_5_TCB").val();

            //    var hdn_ChurchBodyId_6_TCB = $('#_ChurchBodyId_6_TCB').val();
          var hdn_ChurchBodyId_6_TCB = $('#hdn_ChurchBodyId_6_TCB').val();
           //  alert('5. parentCBId: ' + parentCBId);

             var url = '@Url.Action("GetChurchBodyListByParentBody", "ChurchMembers")';
            $('#_ChurchBodyId_6_TCB').empty();

             //  public JsonResult GetChurchBodyListByParentBody(int? oParentCBId, int? oAppGloOwnId, string strOrgType = null, bool addEmpty = false)
             $.getJSON(url, { oParentCBId: parentCBId, oAppGloOwnId: currDenomId, strOrgType: 'CH', addEmpty: true }, function (data) {
                if (Object.keys(data).length > 0) {
                    var items = '';
                    $.each(data, function (i, oData) {
                        items += "<option value='" + oData.value + "'>" + oData.text + "</option>";   // alert(items);
                    });
                    // items += "<option value=''> Select </option>";
                    $('#_ChurchBodyId_6_TCB').html(items);
                   // alert('hdn6: ' + hdn_ChurchBodyId_6_TCB)
                    $('#_ChurchBodyId_6_TCB').val(hdn_ChurchBodyId_6_TCB);

                    var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
                    if (oCBLevelCount > 5) {
                        $('#_ChurchBodyId_5_TCB').change();
                    }
                    else {
                        if ($('#_ChurchBodyId_5_TCB').val() != '') {
                            str1 = document.getElementById("_ChurchBodyId_5_TCB").options[document.getElementById('_ChurchBodyId_5_TCB').selectedIndex].text;
                        }

                     //   alert('str assem: ' + str1)
                      //  alert('str assem id: ' + $('#_ChurchBodyId_5_TCB').val())
                        if (str1 == null || str1 == '') str1 = 'None. (choose congregation)';
                        document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                        $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_5_TCB').val());
                    }

                }
            });
        })

         $(document).on('change', '#_ChurchBodyId_4_TCB', function (e) {
            e.preventDefault();

            // alert(' CB4 triggered...')

              var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
           // alert('con oCBLevelCount: ' + oCBLevelCount);
            if (oCBLevelCount == 4) {  // Congregation
                var str1 = "None. (choose congregation)";
                if ($('#_ChurchBodyId_4_TCB').val() != '') {
                    str1 = document.getElementById("_ChurchBodyId_4_TCB").options[document.getElementById('_ChurchBodyId_4_TCB').selectedIndex].text;
                }
               // alert('str CON: ' + str1)
                document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_4_TCB').val());
                return false;
            }

           //  alert('_ChurchBodyId_4_TCB: ' + $("#_ChurchBodyId_4_TCB").val())

             var currDenomId = $("#_oAppGloOwnId_TCB").val();
           // var currDenomId = $("#_hdnAppGloOwnId").val();
             var parentCBId = $("#_ChurchBodyId_4_TCB").val();

            //   var hdn_ChurchBodyId_5_TCB = $('#_ChurchBodyId_5_TCB').val();
           var hdn_ChurchBodyId_5_TCB = $('#hdn_ChurchBodyId_5_TCB').val();
           //  alert('4. parentCBId: ' + parentCBId);

             var url = '@Url.Action("GetChurchBodyListByParentBody", "ChurchMembers")';
            $('#_ChurchBodyId_5_TCB').empty();

             //  public JsonResult GetChurchBodyListByParentBody(int? oParentCBId, int? oAppGloOwnId, string strOrgType = null, bool addEmpty = false)
             $.getJSON(url, { oParentCBId: parentCBId, oAppGloOwnId: currDenomId, strOrgType: 'CH', addEmpty: true }, function (data) {
                if (Object.keys(data).length > 0) {
                    var items = '';
                    $.each(data, function (i, oData) {
                        items += "<option value='" + oData.value + "'>" + oData.text + "</option>";   // alert(items);
                    });
                    // items += "<option value=''> Select </option>";
                    $('#_ChurchBodyId_5_TCB').html(items);
                   // alert('hdn5: ' + hdn_ChurchBodyId_5_TCB)
                    $('#_ChurchBodyId_5_TCB').val(hdn_ChurchBodyId_5_TCB);

                    var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
                    if (oCBLevelCount > 5) {
                        $('#_ChurchBodyId_5_TCB').change();
                    }
                    else {
                        if ($('#_ChurchBodyId_5_TCB').val() != '') {
                            str1 = document.getElementById("_ChurchBodyId_5_TCB").options[document.getElementById('_ChurchBodyId_5_TCB').selectedIndex].text;
                        }

                       // alert('str assem: ' + str1)
                     //   alert('str assem id: ' + $('#_ChurchBodyId_5_TCB').val())
                        if (str1 == null || str1 == '') str1 = 'None. (choose congregation)';
                        document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                        $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_5_TCB').val());
                    }

                    //if ($("#_div_ChurchBodyId_6_TCB").is(":hidden") == false) {
                   // var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
                   // if (oCBLevelCount > 4) {
                    //    $('#_ChurchBodyId_5_TCB').change();
                    //}
                }
            });


        })

         $(document).on('change', '#_ChurchBodyId_3_TCB', function (e) {
            e.preventDefault();

           //  alert(' CB3 triggered...')

              var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
           // alert('dis oCBLevelCount: ' + oCBLevelCount);
            if (oCBLevelCount == 3) {  // district
                var str1 = "None. (choose congregation)";
                if ($('#_ChurchBodyId_3_TCB').val() != '') {
                    str1 = document.getElementById("_ChurchBodyId_3_TCB").options[document.getElementById('_ChurchBodyId_3_TCB').selectedIndex].text;
                }
               // alert('str DIS: ' + str1)
                document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_3_TCB').val());
                return false;
            }

            var currDenomId = $("#_oAppGloOwnId_TCB").val();
           // var currDenomId = $("#_hdnAppGloOwnId").val();
             var parentCBId = $("#_ChurchBodyId_3_TCB").val();

             //var hdn_ChurchBodyId_4_TCB = $('#_ChurchBodyId_4_TCB').val();
             var hdn_ChurchBodyId_4_TCB = $('#hdn_ChurchBodyId_4_TCB').val();
           //  alert('_ChurchBodyId_3_TCB: ' + $("#_ChurchBodyId_3_TCB").val())

            var url = '@Url.Action("GetChurchBodyListByParentBody", "ChurchMembers")';
            $('#_ChurchBodyId_4_TCB').empty();

             //  public JsonResult GetChurchBodyListByParentBody(int? oParentCBId, int? oAppGloOwnId, string strOrgType = null, bool addEmpty = false)
             $.getJSON(url, { oParentCBId: parentCBId, oAppGloOwnId: currDenomId, strOrgType: 'CH', addEmpty: true }, function (data) {
                if (Object.keys(data).length > 0) {
                    var items = '';
                    $.each(data, function (i, oData) {
                        items += "<option value='" + oData.value + "'>" + oData.text + "</option>";   // alert(items);
                    });
                    // items += "<option value=''> Select </option>";   // <option selected disabled value=""> Select Church level </option>
                    $('#_ChurchBodyId_4_TCB').html(items);
                   // alert('hdn4: ' + hdn_ChurchBodyId_4_TCB)
                    $('#_ChurchBodyId_4_TCB').val(hdn_ChurchBodyId_4_TCB);

                  //  if ($("#_div_ChurchBodyId_5_TCB").is(":hidden") == false) {
                    var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
                    if (oCBLevelCount > 4) {
                        $('#_ChurchBodyId_4_TCB').change();
                    }
                    else {
                        if ($('#_ChurchBodyId_4_TCB').val() != '') {
                            str1 = document.getElementById("_ChurchBodyId_4_TCB").options[document.getElementById('_ChurchBodyId_4_TCB').selectedIndex].text;
                        }
                        //  alert('str PRB: ' + str1)
                        if (str1 == null || str1 == '') str1 = 'None. (choose congregation)';
                        document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                        $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_4_TCB').val());
                    }
                }
            });

         })

         $(document).on('change', '#_ChurchBodyId_2_TCB', function (e) {
            e.preventDefault();
           // alert(' CB2 triggered...')


                var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
          //  alert('PRS. oCBLevelCount: ' + oCBLevelCount);
            if (oCBLevelCount == 2) {  // presbytery
                var str1 = "None. (choose congregation)";
                if ($('#_ChurchBodyId_2_TCB').val() != '') {
                    str1 = document.getElementById("_ChurchBodyId_2_TCB").options[document.getElementById('_ChurchBodyId_2_TCB').selectedIndex].text;
                }
              //  alert('str PRB: ' + str1)
                document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_2_TCB').val());
                return false;
            }

            var currDenomId = $("#_oAppGloOwnId_TCB").val();
           // var currDenomId = $("#_hdnAppGloOwnId").val();
             var parentCBId = $("#_ChurchBodyId_2_TCB").val();

           //  var hdn_ChurchBodyId_3_TCB = $('#_ChurchBodyId_3_TCB').val();
             var hdn_ChurchBodyId_3_TCB = $('#hdn_ChurchBodyId_3_TCB').val();
          //   alert('_ChurchBodyId_2_TCB: ' + $("#_ChurchBodyId_3_TCB").val())

            var url = '@Url.Action("GetChurchBodyListByParentBody", "ChurchMembers")';
            $('#_ChurchBodyId_3_TCB').empty();

            //  public JsonResult GetChurchBodyListByParentBody(int? oParentCBId, int? oAppGloOwnId, string strOrgType = null, bool addEmpty = false)
             $.getJSON(url, { oParentCBId: parentCBId, oAppGloOwnId: currDenomId, strOrgType: 'CH', addEmpty: true }, function (data) {
                if (Object.keys(data).length > 0) {
                    var items = '';
                    $.each(data, function (i, oData) {
                        items += "<option value='" + oData.value + "'>" + oData.text + "</option>";   // alert(items);
                    });
                    // items += "<option value=''> Select </option>";
                    $('#_ChurchBodyId_3_TCB').html(items);

                   // alert('hdn3: ' + hdn_ChurchBodyId_3_TCB)
                    $('#_ChurchBodyId_3_TCB').val(hdn_ChurchBodyId_3_TCB);

                   // if ($("#_div_ChurchBodyId_4_TCB").is(":hidden") == false) {
                    var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
                    if (oCBLevelCount > 3) {
                        $('#_ChurchBodyId_3_TCB').change();
                    }
                    else {
                        if ($('#_ChurchBodyId_3_TCB').val() != '') {
                            str1 = document.getElementById("_ChurchBodyId_3_TCB").options[document.getElementById('_ChurchBodyId_3_TCB').selectedIndex].text;
                        }
                        //  alert('str PRB: ' + str1)
                        if (str1 == null || str1 == '') str1 = 'None. (choose congregation)';
                        document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                        $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_3_TCB').val());
                    }
                }
            });

        })

         $(document).on('change', '#_oTargetCLId_TCB', function (e) {
             e.preventDefault();

           // alert('CL ...')

             $('#_divAlertUser').prop('hidden', 'hidden');

            var str1 = document.getElementById("_oTargetCLId_TCB").options[document.getElementById('_oTargetCLId_TCB').selectedIndex].text;
             document.getElementById('_lblTargetCB_TCB').innerHTML = "Church Body (" + str1 + ")";
            //$('#_strChurchLevel').val(str1);

            // triggerChurchLevel_TCB();

             //
             var itemIndex = document.getElementById("_oTargetCLId_TCB").selectedIndex;
            // alert('itemIndex: ' + itemIndex)
             var limCount = $('#_numCLIndex_TCB').val();
            // alert('limCount: ' + limCount)
             var CHLevelIndex = limCount - itemIndex;  // + 1   ... 1 is highest levelIndex /db != selected Index
             $('#_oCBLevelCount_TCB').val(CHLevelIndex);

             //
           //  alert('CHLevelIndex: ' + CHLevelIndex)
             if (CHLevelIndex >= 0 && CHLevelIndex <= limCount) {
                $('#_div_ChurchBodyId_1_TCB').prop('hidden', !(CHLevelIndex >= 1));
                $('#_div_ChurchBodyId_2_TCB').prop('hidden', !(CHLevelIndex >= 2));
                $('#_div_ChurchBodyId_3_TCB').prop('hidden', !(CHLevelIndex >= 3));
                $('#_div_ChurchBodyId_4_TCB').prop('hidden', !(CHLevelIndex >= 4));
                $('#_div_ChurchBodyId_5_TCB').prop('hidden', !(CHLevelIndex >= 5));
                $('#_div_ChurchBodyId_6_TCB').prop('hidden', !(CHLevelIndex >= 6));
                $('#_div_ChurchBodyId_7_TCB').prop('hidden', !(CHLevelIndex >= 7));
                $('#_div_ChurchBodyId_8_TCB').prop('hidden', !(CHLevelIndex >= 8));
                $('#_div_ChurchBodyId_9_TCB').prop('hidden', !(CHLevelIndex >= 9));
                $('#_div_ChurchBodyId_10_TCB').prop('hidden', !(CHLevelIndex >= 10));

                ///
                 var numArbId = '_ChurchBodyId_' + CHLevelIndex + '_TCB';
                 var _strCBDisp = '';
                 if (CHLevelIndex == 1) {  // hq level... load into selected auto...
                  //   alert('strArbId: ' + strArbId)
                    // strArbId = '#_strChurchBody_' + CHLevelIndex + '_TCB';

                     $('#_strChurchBody_1_TCB').prop("disabled", false);
                     _strCBDisp = $('#_strChurchBody_1_TCB').val();
                     $('#_strChurchBody_1_TCB').prop("disabled", true)

                     //alert('_strCBDisp: ' + _strCBDisp)
                 }
                 else {
                     _strCBDisp = document.getElementById(numArbId).options[document.getElementById(numArbId).selectedIndex].text;
                 }

                // alert('numArbId: ' + numArbId) ...

              //  alert('str1: ' + str1)
                 if (_strCBDisp == null || _strCBDisp == '') _strCBDisp = 'None. (choose congregation)';
                 document.getElementById('_strTargetCB_TCB').innerHTML = _strCBDisp;

               //  alert('numArbId: ' + numArbId)   alert('val: ' + $(numArbId).val())
                $('#_oTargetCBId_TCB').val($('#' + numArbId).val());
             }

        })

         var triggerChurchLevel_TCB = function () {

         //    alert('CL triggered')
            //var numCBId = $('#_numParentUnitCBId').val();
            //var strCBName = $('#_strParentUnitCB').val();
            //$('#_numParentUnitCBId').val(numCBId);
            //$('#_strParentUnitCB').val(strCBName);

            var currDenomId = $("#_oAppGloOwnId_TCB").val();
           // var currDenomId = $("#_hdnAppGloOwnId").val();
            var churchLevelId = $("#_oTargetCLId_TCB").val();

          // alert('_numParentUnitCLId: ' + churchLevelId);
        //  alert('currDenomId: ' + currDenomId);

             var url = '@Url.Action("GetChurchLevelIndexesByChurchLevel", "ChurchMembers")';
            //  public JsonResult GetChurchLevelIndexByChurchLevel(int? oChurchLevelId, int? oAppGloOwnId, bool addEmpty = false)
            @*var url = '@Url.Action("GetChurchLevelIndexByChurchLevel", "ChurchMembers")';*@

             //   $('#_ChurchBodyId_2_TCB').empty();

             //document.getElementById('_CountryId').value = '';

            //  public JsonResult GetChurchLevelIndexesByChurchLevel(int? oChurchLevelId, int? oAppGloOwnId, bool addEmpty = false)
            $.getJSON(url, { oChurchLevelId: churchLevelId, oAppGloOwnId: currDenomId }, function (res) {
                if (res != null) {  // alert(res.taskSuccess);  alert(res.strResId); alert(res.strRes);
                    // document.getElementById('_CountryId').value = res.strResId;    // return Json(new { taskSuccess = res, numResLev = _numResLev, strRes = _strRes });

                    var CHLevelIndex = 0;
                     if (res.numResLev != null) {
                         CHLevelIndex = res.numResLev; // - 1;
                        // $('#_numCLIndex_TCB').val(res.numResLev);
                         $('#_oCBLevelCount_TCB').val(CHLevelIndex);
                    }

                  //  alert('CHLevelIndex: ' + CHLevelIndex);
                    //
                    $('#_div_ChurchBodyId_1_TCB').prop('hidden', !(CHLevelIndex >= 1));
                    $('#_div_ChurchBodyId_2_TCB').prop('hidden', !(CHLevelIndex >= 2));
                    $('#_div_ChurchBodyId_3_TCB').prop('hidden', !(CHLevelIndex >= 3));
                    $('#_div_ChurchBodyId_4_TCB').prop('hidden', !(CHLevelIndex >= 4));
                    $('#_div_ChurchBodyId_5_TCB').prop('hidden', !(CHLevelIndex >= 5));
                    $('#_div_ChurchBodyId_6_TCB').prop('hidden', !(CHLevelIndex >= 6));
                    $('#_div_ChurchBodyId_7_TCB').prop('hidden', !(CHLevelIndex >= 7));
                    $('#_div_ChurchBodyId_8_TCB').prop('hidden', !(CHLevelIndex >= 8));
                    $('#_div_ChurchBodyId_9_TCB').prop('hidden', !(CHLevelIndex >= 9));
                    $('#_div_ChurchBodyId_10_TCB').prop('hidden', !(CHLevelIndex >= 10));

                    ///
                    //if ($("#_div_ChurchBodyId_2_TCB").is(":hidden") == false) {

                  //  alert('visible... trigger init')

                    initChurchBodyListLookUp();

                    //  $('#_CountryId').change();

                    // $('#_CountryId').trigger('change');
                    //}
                }
                else {
                  //  var numCHLevelIndex = $('#_numCLIndex_TCB').val();
                  //  alert('HQ...CL numCHLevelIndex: ' + numCHLevelIndex);
                    //var str1 = "None. (choose congregation)";
                   // if ($('#_ChurchBodyId_1_TCB').val() != '') {
                   //     str1 = document.getElementById("_ChurchBodyId_1_TCB").options[document.getElementById('_ChurchBodyId_1_TCB').selectedIndex].text;
                   // }
                   //// alert('str1: ' + str1)
                   // document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                   // $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_1_TCB').val());

                    var str1 = "None. (choose congregation)";
                    document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                    $('#_oTargetCBId_TCB').val(null);
                }
            });
        }

         var initChurchBodyListLookUp = function () {

            //var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
             var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
          //  alert('HQ. oCBLevelCount: ' + oCBLevelCount);

             if (oCBLevelCount == 1) {  // HQ
            //    var str1 = "None. (choose congregation)";
            //    if ($('#_ChurchBodyId_1_TCB').val() != '') {
            //        str1 = document.getElementById("_ChurchBodyId_1_TCB").options[document.getElementById('_ChurchBodyId_1_TCB').selectedIndex].text;
            //    }
            ////    alert('str1 HQ: ' + str1)
            //    document.getElementById('_strTargetCB_TCB').innerHTML = str1;
            //    $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_1_TCB').val());
            //    return false;

                //var str1 = "None. (choose congregation)";
                //if ($('#_strTargetCB_TCB_1').text() != '') {
                //    str1 = $('#_strChurchBody_1').text();
                //}

                $('#_strChurchBody_1_TCB').prop("disabled", false);
                var str1 = $('#_strChurchBody_1_TCB').val();
                $('#_strChurchBody_1_TCB').prop("disabled", true)

                // alert('str1 HQ: ' + str1)
                if (str1 == null || str1 == '') str1 = 'None. (choose congregation)';
                document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_1_TCB').val());

                return false;
            }

             var url = '@Url.Action("GetInitChurchBodyListByAppGloOwn", "ChurchMembers")';

            var currDenomId = $("#_oAppGloOwnId_TCB").val();
           // var currDenomId = $("#_hdnAppGloOwnId").val();
           // var churchLevelId = $("#_numParentUnitCLId").val();

          //  var hdn_ChurchBodyId_2_TCB = $('#_ChurchBodyId_2_TCB').val();
            var hdn_ChurchBodyId_2_TCB = $('#hdn_ChurchBodyId_2_TCB').val();
           // var hdn_ChurchBodyId_2_TCB = $('#_ChurchBodyId_2_TCB').val();

           // alert('bf: ' + hdn_ChurchBodyId_2_TCB)
           // alert('bf hdn: ' + _hdn_ChurchBodyId_2_TCB)

            $('#_ChurchBodyId_2_TCB').empty();
            //   public JsonResult GetInitChurchBodyListByAppGloOwn(int? oAppGloOwnId, bool addEmpty = false)
            $.getJSON(url, { oAppGloOwnId: currDenomId, addEmpty: true }, function (data) {

                if (Object.keys(data).length > 0) {
                    var items = '';
                    $.each(data, function (i, oData) {
                        items += "<option value='" + oData.value + "'>" + oData.text + "</option>";   // alert(items);
                    });

                 //   alert ('clearing...')
                    // items += "<option value=''> Select </option>";
                    $('#_ChurchBodyId_2_TCB').html(items);

                   // alert('hdn2: ' + hdn_ChurchBodyId_2_TCB)
                    $('#_ChurchBodyId_2_TCB').val(hdn_ChurchBodyId_2_TCB);

                    var oCBLevelCount = $('#_oCBLevelCount_TCB').val();
                    if (oCBLevelCount > 2) {
                      //  alert('trig 2...')
                        $('#_ChurchBodyId_2_TCB').change();
                    }
                    else {
                        var str1 = "None. (choose congregation)";
                        if ($('#_ChurchBodyId_2_TCB').val() != '') {
                            str1 = document.getElementById("_ChurchBodyId_2_TCB").options[document.getElementById('_ChurchBodyId_2_TCB').selectedIndex].text;
                        }
                        //  alert('str PRB: ' + str1)
                        if (str1 == null || str1 == '') str1 = 'None. (choose congregation)';
                        document.getElementById('_strTargetCB_TCB').innerHTML = str1;
                        $('#_oTargetCBId_TCB').val($('#_ChurchBodyId_2_TCB').val());
                    }

                }
            });
        }

    </script>


    <!-- MCI scripts -->
    <script>

        $(document).on('change', '#_MobilePhone1_moMemCI', function (e) {
            e.preventDefault();

            var _isDisable = $("#_MobilePhone1_moMemCI").val() == '';
            $('#_MobilePhone2_moMemCI').prop('disabled', _isDisable);
        })

        $(document).on('change', '#chk_ResAddrSameAsPostAddr_moMemCI', function (e) {
            e.preventDefault();
            // alert('_isAddrSame: ');
            var _isAddrSame = $("#chk_ResAddrSameAsPostAddr_moMemCI").is(":checked");
            //  alert('_isAddrSame: ' + _isAddrSame);
            $('#_divPostalAddress_moMemCI').prop('hidden', _isAddrSame);
        })


         $(document).on('change', '#_CountryId_moMemCI', function (e) {
                e.preventDefault();

            var ctryId = $("#_CountryId_moMemCI").val();

            @*// var url = '@Url.Content("~/")' + 'ChurchMembers/GetCountryRegionsByCountry';
            // var  url: '@Url.Action("GetCountryRegionsByCountry", "ChurchMembers")';*@

             var url = '@Url.Content("~/")' + 'ChurchMembers/GetCountryRegionsByCountry';

             var hdnTempRegId = $('#_hdnRegionId_moMemCI').val();

             //var tempRegId = $('#_RegionId_moMemCI').val();
             //alert('tempRegId: ' + tempRegId)
             //alert('hdnTempRegId: ' + hdnTempRegId)

            $('#_RegionId_moMemCI').empty();
             //public JsonResult GetCountryRegionsByCountry(string ctryId, int? defCtryRegid = null, bool addEmpty = false)
             $.getJSON(url, { ctryId: ctryId, defCtryRegid: hdnTempRegId, addEmpty: true }, function (data) {
                    if (Object.keys(data).length > 0)
                    {
                        var items = '';
                        $.each(data, function (i, ctryReg) {
                            items += "<option value='" + ctryReg.value + "'>" + ctryReg.text + "</option>";   // alert(items);
                        });
                       // items += "<option value=''> Select </option>";
                        $('#_RegionId_moMemCI').html(items);
                        $('#_RegionId_moMemCI').val(hdnTempRegId);
                    }
                });

         });

    </script>

    <!-- MFR scripts -->
    <script>

        $(document).on('change', '#_RelationScope_moMFR', function (e) {
            e.preventDefault();

           // alert('selected: ' + $("#_RelationScope_moMFR").val())

            var strRes = $("#_RelationScope_moMFR").val();

            $('#_divExtFellow_MFR').prop('hidden', strRes != "E");
            $('#_divRelationChurchFellow_MFR').prop('hidden', strRes == "E");


            if (strRes == "L") {

            //    document.getElementById('_strRelationChurchBody_par_MFR').innerHTML = $('#_strChurchBody').val();

                $('#_strRelationChurchBody_par_MFR').prop("disabled", false);
                document.getElementById('_strRelationChurchBody_par_MFR').innerHTML = $('#_strChurchBody').val();
                $('#_strRelationChurchBody_par_MFR').prop("disabled", true)

                $('#_numRelationChurchBodyId_par_MFR').val($('#_ChurchBodyId').val());

                //$('#_strRelationChurchBody_par_MFR').prop("disabled", false);
                //var str1 = $('#_strRelationChurchBody_par_MFR').val();
                //$('#_strRelationChurchBody_par_MFR').prop("disabled", true)
            }
            else { //if (strRes == "C")
                $('#_strRelationChurchBody_par_MFR').prop("disabled", false);
                document.getElementById('_strRelationChurchBody_par_MFR').innerHTML = '';
                $('#_strRelationChurchBody_par_MFR').prop("disabled", true)

                $('#_numRelationChurchBodyId_par_MFR').val(null);
                $('#_RelationChurchMemberId_moMFR').val(null);
            }

            //if (strRes == "E") {

            //    $('#_RegionId_moMFR').change();
            //}

        })

        $(document).on('change', '#_MobilePhone1_moMFR', function (e) {
            e.preventDefault();

            var _isDisable = $("#_MobilePhone1_moMFR").val() == '';
            $('#_MobilePhone2_moMFR').prop('disabled', _isDisable);
        })

        $(document).on('change', '#chk_ResAddrSameAsPostAddr_moMFR', function (e) {
            e.preventDefault();
            // alert('_isAddrSame: ');
            var _isAddrSame = $("#chk_ResAddrSameAsPostAddr_moMFR").is(":checked");
            //  alert('_isAddrSame: ' + _isAddrSame);
            $('#_divPostalAddress_moMFR').prop('hidden', _isAddrSame);
        })


         $(document).on('change', '#_CountryId_moMFR', function (e) {
                e.preventDefault();

            var ctryId = $("#_CountryId_moMFR").val();

            @*// var url = '@Url.Content("~/")' + 'ChurchMembers/GetCountryRegionsByCountry';
            // var  url: '@Url.Action("GetCountryRegionsByCountry", "ChurchMembers")';*@

             var url = '@Url.Content("~/")' + 'ChurchMembers/GetCountryRegionsByCountry';

             var hdnTempRegId = $('#_hdnRegionId_moMFR').val();

             //var tempRegId = $('#_RegionId_moMFR').val();
             //alert('tempRegId: ' + tempRegId)
             //alert('hdnTempRegId: ' + hdnTempRegId)

            $('#_RegionId_moMFR').empty();
             //public JsonResult GetCountryRegionsByCountry(string ctryId, int? defCtryRegid = null, bool addEmpty = false)
             $.getJSON(url, { ctryId: ctryId, defCtryRegid: hdnTempRegId, addEmpty: true }, function (data) {
                    if (Object.keys(data).length > 0)
                    {
                        var items = '';
                        $.each(data, function (i, ctryReg) {
                            items += "<option value='" + ctryReg.value + "'>" + ctryReg.text + "</option>";   // alert(items);
                        });
                       // items += "<option value=''> Select </option>";
                        $('#_RegionId_moMFR').html(items);
                        $('#_RegionId_moMFR').val(hdnTempRegId);
                    }
                });

         });


        $(document).on('click', '#_btnPickMembersDirect_moMFR', function (e) {
                e.preventDefault();

            var _oAppGloOwnId = $("#_AppGlobalOwnerId").val();
            if (_oAppGloOwnId == null) _oAppGloOwnId = $("#_oAppGloOwnId_Logged").data("value");


            var currCBId = $("#_numRelationChurchBodyId_par_MFR").val();

            //    public JsonResult GetMemberListByCB(int? oAGOid, int? oCBid, bool addEmpty = false)
            var url = '@Url.Content("~/")' + 'ChurchMembers/GetMemberListByCB';

             //var tempRegId = $('#_RegionId_moMFR').val();
             //alert('tempRegId: ' + tempRegId)
             //alert('hdnTempRegId: ' + hdnTempRegId)

            var hdn_RelaMemberId_moMFR = $('#_hdnRelationChurchMemberId_moMFR').val();

            $('#_RelationChurchMemberId_moMFR').empty();
             //public JsonResult GetCountryRegionsByCountry(string ctryId, int? defCtryRegid = null, bool addEmpty = false)
            $.getJSON(url, { oAGOid: _oAppGloOwnId, oCBid: currCBId, addEmpty: true }, function (data) {
                    if (Object.keys(data).length > 0)
                    {
                        var items = '';
                        $.each(data, function (i, currItem) {
                            items += "<option value='" + currItem.value + "'>" + currItem.text + "</option>";   // alert(items);
                        });
                       // items += "<option value=''> Select </option>";
                        $('#_RelationChurchMemberId_moMFR').html(items);
                        $('#_RelationChurchMemberId_moMFR').val(hdn_RelaMemberId_moMFR);
                    }
                });

         });

        var AddEditCurrDataCM_rtMPC_MFR = function (currCBId, currId, _strItemName = '') {
             //alert('add OR edit...');
            //AddEditCurrDataCM_MPC(res.currCBId, res.currCMId, res.currParid, res.currSetIndex, res.currSubIndex, true);   //currId...   var AddEditCurrDataCM_MPC = function (currCBId, currCMId, s_ndx, skipCurr = true)
            //var AddEditCurrDataCM_BD = function (currCBId, currId, _strItemName)
            //                    AddEditCurrDataCM_moMPC(res.currCBId, res.currCMId, res.currId, res.currParid, res.strItemTag, res.currSetIndex, res.currSubIndex, 2);

            var res = confirm("Switching member profile. Unsaved data will be lost. Continue anyway?");
            if (res == false) {
                return false;
            }

            if (currCBId == null) currCBId = -1;
            if (currId == null) currId = -1;

            //var oCBId_log = $("#_oChurchBodyId_Logged").data("value");
            //if (oCBId_log == null) oCBId_log = -1;

            //if (currCBId != oCBId_log) vw = -1;

            ReloadCurrDataCM_MPC(currCBId, currId, _strItemName );

            @*if (currId < 0) currId = null;

            // public IActionResult AddModCM_BD(int id = 0, int? oCBid = null, int vw = 0)
            var url = "@Url.Action("AddModCM_BD", "ChurchMembers")?id=" + currId + "&oCBid=" + currCBId + "&vw=" + 0;

            window.location.assign(url);*@
        }

        var ReloadCurrDataCM_MPC = function (currCBId, currId, _strItemName = '') {

            //var res = confirm("Switching member profile. Unsaved data will be lost. Continue anyway?");
            //if (res == false) {
            //    return false;
            //}

            if (currCBId == null) currCBId = -1;
            if (currId == null) currId = -1;

            //var oCBId_log = $("#_oChurchBodyId_Logged").data("value");
            //if (oCBId_log == null) oCBId_log = -1;

            //if (currCBId != oCBId_log) vw = -1;

            AddEditCurrDataCM_MPC(currCBId, currId, -1, 0, 0, false);

            @*if (currId < 0) currId = null;

            // public IActionResult AddModCM_BD(int id = 0, int? oCBid = null, int vw = 0)
            var url = "@Url.Action("AddModCM_BD", "ChurchMembers")?id=" + currId + "&oCBid=" + currCBId + "&vw=" + 0;

            window.location.assign(url);*@
        }


        var SendBirthdayMessageCM_MPC = function (currCBId, currId) {

            //var res = confirm("Switching member profile. Unsaved data will be lost. Continue anyway?");
            //if (res == false) {
            //    return false;
            //}

           // alert("sending SMS... ")

            if (currCBId == null)
                currCBId = $("#_oChurchBodyId").data("value");

            if (currId == null)
                currId = $("#_oChurchMemberId").data("value");
             
            if (currCBId == null) currCBId = -1;
            if (currId == null) currId = -1;

            var url = '@Url.Content("~/")' + 'ChurchMembers/SendCustomSMS';

          // var hdnTempRegId = $('#_RegionId_MemCI').val();
           // var tempRegId = $('#_RegionId_MemCI').val();
          //  alert('tempRegId: ' + tempRegId)
           // $('#_RegionId_MemCI').empty();

            //  public JsonResult SendCustomSMS(int oCBid, int oCMid)
            $.getJSON(url, { oCBid: currCBId, oCMid: currId }, function (data) {

                if (res.taskSuccess == true) {

                    DisplaySuccessInfo(res.userMess);

                }

                else //if (res.taskSuccess == false)
                {
                    DisplayErrorInfo(res.userMess, false);
                }



                    //if (Object.keys(data).length > 0)
                    //{
                    //    var items = '';
                    //    $.each(data, function (i, ctryReg) {
                    //        items += "<option value='" + ctryReg.value + "'>" + ctryReg.text + "</option>";   // alert(items);
                    //    });
                    //   // items += "<option value=''> Select </option>";
                    //    $('#_RegionId_MemCI').html(items);
                    //    $('#_RegionId_MemCI').val(hdnTempRegId);
                    //}
                });
        }


        var AddEditCurrDataCM_rtMBD_MFR = function () {
            //  alert('add OR edit...');
            //AddEditCurrDataCM_MPC(res.currCBId, res.currCMId, res.currParid, res.currSetIndex, res.currSubIndex, true);   //currId...   var AddEditCurrDataCM_MPC = function (currCBId, currCMId, s_ndx, skipCurr = true)
            //var AddEditCurrDataCM_BD = function (currCBId, currId, _strItemName)
            //                    AddEditCurrDataCM_moMPC(res.currCBId, res.currCMId, res.currId, res.currParid, res.strItemTag, res.currSetIndex, res.currSubIndex, 2);

            //var res = confirm("Switching member profile. Continue?");
            //if (res == false) {
            //    return false;
            //}
            // currCBId, currId, _strItemName

            var currCBid = $("#_hdnRelationChurchMemberId_moMFR").val();
            var currCMid = $("#_numRelationChurchBodyId_par_MFR").val();
            var _strItemName = document.getElementById("_RelationChurchMemberId_moMFR").options[document.getElementById('_RelationChurchMemberId_moMFR').selectedIndex].text;
            if (currCBId == null) currCBId = -1;
            if (currCMid == null) currCMid = -1;


            //var oCBId_log = $("#_oChurchBodyId_Logged").data("value");
            //if (oCBId_log == null) oCBId_log = -1;

            //if (currCBId != oCBId_log) vw = -1;

            AddEditCurrDataCM_BD(currCBid, currCMid, _strItemName) ;

            @*if (currId < 0) currId = null;

            // public IActionResult AddModCM_BD(int id = 0, int? oCBid = null, int vw = 0)
            var url = "@Url.Action("AddModCM_BD", "ChurchMembers")?id=" + currId + "&oCBid=" + currCBId + "&vw=" + 0;

            window.location.assign(url);*@
        }


    </script>

    <!-- MCP scripts -->
    <script>

        $(document).on('change', '#_RelationScope_moMCP', function (e) {
            e.preventDefault();

            // alert('selected: ' + $("#_RelationScope_moMCP").val())

            var strRes = $("#_RelationScope_moMCP").val();

            $('#_divExtFellow_MCP').prop('hidden', strRes != "E");
            $('#_divContactChurchFellow_MCP').prop('hidden', strRes == "E");

            if (strRes == "L") {

              ///  document.getElementById('_strContactChurchBody_par_MCP').innerHTML = $('#_strChurchBody').val();

                $('#_strContactChurchBody_par_MCP').prop("disabled", false); 
                document.getElementById('_strContactChurchBody_par_MCP').innerHTML = $('#_strChurchBody').val();
                $('#_strContactChurchBody_par_MCP').prop("disabled", true)

                $('#_numContactChurchBodyId_par_MCP').val($('#_ChurchBodyId').val());

                //$('#_strRelationChurchBody_par_MCP').prop("disabled", false);
                //var str1 = $('#_strRelationChurchBody_par_MCP').val();
                //$('#_strRelationChurchBody_par_MCP').prop("disabled", true)
            }
            else { //if (strRes == "C")

               /// document.getElementById('_strContactChurchBody_par_MCP').innerHTML = '';

                $('#_strContactChurchBody_par_MCP').prop("disabled", false); 
                document.getElementById('_strContactChurchBody_par_MCP').innerHTML = '';
                $('#_strContactChurchBody_par_MCP').prop("disabled", true)

                $('#_numContactChurchBodyId_par_MCP').val(null);
                $('#_ContactChurchMemberId_moMCP').val(null);
            }



        })


        //$(document).on('change', '#_RelationScope_moMCP', function (e) {
        //    e.preventDefault();

        //    var strRel = $("#_RelationScope_moMCP").val();
        //    $('#_divRelationChurchFellow_MCP').prop('hidden', strRel == "E");
        //    $('#_divExtFellow_MCP').prop('hidden', strRel != "E");
        //})


        $(document).on('change', '#_MobilePhone1_moMCP', function (e) {
            e.preventDefault();

            var _isDisable = $("#_MobilePhone1_moMCP").val() == '';
            $('#_MobilePhone2_moMCP').prop('disabled', _isDisable);
        })

        $(document).on('change', '#chk_ResAddrSameAsPostAddr_moMCP', function (e) {
            e.preventDefault();
            // alert('_isAddrSame: ');
            var _isAddrSame = $("#chk_ResAddrSameAsPostAddr_moMCP").is(":checked");
            //  alert('_isAddrSame: ' + _isAddrSame);
            $('#_divPostalAddress_moMCP').prop('hidden', _isAddrSame);
        })


         $(document).on('change', '#_CountryId_moMCP', function (e) {
                e.preventDefault();

            var ctryId = $("#_CountryId_moMCP").val();

            @*// var url = '@Url.Content("~/")' + 'ChurchMembers/GetCountryRegionsByCountry';
            // var  url: '@Url.Action("GetCountryRegionsByCountry", "ChurchMembers")';*@

             var url = '@Url.Content("~/")' + 'ChurchMembers/GetCountryRegionsByCountry';

             var hdnTempRegId = $('#_hdnRegionId_moMCP').val();

             //var tempRegId = $('#_RegionId_moMCP').val();
             //alert('tempRegId: ' + tempRegId)
             //alert('hdnTempRegId: ' + hdnTempRegId)

            $('#_RegionId_moMCP').empty();
             //public JsonResult GetCountryRegionsByCountry(string ctryId, int? defCtryRegid = null, bool addEmpty = false)
             $.getJSON(url, { ctryId: ctryId, defCtryRegid: hdnTempRegId, addEmpty: true }, function (data) {
                    if (Object.keys(data).length > 0)
                    {
                        var items = '';
                        $.each(data, function (i, ctryReg) {
                            items += "<option value='" + ctryReg.value + "'>" + ctryReg.text + "</option>";   // alert(items);
                        });
                       // items += "<option value=''> Select </option>";
                        $('#_RegionId_moMCP').html(items);
                        $('#_RegionId_moMCP').val(hdnTempRegId);
                    }
                });

         });



        $(document).on('click', '#_btnPickMembersDirect_moMCP', function (e) {
                e.preventDefault();

            var _oAppGloOwnId = $("#_AppGlobalOwnerId").val();
            if (_oAppGloOwnId == null) _oAppGloOwnId = $("#_oAppGloOwnId_Logged").data("value");


            var currCBId = $("#_numContactChurchBodyId_par_MCP").val();

            //    public JsonResult GetMemberListByCB(int? oAGOid, int? oCBid, bool addEmpty = false)
            var url = '@Url.Content("~/")' + 'ChurchMembers/GetMemberListByCB';

             //var tempRegId = $('#_RegionId_moMCP').val();
             //alert('tempRegId: ' + tempRegId)
             //alert('hdnTempRegId: ' + hdnTempRegId)

            var hdn_RelaMemberId_moMCP = $('#_hdnContactChurchMemberId_moMCP').val();

            $('#_ContactChurchMemberId_moMCP').empty();
             //public JsonResult GetCountryRegionsByCountry(string ctryId, int? defCtryRegid = null, bool addEmpty = false)
            $.getJSON(url, { oAGOid: _oAppGloOwnId, oCBid: currCBId, addEmpty: true }, function (data) {
                    if (Object.keys(data).length > 0)
                    {
                        var items = '';
                        $.each(data, function (i, currItem) {
                            items += "<option value='" + currItem.value + "'>" + currItem.text + "</option>";   // alert(items);
                        });
                       // items += "<option value=''> Select </option>";
                        $('#_ContactChurchMemberId_moMCP').html(items);
                        $('#_ContactChurchMemberId_moMCP').val(hdn_RelaMemberId_moMCP);
                    }
                });

         });

        var AddEditCurrDataCM_rtMPC_MCP = function (currCBId, currId, _strItemName) {
            // alert('add OR edit...');
            //AddEditCurrDataCM_MPC(res.currCBId, res.currCMId, res.currParid, res.currSetIndex, res.currSubIndex, true);   //currId...   var AddEditCurrDataCM_MPC = function (currCBId, currCMId, s_ndx, skipCurr = true)
            //var AddEditCurrDataCM_BD = function (currCBId, currId, _strItemName)
            //                    AddEditCurrDataCM_moMPC(res.currCBId, res.currCMId, res.currId, res.currParid, res.strItemTag, res.currSetIndex, res.currSubIndex, 2);

            var res = confirm("Switching member profile. Continue?");
            if (res == false) {
                return false;
            }

            if (currCBId == null) currCBId = -1;
            if (currId == null) currId = -1;

            //var oCBId_log = $("#_oChurchBodyId_Logged").data("value");
            //if (oCBId_log == null) oCBId_log = -1;

            //if (currCBId != oCBId_log) vw = -1;

            AddEditCurrDataCM_MPC(currCBId, currId, -1, 0, 0, false);

            @*if (currId < 0) currId = null;

            // public IActionResult AddModCM_BD(int id = 0, int? oCBid = null, int vw = 0)
            var url = "@Url.Action("AddModCM_BD", "ChurchMembers")?id=" + currId + "&oCBid=" + currCBId + "&vw=" + 0;

            window.location.assign(url);*@
        }

        var AddEditCurrDataCM_rtMBD_MCP = function () {
              alert('add OR edit...');
            //AddEditCurrDataCM_MPC(res.currCBId, res.currCMId, res.currParid, res.currSetIndex, res.currSubIndex, true);   //currId...   var AddEditCurrDataCM_MPC = function (currCBId, currCMId, s_ndx, skipCurr = true)
            //var AddEditCurrDataCM_BD = function (currCBId, currId, _strItemName)
            //                    AddEditCurrDataCM_moMPC(res.currCBId, res.currCMId, res.currId, res.currParid, res.strItemTag, res.currSetIndex, res.currSubIndex, 2);

            //var res = confirm("Switching member profile. Continue?");
            //if (res == false) {
            //    return false;
            //}
            // currCBId, currId, _strItemName

            var currCBid = $("#_hdnContactChurchMemberId_moMCP").val();
            var currCMid = $("#_numContactChurchBodyId_par_MCP").val();
            var _strItemName = document.getElementById("_ContactChurchMemberId_moMCP").options[document.getElementById('_ContactChurchMemberId_moMCP').selectedIndex].text;
            if (currCBId == null) currCBId = -1;
            if (currCMid == null) currCMid = -1;


            //var oCBId_log = $("#_oChurchBodyId_Logged").data("value");
            //if (oCBId_log == null) oCBId_log = -1;

            //if (currCBId != oCBId_log) vw = -1;

            AddEditCurrDataCM_BD(currCBid, currCMid, _strItemName) ;

            @*if (currId < 0) currId = null;

            // public IActionResult AddModCM_BD(int id = 0, int? oCBid = null, int vw = 0)
            var url = "@Url.Action("AddModCM_BD", "ChurchMembers")?id=" + currId + "&oCBid=" + currCBId + "&vw=" + 0;

            window.location.assign(url);*@
        }


    </script>

    <!--  MED scripts -->
    <script>
        $(document).on('change', '#chk_IsCompleted_moMED', function (e) {
            e.preventDefault();

            var valType = $("#chk_IsCompleted_moMED").is(":checked");
            $('#_divToDate_moMED').prop('hidden', !valType);
        });


    </script>

    <!--  MPB scripts -->
    <script>
        $(document).on('change', '#chk_IsActivePractice_moMPB', function (e) {
            e.preventDefault();

            var valType = $("#chk_IsActivePractice_moMPB").is(":checked");
            $('#_divToDate_moMPB').prop('hidden', valType);
        });

    </script>

    <!--  MWE scripts -->
    <script>
        $(document).on('change', '#chk_IsCurrentWork_moMWE', function (e) {
            e.preventDefault();

            var valType = $("#chk_IsCurrentWork_moMWE").is(":checked");
            $('#_divToDate_moMWE').prop('hidden', valType);
            $('#_divReason_moMWE').prop('hidden', valType);
        });

    </script>


    <!--  MCL scripts -->
    <script>
        $(document).on('change', '#chk_IsCurrentMember_moMCL_CL', function (e) {
            e.preventDefault();

            var valType = $("#chk_IsCurrentMember_moMCL_CL").is(":checked");
            $('#_divIsDeceased_moMCL_CL').prop('hidden', valType);
            $('#_divDateDeparted_moMCL_CL').prop('hidden', valType);
            $('#_divDepartReason_moMCL_CL').prop('hidden', valType);
        });

        $(document).on('change', '#chk_IsMemConfirmed_moMCL_CL', function (e) {
            e.preventDefault();

            var valType = $("#chk_IsMemConfirmed_moMCL_CL").is(":checked");
            $('#_divNonConfirmReason_moMCL_CL').prop('hidden', valType);
        });

        $(document).on('change', '#chk_IsMemCommunicant_moMCL_CL', function (e) {
            e.preventDefault();

            var valType = $("#chk_IsMemCommunicant_moMCL_CL").is(":checked");
            $('#_divNonCommReason_moMCL_CL').prop('hidden', valType);
        });



    </script>

    <!--  MCLAc scripts -->
    <script>
        $(document).on('change', '#chk_IsChurchEvent_moMCL_CLAc', function (e) {
            e.preventDefault();

            var valType = $("#chk_IsChurchEvent_moMCL_CLAc").is(":checked");
            $('#_divChurchEventId_moMCL_CLAc').prop('hidden', !valType);
        });


        $(document).on('change', '#_HostVenueScope_moMCL_CLAc', function (e) {
            e.preventDefault();

            // alert('selected: ' + $("#_RelationScope_moMFR").val())

            var strRes = $("#_HostVenueScope_moMCL_CLAc").val();

            $('#_divHostVenueExt_moMCL_CLAc').prop('hidden', strRes != "E");
            $('#_divHostVenueChurchPremise_moMCL_CLAc').prop('hidden', strRes == "E");


            if (strRes == "L") {
                 
                // var _strVal1 = $('#_strChurchBody').val();;
                $('#_strVenueChurchBody_par_moMCL_CLAc').prop("disabled", false);
                //$('#_strVenueChurchBody_par_moMCL_CLAc').val(_strVal1);
                document.getElementById('_strVenueChurchBody_par_moMCL_CLAc').innerHTML = $('#_strChurchBody').val();
                $('#_strVenueChurchBody_par_moMCL_CLAc').prop("disabled", true)

                $('#_numVenueChurchBodyId_par_moMCL_CLAc').val($('#_ChurchBodyId').val());

            }
            else { //if (strRes == "C")

              ///  document.getElementById('_strVenueChurchBody_par_moMCL_CLAc').innerHTML = '';

                $('#_strVenueChurchBody_par_moMCL_CLAc').prop("disabled", false);
                //$('#_strVenueChurchBody_par_moMCL_CLAc').val(_strVal1);
                document.getElementById('_strVenueChurchBody_par_moMCL_CLAc').innerHTML = '';
                $('#_strVenueChurchBody_par_moMCL_CLAc').prop("disabled", true)
                 

                $('#_numVenueChurchBodyId_par_moMCL_CLAc').val(null);
                // $('#_RelationChurchMemberId_moMFR').val(null);
            }
        })

        $(document).on('change', '#_OfficiatedByScope_moMCL_CLAc', function (e) {
            e.preventDefault();

            // alert('selected: ' + $("#_OfficiatedByScope_moMCL_CLAc").val())

            var strRes = $("#_OfficiatedByScope_moMCL_CLAc").val();

            $('#_divOfficiatedByScopeExt_moMCL_CLAc').prop('hidden', strRes != "E");
            $('#_divOfficiatedByScopeChurchMember_moMCL_CLAc').prop('hidden', strRes == "E");


            if (strRes == "L") {

                document.getElementById('_strVenueChurchBody_par_moMCL_CLAc').innerHTML = $('#_strChurchBody').val();
                $('#_numVenueChurchBodyId_par_moMCL_CLAc').val($('#_ChurchBodyId').val());

            }
            else { //if (strRes == "C")
                document.getElementById('_strVenueChurchBody_par_moMCL_CLAc').innerHTML = '';
                $('#_numVenueChurchBodyId_par_moMCL_CLAc').val(null);
                // $('#_RelationChurchMemberId_moMCL_CLAc').val(null);   _Status_moMCL_CET
            }
        })

        $(document).on('click', '#_btnPickMembersDirect_moMCL_CLAc', function (e) {
                e.preventDefault();

            var _oAppGloOwnId = $("#_AppGlobalOwnerId").val();
            if (_oAppGloOwnId == null) _oAppGloOwnId = $("#_oAppGloOwnId_Logged").data("value");


            var currCBId = $("#_numOfficiatedByChurchBodyId_par_moMCL_CLAc").val();

            //    public JsonResult GetMemberListByCB(int? oAGOid, int? oCBid, bool addEmpty = false)
            var url = '@Url.Content("~/")' + 'ChurchMembers/GetMemberListByCB';

             //var tempRegId = $('#_RegionId_moMCL_CLAc').val();
             //alert('tempRegId: ' + tempRegId)
             //alert('hdnTempRegId: ' + hdnTempRegId)

            var hdn_MemberId_moMCL_CLAc = $('#_hdnOfficiatedByChurchMemberId_moMCL_CLAc').val();

            $('#_OfficiatedByChurchMemberId_moMCL_CLAc').empty();
             //public JsonResult GetCountryRegionsByCountry(string ctryId, int? defCtryRegid = null, bool addEmpty = false)
            $.getJSON(url, { oAGOid: _oAppGloOwnId, oCBid: currCBId, addEmpty: true }, function (data) {
                    if (Object.keys(data).length > 0)
                    {
                        var items = '';
                        $.each(data, function (i, currItem) {
                            items += "<option value='" + currItem.value + "'>" + currItem.text + "</option>";   // alert(items);
                        });
                       // items += "<option value=''> Select </option>";
                        $('#_OfficiatedByChurchMemberId_moMCL_CLAc').html(items);
                        $('#_OfficiatedByChurchMemberId_moMCL_CLAc').val(hdn_MemberId_moMCL_CLAc);
                    }
                });

         });

    </script>


    <!--  MCLAc scripts -->
    <script>
        $(document).on('change', '#_Status_moMCL_CET', function (e) {
            e.preventDefault();

            var strRes = $("#_Status_moMCL_CET").val();

            $('#_divDateCompleted_moMCL_CET').prop('hidden', !(strRes != "X" || strRes != "D" || strRes != "C" || strRes == "A"));


            //if (strRes == "L") {

            //    document.getElementById('_strVenueChurchBody_par_moMCL_CLAc').innerHTML = $('#_strChurchBody').val();
            //    $('#_numVenueChurchBodyId_par_moMCL_CLAc').val($('#_ChurchBodyId').val());

            //}
            //else { //if (strRes == "C")
            //    document.getElementById('_strVenueChurchBody_par_moMCL_CLAc').innerHTML = '';
            //    $('#_numVenueChurchBodyId_par_moMCL_CLAc').val(null);
            //    // $('#_RelationChurchMemberId_moMFR').val(null);
            //}
        })



    </script>


    <!--  MT scripts -->
    <script>
        $(document).on('change', '#chk_IsCurrent_moMCM_MT', function (e) {
            e.preventDefault();

            var valType = $("#chk_IsCurrent_moMCM_MT").is(":checked");
            $('#_divToDate_moMCM_MT').prop('hidden', valType);
            $('#_divReason_moMCM_MT').prop('hidden', valType);
        });
    </script>

    <!--  MR scripts -->
    <script>
        $(document).on('change', '#chk_IsCurrentRank_moMCM_MR', function (e) {
            e.preventDefault();

            var valType = $("#chk_IsCurrentRank_moMCM_MR").is(":checked");
            $('#_divToDate_moMCM_MR').prop('hidden', valType);
            $('#_divReason_moMCM_MR').prop('hidden', valType);
        });

    </script>

    <!--  MS scripts -->
    <script>
        $(document).on('change', '#chk_IsCurrent_moMCM_MS', function (e) {
            e.preventDefault();

            var valType = $("#chk_IsCurrent_moMCM_MS").is(":checked");
            $('#_divToDate_moMCM_MS').prop('hidden', valType);
            $('#_divReason_moMCM_MS').prop('hidden', valType);
        });

    </script>

    <!--  MCG scripts -->
    <script>
        $(document).on('change', '#chk_IsCurrUnit_moMCG', function (e) {
            e.preventDefault();

            var valType = $("#chk_IsCurrUnit_moMCG").is(":checked");
            $('#_divToDate_moMCG').prop('hidden', valType);
            $('#_divDepartReason_moMCG').prop('hidden', valType);
        });


        $(document).on('change', '#_strOrgType_moMCG', function (e) {
            e.preventDefault();

            var currOrgType = $("#_strOrgType_moMCG").val();
            var numCBId = $('#_ChurchBodyId').val();

            loadCBChurchUnits(numCBId, currOrgType);
        });

        var loadCBChurchUnits = function(numParUnitCBId, strOrgType){

        var url = '@Url.Content("~/")' + 'ChurchMembers/GetChurchUnitListByParentCB';
        var currAGOId_Logged = $("#_oAppGloOwnId_Logged").data("value");
        var hdn_ChurchUnitId_moMCG = $('#hdn_ChurchUnitId_moMCG').val();

        $('#_ChurchUnitId_moMCG').empty();
        $.getJSON(url, { oAGOId: currAGOId_Logged, oUnitCBId: numParUnitCBId, strOrgTypeCode: strOrgType, addEmpty: true}, function (data) {
                 if (Object.keys(data).length > 0)
                 {
                     var items = ''; // var sel = 0;
                     $.each(data, function (i, oVal) {
                         items += "<option value='" + oVal.value + "'>" + oVal.text + "</option>";   // alert(items);
                     });

                     $('#_ChurchUnitId_moMCG').html(items);
                     $('#_ChurchUnitId_moMCG').val(hdn_ChurchUnitId_moMCG);
                 }
             });
         }

    </script>

    <!--  MCR scripts -->
    <script>
        $(document).on('change', '#chk_IsCurrentRole_moMCR', function (e) {
            e.preventDefault();

            var valType = $("#chk_IsCurrentRole_moMCR").is(":checked");
            $('#_divToDate_moMCR').prop('hidden', valType);
            $('#_divDepartReason_moMCR').prop('hidden', valType);
        });

        $(document).on('change', '#chk_IsChurchUnit_moMCR', function (e) {
            e.preventDefault();

            var valType = $("#chk_IsChurchUnit_moMCR").is(":checked");
            $('#_divChurchUnit').prop('hidden', !valType);
        });

    </script>





}
